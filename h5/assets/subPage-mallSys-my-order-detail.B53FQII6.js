import{d as a,r as e,c as t,A as l,a as s,w as o,b as r,e as n,ad as u,f as d,o as c,g as i,i as f,D as m,a5 as _,h as v,p,t as g,k as b,F as h,l as y,v as k,J as w,E as S,z as x}from"./index-BvTRnY6x.js";import{g as D}from"./orders.DJuNOKoI.js";const F="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=400&h=400&q=80",j=x(a({__name:"detail",setup(a){const x=e(!1),j=e(null),A=e(""),C=[{name:"查看账单",value:"showBill"},{name:"上传身份资料",value:"audit"},{name:"联系商家",value:"contact"}],M=t(()=>j.value&&j.value.img||F),P=t(()=>{const a=j.value||{},e=[a.brand,a.model,a.storage].filter(Boolean);return e.length?e.join(" "):"租赁商品"}),$=t(()=>j.value&&j.value.quantity||1),q=t(()=>"2025.11.09-2026.05.07"),B=t(()=>j.value?j.value.createdAt||"2025-11-06 15:37:30":""),N=t(()=>{const a=j.value;if(!a)return[];const e=Number(a.remainingPeriods||0),t=Number(a.perAmount||0);if(!e||!t)return[];const l=[],s=new Date;for(let o=1;o<=e;o++){const a=new Date(s);a.setMonth(a.getMonth()+o);const e=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");l.push({id:o,phase:o,date:`${e}-${r}-${n}`,amount:t.toFixed(2),status:o<=3?"overdue":"upcoming"})}return l}),z=()=>{k({url:"/subPage/mallSys/my/information/control"})},E=()=>{w({title:"取消订单",content:"订单生成后取消可能影响您的授信额度，确定继续取消吗？",success:a=>{a.confirm&&S({title:"已提交取消申请",icon:"none"})}})},H=()=>{k({url:"/subPage/mallSys/my/information/payment"})},I=a=>{A.value=a};return l(a=>{if(x.value=!0,a&&a.id){const e=D(a.id);j.value=e||null}x.value=!1}),(a,e)=>{const t=r("b-navbar"),l=v,k=f,w=_,S=n(d("up-select"),u),D=r("head-top");return c(),s(D,{loading:x.value,is_footer_mar:!1},{default:o(()=>[i(k,{class:"order-detail-page"},{default:o(()=>[i(t,{title:"订单详情",is_back:!0,is_footer_mar:!1}),i(w,{class:"order-detail-body","scroll-y":""},{default:o(()=>[j.value?(c(),s(k,{key:0,class:"card order-card"},{default:o(()=>[i(k,{class:"order-card-main"},{default:o(()=>[i(k,{class:"order-card-thumb"},{default:o(()=>[i(l,{class:"order-card-img",src:M.value,mode:"aspectFill"},null,8,["src"])]),_:1}),i(k,{class:"order-card-info"},{default:o(()=>[i(k,{class:"order-card-title"},{default:o(()=>[p(g(P.value),1)]),_:1}),i(k,{class:"order-card-desc"},{default:o(()=>[p(" 已逾期，租完可归还/买断+白+180天 ")]),_:1}),i(k,{class:"order-card-rent"},{default:o(()=>[p("租期："+g(q.value),1)]),_:1})]),_:1}),i(k,{class:"order-card-count"},{default:o(()=>[p("x"+g($.value),1)]),_:1})]),_:1})]),_:1})):m("",!0),j.value?(c(),s(k,{key:1,class:"card info-card"},{default:o(()=>[i(k,{class:"section-title"},{default:o(()=>[p("订单信息")]),_:1}),i(k,{class:"info-row"},{default:o(()=>[i(k,{class:"info-label"},{default:o(()=>[p("订单编号")]),_:1}),i(k,{class:"info-value"},{default:o(()=>[p(g(j.value.code),1)]),_:1})]),_:1}),i(k,{class:"info-row"},{default:o(()=>[i(k,{class:"info-label"},{default:o(()=>[p("创建时间")]),_:1}),i(k,{class:"info-value"},{default:o(()=>[p(g(B.value),1)]),_:1})]),_:1})]),_:1})):m("",!0),N.value.length?(c(),s(k,{key:2,class:"card installment-card"},{default:o(()=>[i(k,{class:"section-title"},{default:o(()=>[p("分期信息")]),_:1}),i(k,{class:"installment-list"},{default:o(()=>[(c(!0),b(h,null,y(N.value,a=>(c(),s(k,{key:a.id,class:"installment-item"},{default:o(()=>[i(k,{class:"installment-left"},{default:o(()=>[i(k,{class:"installment-phase"},{default:o(()=>[p("第"+g(a.phase)+"期",1)]),_:2},1024),i(k,{class:"installment-date"},{default:o(()=>[p(g(a.date),1)]),_:2},1024)]),_:2},1024),i(k,{class:"installment-right"},{default:o(()=>[i(k,{class:"installment-amount"},{default:o(()=>[p("¥"+g(a.amount),1)]),_:2},1024),"overdue"===a.status?(c(),s(k,{key:0,class:"installment-tag installment-tag-overdue"},{default:o(()=>[p("逾期")]),_:1})):m("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):m("",!0)]),_:1}),j.value?(c(),s(k,{key:0,class:"order-detail-footer"},{default:o(()=>[i(k,{class:"footer-more"},{default:o(()=>[i(S,{current:A.value,"onUpdate:current":e[0]||(e[0]=a=>A.value=a),label:"更多",options:C,overlayOpacity:"0.3",onSelect:I},null,8,["current"])]),_:1}),i(k,{class:"footer-actions"},{default:o(()=>[i(k,{class:"footer-btn",onClick:z},{default:o(()=>[p("合同资料")]),_:1}),i(k,{class:"footer-btn",onClick:E},{default:o(()=>[p("取消订单")]),_:1}),i(k,{class:"footer-btn footer-btn-primary",onClick:H},{default:o(()=>[p("确认支付")]),_:1})]),_:1})]),_:1})):m("",!0)]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-9e49f8f6"]]);export{j as default};
