import{d as a,r as e,c as l,K as t,A as s,a as o,w as u,b as r,e as d,aC as c,f as n,aD as i,a6 as f,a7 as p,_ as v,aa as m,B as _,o as b,g as h,i as y,a5 as k,D as x,p as g,n as w,t as A,k as N,F as C,l as V,a8 as z,E as R,aA as S,aE as W,z as F}from"./index-BvTRnY6x.js";import{B as P}from"./index.CbVtr8P-.js";import{g as U,a as j}from"./orders.DJuNOKoI.js";const B=F(a({__name:"earlyRepayment",setup(a){const F=e(!1),B=e(null),I=e([]),L=l(()=>{var a;const e=Number((null==(a=B.value)?void 0:a.remainingPeriods)||0);return e?Array.from({length:e},(a,e)=>e+1):[]}),D=l(()=>{var a;const e=Number((null==(a=B.value)?void 0:a.perAmount)||0);return e?e.toFixed(2):"0.00"}),E=l(()=>{var a,e;const l=Number((null==(a=B.value)?void 0:a.remainingPeriods)||0),t=Number((null==(e=B.value)?void 0:e.perAmount)||0);return l&&t?(l*t).toFixed(2):"0.00"}),$=l(()=>{var a;const e=I.value.length,l=Number((null==(a=B.value)?void 0:a.perAmount)||0);return e&&l?(e*l).toFixed(2):"0.00"}),H=e("bank"),J=t({accountName:"租无忧科技有限公司",accountNumber:"6222 0000 1234 5678",bankName:"中国银行 深圳分行"}),K=e([]),T=t({phone:""}),q={width:"100%",height:"44px",backgroundColor:"#3c9cff",borderColor:"#3c9cff",borderRadius:"4px",fontSize:"16px"},G=l(()=>"bank"===H.value?"确认提交":`去支付 ¥${$.value}`),M=a=>{z({data:a,success:()=>{R({title:"复制成功",icon:"none"})}})},O=()=>{if(B.value)if(I.value.length&&"0.00"!==$.value){if("bank"===H.value){if(!K.value.length)return void R({title:"请上传转账凭证",icon:"none"});S({key:"earlyRepayBank",data:{orderId:B.value.id,periods:I.value,totalAmount:$.value,proofs:K.value}}),R({title:"提前还款凭证已提交",icon:"none"})}else{if(!T.phone)return void R({title:"请填写 WhatsApp 号码",icon:"none"});S({key:"earlyRepayWA",data:{orderId:B.value.id,periods:I.value,totalAmount:$.value,phone:T.phone}}),R({title:"已发起 WhatsApp 支付链接",icon:"none"})}setTimeout(()=>{W({delta:1})},500)}else R({title:"请选择提前还款期数",icon:"none"});else R({title:"暂无可提前还款的订单",icon:"none"})};return s(a=>{F.value=!0;let e=null;e=a&&a.id?U(a.id):j(3)||j(1),e&&(B.value=e,B.value.remainingPeriods&&(I.value=[1])),F.value=!1}),(a,e)=>{const l=y,t=w,s=d(n("up-checkbox"),c),z=d(n("up-checkbox-group"),i),R=d(n("up-radio"),f),S=d(n("up-radio-group"),p),W=d(n("up-icon"),v),U=d(n("u-input"),m),j=k,Q=d(n("up-button"),_),X=r("head-top");return b(),o(X,{loading:F.value,is_footer_mar:!1},{default:u(()=>[h(l,{class:"early-repay-page"},{default:u(()=>[h(j,{class:"early-repay-body","scroll-y":""},{default:u(()=>[B.value?(b(),o(l,{key:0,class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("订单信息")]),_:1}),h(l,{class:"order-info"},{default:u(()=>[h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("订单编号：")]),_:1}),h(t,{class:"order-value"},{default:u(()=>[g(A(B.value.code),1)]),_:1})]),_:1}),h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("品牌型号：")]),_:1}),h(t,{class:"order-value"},{default:u(()=>[g(A(B.value.brand)+" · "+A(B.value.model),1)]),_:1})]),_:1}),h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("内存：")]),_:1}),h(t,{class:"order-value"},{default:u(()=>[g(A(B.value.storage),1)]),_:1})]),_:1}),h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("剩余期数：")]),_:1}),h(t,{class:"order-value"},{default:u(()=>[g(A(B.value.remainingPeriods)+"期",1)]),_:1})]),_:1}),h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("每期金额：")]),_:1}),h(t,{class:"order-value"},{default:u(()=>[g("¥"+A(D.value),1)]),_:1})]),_:1}),h(l,{class:"order-row"},{default:u(()=>[h(t,{class:"order-label"},{default:u(()=>[g("总剩余应还：")]),_:1}),h(t,{class:"order-value amount-strong"},{default:u(()=>[g("¥"+A(E.value),1)]),_:1})]),_:1})]),_:1})]),_:1})):x("",!0),B.value?(b(),o(l,{key:1,class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("选择期数与金额")]),_:1}),h(l,{class:"form-item"},{default:u(()=>[h(l,{class:"form-label"},{default:u(()=>[g("提前还款期数（可多选）")]),_:1}),h(z,{modelValue:I.value,"onUpdate:modelValue":e[0]||(e[0]=a=>I.value=a),placement:"row"},{default:u(()=>[(b(!0),N(C,null,V(L.value,a=>(b(),o(s,{key:a,name:a,label:`${a}期`,shape:"circle",activeColor:"#3c9cff",customStyle:{marginRight:"16px"}},null,8,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),h(l,{class:"total-line"},{default:u(()=>[h(t,{class:"total-label"},{default:u(()=>[g("选择期数的还款金额：")]),_:1}),h(t,{class:"total-amount"},{default:u(()=>[g("¥"+A($.value),1)]),_:1})]),_:1})]),_:1})):x("",!0),h(l,{class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("选择支付方式")]),_:1}),h(S,{modelValue:H.value,"onUpdate:modelValue":e[1]||(e[1]=a=>H.value=a),placement:"row"},{default:u(()=>[h(R,{customStyle:{marginRight:"16px"},name:"bank",label:"银行卡转账",activeColor:"#3c9cff"}),h(R,{name:"whatsapp",label:"WhatsApp 线上支付",activeColor:"#3c9cff"})]),_:1},8,["modelValue"])]),_:1}),"bank"===H.value?(b(),o(l,{key:2,class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("转账信息")]),_:1}),h(l,{class:"info-row",onClick:e[2]||(e[2]=a=>M(J.accountName))},{default:u(()=>[h(t,{class:"info-label"},{default:u(()=>[g("收款账户：")]),_:1}),h(l,{class:"info-value-box"},{default:u(()=>[h(t,{class:"info-value"},{default:u(()=>[g(A(J.accountName),1)]),_:1}),h(W,{name:"file-text",size:"18",color:"#999999",class:"copy-icon"})]),_:1})]),_:1}),h(l,{class:"info-row",onClick:e[3]||(e[3]=a=>M(J.accountNumber))},{default:u(()=>[h(t,{class:"info-label"},{default:u(()=>[g("银行账号：")]),_:1}),h(l,{class:"info-value-box"},{default:u(()=>[h(t,{class:"info-value"},{default:u(()=>[g(A(J.accountNumber),1)]),_:1}),h(W,{name:"file-text",size:"18",color:"#999999",class:"copy-icon"})]),_:1})]),_:1}),h(l,{class:"info-row",onClick:e[4]||(e[4]=a=>M(J.bankName))},{default:u(()=>[h(t,{class:"info-label"},{default:u(()=>[g("开户银行：")]),_:1}),h(l,{class:"info-value-box"},{default:u(()=>[h(t,{class:"info-value"},{default:u(()=>[g(A(J.bankName),1)]),_:1}),h(W,{name:"file-text",size:"18",color:"#999999",class:"copy-icon"})]),_:1})]),_:1})]),_:1})):x("",!0),"bank"===H.value?(b(),o(l,{key:3,class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("上传转账凭证")]),_:1}),h(l,{class:"upload-tip"},{default:u(()=>[g("请上传提前还款的转账截图")]),_:1}),h(l,{class:"upload-area"},{default:u(()=>[h(P,{fileList:K.value,"onUpdate:fileList":e[5]||(e[5]=a=>K.value=a),maxCount:3,width:"80",height:"80"},null,8,["fileList"])]),_:1})]),_:1})):x("",!0),"whatsapp"===H.value?(b(),o(l,{key:4,class:"card"},{default:u(()=>[h(l,{class:"card-title"},{default:u(()=>[g("线上支付")]),_:1}),h(l,{class:"form-item"},{default:u(()=>[h(l,{class:"form-label"},{default:u(()=>[g("WhatsApp 号码")]),_:1}),h(l,{class:"input-box"},{default:u(()=>[h(U,{class:"input",modelValue:T.phone,"onUpdate:modelValue":e[6]||(e[6]=a=>T.phone=a),placeholder:"请输入 WhatsApp 号码",fontSize:"24rpx",customStyle:{padding:"8rpx 24rpx"}},null,8,["modelValue"])]),_:1})]),_:1}),h(l,{class:"total-line"},{default:u(()=>[h(t,{class:"total-label"},{default:u(()=>[g("本次提前还款金额：")]),_:1}),h(t,{class:"total-amount"},{default:u(()=>[g("¥"+A($.value),1)]),_:1})]),_:1})]),_:1})):x("",!0)]),_:1}),h(l,{class:"bottom-bar"},{default:u(()=>[h(Q,{type:"primary",text:G.value,customStyle:q,onClick:O},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-667694e3"]]);export{B as default};
