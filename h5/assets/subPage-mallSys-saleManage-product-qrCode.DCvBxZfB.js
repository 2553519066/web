import{d as e,r as a,x as l,v as t,c as u,w as s,a as o,b as r,$ as n,e as i,B as d,o as c,f as v,i as _,m as f,n as m,t as p,h as b,F as h,j as x,u as E}from"./index-GbXCx2Zj.js";import{g as N}from"./phones.CXKAVbyd.js";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang.DsAcmEGh.js";var w={VITE_NAME:"phone-shop",VITE_ENV:"development",VITE_HTTPS_URL:"127.0.0.1",VITE_QR_CODE_URL:"https://www.baidu.com",VITE_CJS_IGNORE_WARNING:"true",VITE_ROOT_DIR:"E:\\MsUni",VITE_USER_NODE_ENV:"production",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const y=E(e({__name:"qrCode",setup(e){console.log(w);const E=a(!1);a("new");const y=a(null),I=a(null),R=a(0),S=a([{name:"商品信息"},{name:"账单信息"}]);l(e=>{if(null==e?void 0:e.form)try{I.value=JSON.parse(decodeURIComponent(e.form))}catch(l){I.value=null}const a=(null==e?void 0:e.id)||1;y.value=N(a)});const T=t(()=>{var e,a;return(null==(e=I.value)?void 0:e.model)?I.value.model:(null==(a=y.value)?void 0:a.name)||"-"}),V=t(()=>{var e,a;return(null==(e=I.value)?void 0:e.brand)?I.value.brand:(null==(a=y.value)?void 0:a.brand)||"-"}),F=t(()=>{var e,a;const l=(null==(e=I.value)?void 0:e.color)||"",t=(null==(a=I.value)?void 0:a.storage)||"";return l||t?l&&t?`${l}＋${t}`:l||t:"-"}),O=t(()=>{var e,a;if(!y.value&&!I.value)return"";const l=Number(I.value&&I.value.salePrice||y.value&&y.value.price||0),t={type:"order",id:null==(e=y.value)?void 0:e.id,name:null==(a=y.value)?void 0:a.name,price:l,form:I.value||void 0};return`https://saas3.zl.xyzulin.top/h5/#/?data=${encodeURIComponent(JSON.stringify(t))}`}),U=t(()=>{var e;if(I.value){const e=Number(I.value.salePrice||0),a=Number(I.value.downPaymentAmount||0),l=Number(I.value.downPaymentPercent||0);let t=0;a>0?t=Number(a.toFixed(2)):e>0&&l>0&&(t=Number((e*(l/100)).toFixed(2)));const u=Number(I.value.installment||0);if(!e||!u)return[];const s=Math.max(e-t,0),o=u-(t>0?1:0);if(o<=0)return[];const r=o>0?Number((s/o).toFixed(2)):0,n=[];t>0&&n.push(t.toFixed(2));let i=0;for(let d=1;d<=o;d++){const e=d===o?Number((s-i).toFixed(2)):r;i+=e,n.push(e.toFixed(2))}return n}const a=(null==(e=y.value)?void 0:e.price)||0,l=a?(a/8).toFixed(2):"0.00";return Array.from({length:8},()=>l)});return(e,a)=>{const l=o("b-navbar"),t=r(i("up-qrcode"),n),N=_,w=f,I=r(i("up-image"),d),C=o("head-top");return c(),u(C,{loading:E.value,is_footer_mar:!1},{default:s(()=>[v(N,{class:"order-container"},{default:s(()=>[v(l,{title:"扫码下单"}),v(N,{class:"qr-area"},{default:s(()=>[v(N,{class:"qr-box"},{default:s(()=>{var e;return[v(t,{cid:"order-qrcode",val:O.value,size:230,icon:(null==(e=y.value)?void 0:e.img)||"",showLoading:!0,loadingText:"二维码生成中"},null,8,["val","icon"])]}),_:1}),v(N,{class:"qr-text"},{default:s(()=>[v(w,{class:"t1"},{default:s(()=>[m("扫一扫 立即购买")]),_:1}),v(w,{class:"t2"},{default:s(()=>[m("快速订单详情")]),_:1})]),_:1})]),_:1}),v(N,{class:"tabs-container"},{default:s(()=>[v(g,{list:S.value,current:R.value,"onUpdate:current":a[0]||(a[0]=e=>R.value=e),scrollable:!1,lineColor:"#3c9cff",activeStyle:{color:"#303133",fontWeight:600},inactiveStyle:{color:"#606266"},itemStyle:{height:"44px",flex:1,justifyContent:"center",whiteSpace:"nowrap"}},null,8,["list","current"])]),_:1}),0===R.value?(c(),u(N,{key:0,class:"info-card"},{default:s(()=>[v(N,{class:"info-row"},{default:s(()=>[v(w,{class:"label"},{default:s(()=>[m("商品名称")]),_:1}),v(w,{class:"value"},{default:s(()=>[m(p(T.value),1)]),_:1})]),_:1}),v(N,{class:"info-row"},{default:s(()=>[v(w,{class:"label"},{default:s(()=>[m("商品分类")]),_:1}),v(w,{class:"value"},{default:s(()=>[m(p(V.value),1)]),_:1})]),_:1}),v(N,{class:"info-row"},{default:s(()=>[v(w,{class:"label"},{default:s(()=>[m("商品规格")]),_:1}),v(w,{class:"value"},{default:s(()=>[m(p(F.value),1)]),_:1})]),_:1}),v(N,{class:"info-row image-row"},{default:s(()=>{var e;return[v(w,{class:"label"},{default:s(()=>[m("商品图片")]),_:1}),v(I,{src:(null==(e=y.value)?void 0:e.img)||"",width:"100px",height:"100px",mode:"aspectFill"},null,8,["src"])]}),_:1})]),_:1})):(c(),u(N,{key:1,class:"bill-card"},{default:s(()=>[v(N,{class:"bill-title"},{default:s(()=>[m("账单明细：")]),_:1}),v(N,{class:"bill-list"},{default:s(()=>[(c(!0),b(h,null,x(U.value,(e,a)=>(c(),u(N,{key:a,class:"bill-item"},{default:s(()=>[v(w,{class:"phase"},{default:s(()=>[m("第"+p(a+1)+"期",1)]),_:2},1024),v(w,{class:"amount"},{default:s(()=>[m("￥ "+p(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-3aa6492a"]]);export{y as default};
