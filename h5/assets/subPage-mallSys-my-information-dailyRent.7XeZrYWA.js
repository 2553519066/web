import{d as a,r as l,c as e,K as s,B as t,a as u,w as o,b as d,e as n,Z as i,f,$ as r,a1 as c,C as p,o as v,g as _,i as m,Y as b,n as y,q as h,p as g,t as x,E as k,ad as w,T as A,A as C}from"./index-DrDFWzXK.js";import{B as V}from"./index.CDtarDfC.js";import{g as W}from"./orders.DJuNOKoI.js";const R=C(a({__name:"dailyRent",setup(a){const C=l(!1),R=l(null),S=e(()=>{var a;const l=Number((null==(a=R.value)?void 0:a.dailyFee)||0);return l?l.toFixed(2):"0.00"}),F=e(()=>{var a,l;const e=Number((null==(a=R.value)?void 0:a.dailyFee)||0),s=Number((null==(l=R.value)?void 0:l.overdueDays)||0);return e&&s?(e*s).toFixed(2):"0.00"}),j=l("bank"),B=l([]),I=s({phone:""}),L={width:"100%",height:"44px",backgroundColor:"#3c9cff",borderColor:"#3c9cff",borderRadius:"4px",fontSize:"16px"},N=e(()=>"bank"===j.value?"提交凭证":"去支付"),U=()=>{if(R.value){if("bank"===j.value){if(!B.value.length)return void k({title:"请上传转账凭证",icon:"none"});w({key:"dailyRentBank",data:{orderId:R.value.id,proofs:B.value}}),k({title:"日租续用转账凭证已提交",icon:"none"})}else{if(!I.phone.trim())return void k({title:"请填写 WhatsApp 号码",icon:"none"});w({key:"dailyRentWA",data:{orderId:R.value.id,phone:I.phone,amount:F.value}}),k({title:"已发起 WhatsApp 支付链接",icon:"none"})}setTimeout(()=>{A({url:"/pages/userApp/my/index"})},500)}else k({title:"暂无日租续用订单",icon:"none"})};return t(a=>{if(C.value=!0,a&&a.id){const l=W(a.id);R.value=l||null}C.value=!1}),(a,l)=>{const e=m,s=g,t=n(f("up-radio"),i),k=n(f("up-radio-group"),r),w=n(f("u-input"),c),A=b,W=n(f("up-button"),p),z=d("head-top");return v(),u(z,{loading:C.value,is_footer_mar:!1},{default:o(()=>[_(e,{class:"daily-page"},{default:o(()=>[_(A,{class:"daily-body","scroll-y":""},{default:o(()=>[R.value?(v(),u(e,{key:0,class:"card"},{default:o(()=>[_(e,{class:"card-title"},{default:o(()=>[h("订单信息")]),_:1}),_(e,{class:"order-info"},{default:o(()=>[_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("订单编号：")]),_:1}),_(s,{class:"info-value"},{default:o(()=>[h(x(R.value.code),1)]),_:1})]),_:1}),_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("品牌型号：")]),_:1}),_(s,{class:"info-value"},{default:o(()=>[h(x(R.value.brand)+" · "+x(R.value.model),1)]),_:1})]),_:1}),_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("内存：")]),_:1}),_(s,{class:"info-value"},{default:o(()=>[h(x(R.value.storage),1)]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),R.value?(v(),u(e,{key:1,class:"card"},{default:o(()=>[_(e,{class:"card-title"},{default:o(()=>[h("费用信息")]),_:1}),_(e,{class:"fee-info"},{default:o(()=>[_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("日租费用：")]),_:1}),_(s,{class:"info-value amount-strong"},{default:o(()=>[h("¥"+x(S.value),1)]),_:1})]),_:1}),_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("逾期天数：")]),_:1}),_(s,{class:"info-value"},{default:o(()=>[h(x(R.value.overdueDays)+" 天",1)]),_:1})]),_:1}),_(e,{class:"info-row"},{default:o(()=>[_(s,{class:"info-label"},{default:o(()=>[h("逾期金额：")]),_:1}),_(s,{class:"info-value amount-strong"},{default:o(()=>[h("¥"+x(F.value),1)]),_:1})]),_:1})]),_:1})]),_:1})):y("",!0),_(e,{class:"card"},{default:o(()=>[_(e,{class:"card-title"},{default:o(()=>[h("选择支付方式")]),_:1}),_(k,{modelValue:j.value,"onUpdate:modelValue":l[0]||(l[0]=a=>j.value=a),placement:"row"},{default:o(()=>[_(t,{customStyle:{marginRight:"16px"},name:"bank",label:"银行卡转账",activeColor:"#3c9cff"}),_(t,{name:"whatsapp",label:"WhatsApp 线上支付",activeColor:"#3c9cff"})]),_:1},8,["modelValue"])]),_:1}),"bank"===j.value?(v(),u(e,{key:2,class:"card"},{default:o(()=>[_(e,{class:"card-title"},{default:o(()=>[h("上传转账凭证")]),_:1}),_(e,{class:"upload-tip"},{default:o(()=>[h("请上传日租续用的转账截图")]),_:1}),_(e,{class:"upload-area"},{default:o(()=>[_(V,{fileList:B.value,"onUpdate:fileList":l[1]||(l[1]=a=>B.value=a),maxCount:3,width:"80",height:"80"},null,8,["fileList"])]),_:1})]),_:1})):y("",!0),"whatsapp"===j.value?(v(),u(e,{key:3,class:"card"},{default:o(()=>[_(e,{class:"card-title"},{default:o(()=>[h("线上支付")]),_:1}),_(e,{class:"form-item"},{default:o(()=>[_(e,{class:"form-label"},{default:o(()=>[h("WhatsApp 号码")]),_:1}),_(e,{class:"input-box"},{default:o(()=>[_(w,{class:"input",modelValue:I.phone,"onUpdate:modelValue":l[2]||(l[2]=a=>I.phone=a),placeholder:"请输入 WhatsApp 号码",fontSize:"24rpx",customStyle:{padding:"8rpx 24rpx"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):y("",!0)]),_:1}),_(e,{class:"bottom-bar"},{default:o(()=>[R.value?(v(),u(e,{key:0,class:"summary"},{default:o(()=>[_(s,{class:"summary-label"},{default:o(()=>[h("逾期金额")]),_:1}),_(s,{class:"summary-amount"},{default:o(()=>[h("¥"+x(F.value),1)]),_:1})]),_:1})):y("",!0),_(W,{type:"primary",text:N.value,customStyle:L,onClick:U},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-a2f6c887"]]);export{R as default};
