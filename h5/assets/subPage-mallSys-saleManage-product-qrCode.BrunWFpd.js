import{d as e,r as l,x as a,v as t,c as u,w as s,a as n,b as o,$ as r,e as i,B as d,o as c,f as v,i as _,m as f,n as m,t as p,h as b,F as h,j as x,u as g}from"./index-D6n_yxAO.js";import{g as E}from"./phones.CXKAVbyd.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_lang.CrChtQ2S.js";var y={VITE_NAME:"phone-shop",VITE_ENV:"development",VITE_HTTPS_URL:"127.0.0.1",VITE_QR_CODE_URL:"https://web.hujinqiang.cn/h5/",VITE_CJS_IGNORE_WARNING:"true",VITE_ROOT_DIR:"E:\\MsUni",VITE_USER_NODE_ENV:"production",BASE_URL:"/h5/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const w=g(e({__name:"qrCode",setup(e){console.log(y);const g=l(!1);l("new");const w=l(null),I=l(null),R=l(0),S=l([{name:"商品信息"},{name:"账单信息"}]);a(e=>{if(null==e?void 0:e.form)try{I.value=JSON.parse(decodeURIComponent(e.form))}catch(a){I.value=null}const l=(null==e?void 0:e.id)||1;w.value=E(l)});const T=t(()=>{var e,l;return(null==(e=I.value)?void 0:e.model)?I.value.model:(null==(l=w.value)?void 0:l.name)||"-"}),V=t(()=>{var e,l;return(null==(e=I.value)?void 0:e.brand)?I.value.brand:(null==(l=w.value)?void 0:l.brand)||"-"}),F=t(()=>{var e,l;const a=(null==(e=I.value)?void 0:e.color)||"",t=(null==(l=I.value)?void 0:l.storage)||"";return a||t?a&&t?`${a}＋${t}`:a||t:"-"}),O=t(()=>{var e,l;if(!w.value&&!I.value)return"";const a=Number(I.value&&I.value.salePrice||w.value&&w.value.price||0),t={type:"order",id:null==(e=w.value)?void 0:e.id,name:null==(l=w.value)?void 0:l.name,price:a,form:I.value||void 0};return`https://web.hujinqiang.cn/h5//subPage/mallSys/product/buy/index?form=${encodeURIComponent(JSON.stringify(t))}`}),q=t(()=>{var e;if(I.value){const e=Number(I.value.salePrice||0),l=Number(I.value.downPaymentAmount||0),a=Number(I.value.downPaymentPercent||0);let t=0;l>0?t=Number(l.toFixed(2)):e>0&&a>0&&(t=Number((e*(a/100)).toFixed(2)));const u=Number(I.value.installment||0);if(!e||!u)return[];const s=Math.max(e-t,0),n=u-(t>0?1:0);if(n<=0)return[];const o=n>0?Number((s/n).toFixed(2)):0,r=[];t>0&&r.push(t.toFixed(2));let i=0;for(let d=1;d<=n;d++){const e=d===n?Number((s-i).toFixed(2)):o;i+=e,r.push(e.toFixed(2))}return r}const l=(null==(e=w.value)?void 0:e.price)||0,a=l?(l/8).toFixed(2):"0.00";return Array.from({length:8},()=>a)});return(e,l)=>{const a=n("b-navbar"),t=o(i("up-qrcode"),r),E=_,y=f,I=o(i("up-image"),d),P=n("head-top");return c(),u(P,{loading:g.value,is_footer_mar:!1},{default:s(()=>[v(E,{class:"order-container"},{default:s(()=>[v(a,{title:"扫码下单"}),v(E,{class:"qr-area"},{default:s(()=>[v(E,{class:"qr-box"},{default:s(()=>{var e;return[v(t,{cid:"order-qrcode",val:O.value,size:230,icon:(null==(e=w.value)?void 0:e.img)||"",showLoading:!0,loadingText:"二维码生成中"},null,8,["val","icon"])]}),_:1}),v(E,{class:"qr-text"},{default:s(()=>[v(y,{class:"t1"},{default:s(()=>[m("扫一扫 立即购买")]),_:1}),v(y,{class:"t2"},{default:s(()=>[m("快速订单详情")]),_:1})]),_:1})]),_:1}),v(E,{class:"tabs-container"},{default:s(()=>[v(N,{list:S.value,current:R.value,"onUpdate:current":l[0]||(l[0]=e=>R.value=e),scrollable:!1,lineColor:"#3c9cff",activeStyle:{color:"#303133",fontWeight:600},inactiveStyle:{color:"#606266"},itemStyle:{height:"44px",flex:1,justifyContent:"center",whiteSpace:"nowrap"}},null,8,["list","current"])]),_:1}),0===R.value?(c(),u(E,{key:0,class:"info-card"},{default:s(()=>[v(E,{class:"info-row"},{default:s(()=>[v(y,{class:"label"},{default:s(()=>[m("商品名称")]),_:1}),v(y,{class:"value"},{default:s(()=>[m(p(T.value),1)]),_:1})]),_:1}),v(E,{class:"info-row"},{default:s(()=>[v(y,{class:"label"},{default:s(()=>[m("商品分类")]),_:1}),v(y,{class:"value"},{default:s(()=>[m(p(V.value),1)]),_:1})]),_:1}),v(E,{class:"info-row"},{default:s(()=>[v(y,{class:"label"},{default:s(()=>[m("商品规格")]),_:1}),v(y,{class:"value"},{default:s(()=>[m(p(F.value),1)]),_:1})]),_:1}),v(E,{class:"info-row image-row"},{default:s(()=>{var e;return[v(y,{class:"label"},{default:s(()=>[m("商品图片")]),_:1}),v(I,{src:(null==(e=w.value)?void 0:e.img)||"",width:"100px",height:"100px",mode:"aspectFill"},null,8,["src"])]}),_:1})]),_:1})):(c(),u(E,{key:1,class:"bill-card"},{default:s(()=>[v(E,{class:"bill-title"},{default:s(()=>[m("账单明细：")]),_:1}),v(E,{class:"bill-list"},{default:s(()=>[(c(!0),b(h,null,x(q.value,(e,l)=>(c(),u(E,{key:l,class:"bill-item"},{default:s(()=>[v(y,{class:"phase"},{default:s(()=>[m("第"+p(l+1)+"期",1)]),_:2},1024),v(y,{class:"amount"},{default:s(()=>[m("￥ "+p(e),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}))]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-8e715838"]]);export{w as default};
