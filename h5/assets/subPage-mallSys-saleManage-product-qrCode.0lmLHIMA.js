import{d as a,r as l,A as e,c as t,a as u,w as s,b as o,e as r,ac as n,f as d,o as i,g as c,i as v,n as _,p as m,D as f,h as p,t as b,k as g,F as E,l as h,z as N}from"./index-BvTRnY6x.js";import{g as x}from"./phones.CXKAVbyd.js";var I={VITE_NAME:"租无忧-万物皆可分期",VITE_ENV:"development",VITE_HTTPS_URL:"http://192.168.1.48:10007",VITE_API_PROXY:"/api",VITE_QR_CODE_URL:"https://web.hujinqiang.cn/h5/#",VITE_CJS_IGNORE_WARNING:"true",VITE_ROOT_DIR:"E:\\MsUni",VITE_USER_NODE_ENV:"production",BASE_URL:"/h5/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const y=N(a({__name:"qrCode",setup(a){console.log(I);const N=l(!1);l("new");const y=l(null),R=l(null);l(0),l([{name:"商品信息"},{name:"账单信息"}]),e(a=>{if(null==a?void 0:a.form)try{R.value=JSON.parse(decodeURIComponent(a.form))}catch(e){R.value=null}const l=(null==a?void 0:a.id)||1;y.value=x(l)});const T=t(()=>{var a,l;return(null==(a=R.value)?void 0:a.model)?R.value.model:(null==(l=y.value)?void 0:l.name)||"-"});t(()=>{var a,l;return(null==(a=R.value)?void 0:a.brand)?R.value.brand:(null==(l=y.value)?void 0:l.brand)||"-"});const P=t(()=>{var a,l;const e=(null==(a=R.value)?void 0:a.color)||"",t=(null==(l=R.value)?void 0:l.storage)||"";return e||t?e&&t?`${e}＋${t}`:e||t:"-"}),V=t(()=>{var a;return(null==(a=R.value)?void 0:a.installment)?`${R.value.installment}期`:""}),O=t(()=>{var a,l;return(null==(a=R.value)?void 0:a.salePrice)||(null==(l=y.value)?void 0:l.price)||"0.00"}),q=l(1);l("待支付");const F=t(()=>{var a;return{storeName:"租无忧旗舰店",img:(null==(a=y.value)?void 0:a.img)||""}}),S=t(()=>{var a,l;if(!y.value&&!R.value)return"";const e=Number(R.value&&R.value.salePrice||y.value&&y.value.price||0),t={type:"order",id:null==(a=y.value)?void 0:a.id,name:null==(l=y.value)?void 0:l.name,price:e,form:R.value||void 0};return`https://web.hujinqiang.cn/h5/#/subPage/mallSys/product/buy/index?form=${encodeURIComponent(JSON.stringify(t))}`}),w=t(()=>{var a;if(R.value){const a=Number(R.value.salePrice||0),l=Number(R.value.downPaymentAmount||0),e=Number(R.value.downPaymentPercent||0);let t=0;l>0?t=Number(l.toFixed(2)):a>0&&e>0&&(t=Number((a*(e/100)).toFixed(2)));const u=Number(R.value.installment||0);if(!a||!u)return[];const s=Math.max(a-t,0),o=u-(t>0?1:0);if(o<=0)return[];const r=o>0?Number((s/o).toFixed(2)):0,n=[];t>0&&n.push(t.toFixed(2));let d=0;for(let i=1;i<=o;i++){const a=i===o?Number((s-d).toFixed(2)):r;d+=a,n.push(a.toFixed(2))}return n}const l=(null==(a=y.value)?void 0:a.price)||0,e=l?(l/8).toFixed(2):"0.00";return Array.from({length:8},()=>e)});return(a,l)=>{const e=o("b-navbar"),t=r(d("up-qrcode"),n),x=v,I=_,R=p,A=o("head-top");return i(),u(A,{loading:N.value,is_footer_mar:!1},{default:s(()=>[c(x,{class:"order-container"},{default:s(()=>[c(e,{title:"扫码下单"}),c(x,{class:"qr-area"},{default:s(()=>[c(x,{class:"qr-box"},{default:s(()=>{var a;return[c(t,{cid:"order-qrcode",val:S.value,size:230,icon:(null==(a=y.value)?void 0:a.img)||"",showLoading:!0,loadingText:"二维码生成中"},null,8,["val","icon"])]}),_:1}),c(x,{class:"qr-text"},{default:s(()=>[c(I,{class:"t1"},{default:s(()=>[m("扫一扫 立即购买")]),_:1}),c(I,{class:"t2"},{default:s(()=>[m("快速订单详情")]),_:1})]),_:1})]),_:1}),c(x,{class:"body-container"},{default:s(()=>[c(x,{class:"info-card"},{default:s(()=>[c(x,{class:"bill-title"},{default:s(()=>[m("商品信息：")]),_:1}),c(x,{class:"order_item"},{default:s(()=>[c(x,{class:"order_body"},{default:s(()=>[c(x,{class:"product_thumb"},{default:s(()=>[c(R,{class:"product_img",src:F.value.img||"/static/logo.png",mode:"aspectFill"},null,8,["src"])]),_:1}),c(x,{class:"product_info"},{default:s(()=>[c(x,{class:"product_title"},{default:s(()=>[m(b(T.value),1)]),_:1}),P.value?(i(),u(x,{key:0,class:"product_spec"},{default:s(()=>[m(b(P.value),1)]),_:1})):f("",!0),V.value?(i(),u(x,{key:1,class:"product_term"},{default:s(()=>[m(b(V.value),1)]),_:1})):f("",!0),c(x,{class:"product_bottom"},{default:s(()=>[c(x,{class:"total_rent"},{default:s(()=>[c(I,{class:"total_label"},{default:s(()=>[m("总租金")]),_:1}),c(I,{class:"total_amount"},{default:s(()=>[m("¥"+b(O.value),1)]),_:1})]),_:1}),c(x,{class:"quantity"},{default:s(()=>[m("x"+b(q.value),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(x,{class:"bill-card"},{default:s(()=>[c(x,{class:"bill-title"},{default:s(()=>[m("账单明细：")]),_:1}),c(x,{class:"bill-list"},{default:s(()=>[(i(!0),g(E,null,h(w.value,(a,l)=>(i(),u(x,{key:l,class:"bill-item"},{default:s(()=>[c(I,{class:"phase"},{default:s(()=>[m("第"+b(l+1)+"期",1)]),_:2},1024),c(I,{class:"amount"},{default:s(()=>[m("￥ "+b(a),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),f("",!0)]),_:1})]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-f701af9b"]]);export{y as default};
