import{d as e,r as a,c as l,M as t,B as u,a as n,w as s,b as o,e as i,_ as r,f as d,a1 as c,C as v,D as m,o as f,g as b,i as p,n as P,s as _,q as g,p as w,t as h,k as y,F as x,l as C,E as k,x as S,A as N}from"./index-BmuteYHR.js";import{g as F}from"./phones.CXKAVbyd.js";const M=N(e({__name:"index",setup(e){const N=a(!1),M=a("new"),A=a({brand:"",model:"",storage:"",color:"",salePrice:0,guidePrice:0,installment:0,downPaymentAmount:"",downPaymentPercent:""});a(1);const $=a(null),V=a(!1),z=a(!1),D=a(!1),G=a(!1),X=a(!1),U=a([["Apple","Samsung","Huawei","Xiaomi"]]),B={Apple:{"iPhone 15":{salePrice:5999,guidePrice:6999},"iPhone 15 Pro":{salePrice:7999,guidePrice:8999},"iPhone 15 Pro Max":{salePrice:9999,guidePrice:10999}},Samsung:{"Galaxy S24":{salePrice:5499,guidePrice:6499},"Galaxy S24 Ultra":{salePrice:8999,guidePrice:9999}},Huawei:{"Mate 60":{salePrice:6999,guidePrice:7999},P60:{salePrice:4999,guidePrice:5999}},Xiaomi:{"Xiaomi 14":{salePrice:3999,guidePrice:4999},"Xiaomi 14 Pro":{salePrice:4999,guidePrice:5999}}},I={Apple:["iPhone 15","iPhone 15 Pro","iPhone 15 Pro Max"],Samsung:["Galaxy S24","Galaxy S24 Ultra"],Huawei:["Mate 60","P60"],Xiaomi:["Xiaomi 14","Xiaomi 14 Pro"]},H=l(()=>{if(!A.value.brand)return[[]];return[I[A.value.brand]||[]]}),j=["128GB","256GB","512GB","1TB"],q=a([j]),Y=["黑色","白色","蓝色","紫色","金色"],E=a([Y]),J=a([[3,6,12,24].map(e=>`${e}期`)]),O=a("month"),R=l(()=>A.value.installment?`${A.value.installment}期`:""),T=l(()=>!!(A.value.brand&&A.value.model&&A.value.storage&&A.value.color)),K=l(()=>{const e=Number(A.value.salePrice||0),a=Number(A.value.downPaymentAmount||0);if(a>0)return Number(a.toFixed(2));const l=Number(A.value.downPaymentPercent||0);return e>0&&l>0?Number((e*(l/100)).toFixed(2)):0}),L=l(()=>{if(!T.value||!A.value.installment)return"--";const e=Number(A.value.salePrice||0),a=K.value,l=Math.max(e-a,0),t=Number(A.value.installment||0);if(!t)return"0.00";const u=t-(a>0?1:0);return u<=0?"0.00":(l/u).toFixed(2)}),Q=l(()=>{if(!T.value||!A.value.installment)return[];const e=Number(A.value.salePrice||0),a=K.value,l=Math.max(e-a,0),t=Number(A.value.installment||0);if(!t||e<=0)return[];const u=t-(a>0?1:0),n=u>0?Number((l/u).toFixed(2)):0,s=[];let o=0;const i=e=>{const a=["零","一","二","三","四","五","六","七","八","九"];return 10===e?"十":e<10?a[e]:e<20?"十"+a[e-10]:e%10==0?a[Math.floor(e/10)]+"十":a[Math.floor(e/10)]+"十"+a[e%10]},r=new Date,d=r.getFullYear(),c=String(r.getMonth()+1).padStart(2,"0"),v=String(r.getDate()).padStart(2,"0");a>0&&s.push({key:"first",label:"首付",date:`${d}-${c}-${v}`,amount:a.toFixed(2)});for(let m=1;m<=u;m++){const e=m===u?Number((l-o).toFixed(2)):n;o+=e;const t=new Date;"week"===O.value?t.setDate(t.getDate()+7*m):t.setMonth(t.getMonth()+m);const r=t.getFullYear(),d=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getDate()).padStart(2,"0"),v=a>0?m+1:m;s.push({key:`p-${m}`,label:`第${i(v)}期`,date:`${r}-${d}-${c}`,amount:e.toFixed(2)})}return s}),W=l(()=>"week"===O.value?"每周应付":"每月应付"),Z={width:"100%",height:"50rpx",lineHeight:"100rpx",backgroundColor:"transparent",padding:"0",fontSize:"28rpx"},ee={width:"100%",height:"50rpx",backgroundColor:"transparent",padding:"0",fontSize:"28rpx"},ae=e=>{var a;const l=(null==(a=null==e?void 0:e.detail)?void 0:a.value)??e,t=Number(A.value.salePrice||0),u=Number(l||0);if(t>0&&u>0){const e=u/t*100;A.value.downPaymentPercent=e.toFixed(2)}else A.value.downPaymentPercent=""},le=e=>{var a;const l=(null==(a=null==e?void 0:e.detail)?void 0:a.value)??e,t=Number(A.value.salePrice||0),u=Number(l||0);if(t>0&&u>0){const e=t*u/100;A.value.downPaymentAmount=e.toFixed(2)}else A.value.downPaymentAmount=""};t(()=>A.value.salePrice,e=>{const a=Number(e||0);if(!a)return A.value.downPaymentAmount="",void(A.value.downPaymentPercent="");const l=Number(A.value.downPaymentPercent||0),t=Number(A.value.downPaymentAmount||0);if(l>0){const e=a*l/100;A.value.downPaymentAmount=e?e.toFixed(2):""}else if(t>0){const e=t/a*100;A.value.downPaymentPercent=e?e.toFixed(2):""}});const te=()=>{A.value.brand?z.value=!0:k({title:"请先选择品牌",icon:"none"})},ue=()=>{A.value.brand?A.value.model?D.value=!0:k({title:"请先选择型号",icon:"none"}):k({title:"请先选择品牌",icon:"none"})},ne=()=>{A.value.brand?A.value.model?G.value=!0:k({title:"请先选择型号",icon:"none"}):k({title:"请先选择品牌",icon:"none"})},se=()=>{A.value.brand?A.value.model?A.value.storage?A.value.color?X.value=!0:k({title:"请先选择颜色",icon:"none"}):k({title:"请先选择内存",icon:"none"}):k({title:"请先选择型号",icon:"none"}):k({title:"请先选择品牌",icon:"none"})},oe=e=>{A.value.brand=e.value[0],A.value.model="",A.value.storage="",A.value.color="",A.value.salePrice=0,A.value.guidePrice=0,A.value.installment=0,V.value=!1},ie=e=>{var a;const l=e.value[0];if(A.value.model=l,A.value.storage="",A.value.color="",A.value.installment=0,A.value.brand&&l){const e=null==(a=B[A.value.brand])?void 0:a[l];e&&(A.value.salePrice=e.salePrice,A.value.guidePrice=e.guidePrice)}z.value=!1},re=e=>{A.value.storage=e.value[0],A.value.installment=0,D.value=!1},de=e=>{A.value.color=e.value[0],A.value.installment=0,G.value=!1},ce=e=>{const a=e.value[0];A.value.installment=parseInt(a),X.value=!1},ve=()=>{if(!A.value.brand||!A.value.model||!A.value.storage)return void k({title:"请完善商品信息",icon:"none"});if(!A.value.salePrice)return void k({title:"请填写售价",icon:"none"});const e=encodeURIComponent(JSON.stringify(A.value)),a=null!=$.value?`&id=${$.value}`:"";S({url:`/subPage/mallSys/saleManage/product/qrCode?form=${e}${a}`})};return u(e=>{if(e.id){$.value=Number(e.id);const a=F(e.id);a&&(A.value.brand=a.brand,A.value.model=a.name,A.value.salePrice=a.price,A.value.guidePrice=a.price+1e3,A.value.storage=e.storage||e.memory||j[0],A.value.color=e.color||Y[0],A.value.installment=12)}}),(e,a)=>{const l=o("b-navbar"),t=p,u=w,k=i(d("up-icon"),r),S=i(d("up-input"),c),F=i(d("up-button"),v),$=i(d("up-picker"),m),B=o("head-top");return f(),n(B,{loading:N.value,is_footer_mar:!1},{default:s(()=>[b(t,{class:"order-container"},{default:s(()=>[b(l,{title:"快速下单"}),b(t,{class:"type-tabs"},{default:s(()=>[b(t,{class:_(["tab","new"===M.value?"active":""]),onClick:a[0]||(a[0]=e=>M.value="new")},{default:s(()=>[g("新机")]),_:1},8,["class"]),b(t,{class:_(["tab","old"===M.value?"active":""]),onClick:a[1]||(a[1]=e=>M.value="old")},{default:s(()=>[g("旧机")]),_:1},8,["class"])]),_:1}),b(t,{class:"card"},{default:s(()=>[b(t,{class:"card-title"},{default:s(()=>[g("商品信息")]),_:1}),b(t,{class:"product-form"},{default:s(()=>[b(t,{class:"form-item",onClick:a[2]||(a[2]=e=>V.value=!0)},{default:s(()=>[b(t,{class:"form-label"},{default:s(()=>[g("品牌")]),_:1}),b(t,{class:"input-box"},{default:s(()=>[b(u,{class:_(["input-text",{placeholder:!A.value.brand}])},{default:s(()=>[g(h(A.value.brand||"请选择品牌"),1)]),_:1},8,["class"]),b(k,{name:"arrow-down",size:"16",color:"#909399"})]),_:1})]),_:1}),b(t,{class:"form-item",onClick:te},{default:s(()=>[b(t,{class:"form-label"},{default:s(()=>[g("型号")]),_:1}),b(t,{class:_(["input-box",{disabled:!A.value.brand}])},{default:s(()=>[b(u,{class:_(["input-text",{placeholder:!A.value.model}])},{default:s(()=>[g(h(A.value.model||"请选择型号"),1)]),_:1},8,["class"]),b(k,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),b(t,{class:"form-inline"},{default:s(()=>[b(t,{class:"form-item",onClick:ue},{default:s(()=>[b(t,{class:"form-label"},{default:s(()=>[g("内存")]),_:1}),b(t,{class:_(["input-box",{disabled:!A.value.model}])},{default:s(()=>[b(u,{class:_(["input-text",{placeholder:!A.value.storage}])},{default:s(()=>[g(h(A.value.storage||"请选择内存"),1)]),_:1},8,["class"]),b(k,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),b(t,{class:"form-item",onClick:ne},{default:s(()=>[b(t,{class:"form-label"},{default:s(()=>[g("颜色")]),_:1}),b(t,{class:_(["input-box",{disabled:!A.value.model}])},{default:s(()=>[b(u,{class:_(["input-text",{placeholder:!A.value.color}])},{default:s(()=>[g(h(A.value.color||"请选择颜色"),1)]),_:1},8,["class"]),b(k,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1}),b(t,{class:"card"},{default:s(()=>[b(t,{class:"card-title"},{default:s(()=>[g("订单金额")]),_:1}),b(t,{class:"discount-grid"},{default:s(()=>[b(t,{class:"discount-item"},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("售价：")]),_:1}),b(t,{class:_(["input-box",{disabled:!T.value}])},{default:s(()=>[b(S,{modelValue:A.value.salePrice,"onUpdate:modelValue":a[3]||(a[3]=e=>A.value.salePrice=e),type:"number",placeholder:"请输入售价",border:"none",disabled:!T.value,customStyle:Z},null,8,["modelValue","disabled"])]),_:1},8,["class"])]),_:1}),b(t,{class:"discount-item"},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("指导价：")]),_:1}),b(t,{class:"guide-display"},{default:s(()=>[g(h(T.value&&A.value.guidePrice?"¥"+Number(A.value.guidePrice).toFixed(2):"--"),1)]),_:1})]),_:1})]),_:1})]),_:1}),b(t,{class:"card"},{default:s(()=>[b(t,{class:"card-title"},{default:s(()=>[g("购机还款计划")]),_:1}),b(t,{class:"discount-grid"},{default:s(()=>[b(t,{class:"discount-item"},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("还款类型：")]),_:1}),b(t,{class:"repay-type"},{default:s(()=>[b(t,{class:_(["repay-tag","month"===O.value?"active":""]),onClick:a[4]||(a[4]=e=>O.value="month")},{default:s(()=>[g(" 每月 ")]),_:1},8,["class"]),b(t,{class:_(["repay-tag","week"===O.value?"active":""]),onClick:a[5]||(a[5]=e=>O.value="week")},{default:s(()=>[g(" 每周 ")]),_:1},8,["class"])]),_:1})]),_:1}),b(t,{class:"discount-item"},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("首付金额：")]),_:1}),b(t,{class:_(["input-box",{disabled:!T.value}])},{default:s(()=>[b(S,{modelValue:A.value.downPaymentAmount,"onUpdate:modelValue":a[6]||(a[6]=e=>A.value.downPaymentAmount=e),type:"number",placeholder:"请输入首付金额",border:"none",disabled:!T.value,customStyle:ee,onInput:ae},null,8,["modelValue","disabled"])]),_:1},8,["class"])]),_:1}),b(t,{class:"discount-item",onClick:se},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("期数：")]),_:1}),b(t,{class:_(["input-box",{disabled:!T.value}])},{default:s(()=>[b(u,{class:_(["input-text",{placeholder:!R.value}])},{default:s(()=>[g(h(R.value||"选择期数"),1)]),_:1},8,["class"]),b(k,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),b(t,{class:"discount-item"},{default:s(()=>[b(t,{class:"label"},{default:s(()=>[g("首付金额占比：")]),_:1}),b(t,{class:_(["input-box",{disabled:!T.value}])},{default:s(()=>[b(S,{modelValue:A.value.downPaymentPercent,"onUpdate:modelValue":a[7]||(a[7]=e=>A.value.downPaymentPercent=e),type:"number",placeholder:"例如 20 表示 20%",border:"none",disabled:!T.value,customStyle:ee,onInput:le},null,8,["modelValue","disabled"]),g("% ")]),_:1},8,["class"])]),_:1})]),_:1}),T.value&&A.value.installment?(f(),n(t,{key:0,class:"period-summary"},{default:s(()=>[b(u,null,{default:s(()=>[g(h(W.value),1)]),_:1}),b(u,{class:"amount"},{default:s(()=>[g(h("--"!==L.value?"¥"+L.value:"--"),1)]),_:1})]),_:1})):P("",!0)]),_:1}),Q.value.length?(f(),n(t,{key:0,class:"card"},{default:s(()=>[b(t,{class:"card-title"},{default:s(()=>[g("账单明细")]),_:1}),b(t,{class:"bill-list"},{default:s(()=>[(f(!0),y(x,null,C(Q.value,e=>(f(),n(t,{class:"bill-item",key:e.key},{default:s(()=>[b(t,{class:"bill-left"},{default:s(()=>[b(t,{class:"bill-title"},{default:s(()=>[g(h(e.label),1)]),_:2},1024),b(t,{class:"bill-date"},{default:s(()=>[g(h(e.date),1)]),_:2},1024)]),_:2},1024),b(t,{class:"bill-amount"},{default:s(()=>[g("¥"+h(e.amount),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):P("",!0),b(t,{class:"bottom-bar"},{default:s(()=>[b(F,{type:"primary",text:"生成二维码",onClick:ve,customStyle:{width:"100%",height:"44px"}})]),_:1}),b($,{show:V.value,columns:U.value,onConfirm:oe,onCancel:a[8]||(a[8]=e=>V.value=!1)},null,8,["show","columns"]),b($,{show:z.value,columns:H.value,onConfirm:ie,onCancel:a[9]||(a[9]=e=>z.value=!1)},null,8,["show","columns"]),b($,{show:D.value,columns:q.value,onConfirm:re,onCancel:a[10]||(a[10]=e=>D.value=!1)},null,8,["show","columns"]),b($,{show:G.value,columns:E.value,onConfirm:de,onCancel:a[11]||(a[11]=e=>G.value=!1)},null,8,["show","columns"]),b($,{show:X.value,columns:J.value,onConfirm:ce,onCancel:a[12]||(a[12]=e=>X.value=!1)},null,8,["show","columns"])]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-5c03c612"]]);export{M as default};
