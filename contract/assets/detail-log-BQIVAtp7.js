const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialogly-BZG8p86M.js","assets/index-C0RS4PDN.js","assets/index-CeQ2E0rp.js","assets/index-CCn4OCkM.css","assets/add-order-GuAgfX1K.js","assets/add-order-KCj7Ukoi.css","assets/format-Cidb6usw.js","assets/form-dialogly-HVnhWbrQ.css"])))=>i.map(i=>d[i]);
import{a0 as ht,a1 as M,a3 as te,d as at,a5 as ee,T as K,y as m,k as i,B as k,aa as Lt,v as g,a9 as Et,D as ae,an as se,Y as ne,aI as oe,aJ as Dt,aK as tt,r as B,h as E,A as f,w as r,j as O,aL as ie,aM as mt,F as z,aN as le,Q as ot,aO as re,aP as ce,aQ as de,a6 as yt,o as zt,aR as ue,aS as pe,p as C,t as c,L as nt,aT as fe,aU as me,z as X,q as t,aV as he,aH as ye,S as _e,R as ve,at as ge,as as be,au as Ce,i as xe,aW as kt,aX as wt,aY as At,aZ as Ot,a_ as Le,E as dt,m as Z,H as Ft,I as De,a$ as ke,b0 as we,b1 as Ae}from"./index-CeQ2E0rp.js";import{C as et,U as st,s as Oe,_ as Vt,b as J,o as St,B as Fe,d as Nt,A as rt,p as Se,e as Ne}from"./add-order-GuAgfX1K.js";import{o as Te,t as Tt}from"./index-C0RS4PDN.js";import{t as Pe}from"./error-Cq9Fpw4b.js";/* empty css                                                                          */import{_ as lt}from"./contract-order-void.vue_vue_type_script_setup_true_lang-DWis5SLO.js";const Ie=ht({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:M(String),default:"solid"}}),$e=at({name:"ElDivider"}),Ee=at({...$e,props:Ie,setup(o){const n=o,d=ee("divider"),p=K(()=>d.cssVar({"border-style":n.borderStyle}));return(h,e)=>(i(),m("div",{class:Lt([g(d).b(),g(d).m(h.direction)]),style:ae(g(p)),role:"separator"},[h.$slots.default&&h.direction!=="vertical"?(i(),m("div",{key:0,class:Lt([g(d).e("text"),g(d).is(h.contentPosition)])},[Et(h.$slots,"default")],2)):k("v-if",!0)],6))}});var ze=te(Ee,[["__file","divider.vue"]]);const Ve=se(ze),Re="ElUpload";class Me extends Error{constructor(n,d,p,h){super(n),this.name="UploadAjaxError",this.status=d,this.method=p,this.url=h}}function Pt(o,n,d){let p;return d.response?p=`${d.response.error||d.response}`:d.responseText?p=`${d.responseText}`:p=`fail to ${n.method} ${o} ${d.status}`,new Me(p,d.status,n.method,o)}function Be(o){const n=o.responseText||o.response;if(!n)return n;try{return JSON.parse(n)}catch{return n}}const je=o=>{typeof XMLHttpRequest>"u"&&Pe(Re,"XMLHttpRequest is undefined");const n=new XMLHttpRequest,d=o.action;n.upload&&n.upload.addEventListener("progress",e=>{const b=e;b.percent=e.total>0?e.loaded/e.total*100:0,o.onProgress(b)});const p=new FormData;if(o.data)for(const[e,b]of Object.entries(o.data))ne(b)&&b.length?p.append(e,...b):p.append(e,b);p.append(o.filename,o.file,o.file.name),n.addEventListener("error",()=>{o.onError(Pt(d,o,n))}),n.addEventListener("load",()=>{if(n.status<200||n.status>=300)return o.onError(Pt(d,o,n));o.onSuccess(Be(n))}),n.open(o.method,d,!0),o.withCredentials&&"withCredentials"in n&&(n.withCredentials=!0);const h=o.headers||{};if(h instanceof Headers)h.forEach((e,b)=>n.setRequestHeader(b,e));else for(const[e,b]of Object.entries(h))oe(b)||n.setRequestHeader(e,String(b));return n.send(p),n},He=["text","picture","picture-card"];let Ue=1;const We=()=>Date.now()+Ue++,qe=ht({action:{type:String,default:"#"},headers:{type:M(Object)},method:{type:String,default:"post"},data:{type:M([Object,Function,Promise]),default:()=>Dt({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:M(Array),default:()=>Dt([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:He,default:"text"},httpRequest:{type:M(Function),default:je},disabled:Boolean,limit:Number});ht({...qe,beforeUpload:{type:M(Function),default:tt},beforeRemove:{type:M(Function)},onRemove:{type:M(Function),default:tt},onChange:{type:M(Function),default:tt},onPreview:{type:M(Function),default:tt},onSuccess:{type:M(Function),default:tt},onProgress:{type:M(Function),default:tt},onError:{type:M(Function),default:tt},onExceed:{type:M(Function),default:tt},crossorigin:{type:M(String)}});const Ge=at({name:"ContractDownload",inheritAttrs:!1,__name:"contract-download",props:{contract:{type:Object,default:()=>({})},elIcon:{type:Object,default:()=>null}},setup(o){const n=o,d=B(!1),p=()=>{d.value=!0,le(n.contract).finally(()=>{d.value=!1})};return(h,e)=>{const b=E("fs-svg-icon"),_=E("el-link");return Et(h.$slots,"default",{download:d.value},()=>[f(_,{class:"svg-icon",underline:!1,disabled:d.value},{default:r(()=>[d.value?(i(),O(g(mt),{key:0,size:"16px",style:{animation:"loading-rotate 1.5s linear infinite"}},{default:r(()=>[f(g(ie))]),_:1})):(i(),m(z,{key:1},[o.elIcon?(i(),O(g(mt),{key:1,size:"16px",onClick:e[1]||(e[1]=F=>p())},{default:r(()=>[f(g(mt))]),_:1})):(i(),O(b,{key:0,name:"template-download",onClick:e[0]||(e[0]=F=>p())}))],64))]),_:1},8,["disabled"])],!0)}}}),Ze=ot(Ge,[["__scopeId","data-v-0a7d67f3"]]),Fn="/contract/assets/copy-down-M_PSEXe9.png";function Rt(o){return ce()?(de(o),!0):!1}function ut(o){return typeof o=="function"?o():g(o)}const _t=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Je=Object.prototype.toString,Xe=o=>Je.call(o)==="[object Object]",Ke=()=>{};function Qe(o){let n;function d(){return n||(n=o()),n}return d.reset=async()=>{const p=n;n=void 0,p&&await p},d}function Ye(o,n,d={}){const{immediate:p=!0}=d,h=B(!1);let e=null;function b(){e&&(clearTimeout(e),e=null)}function _(){h.value=!1,b()}function F(...L){b(),h.value=!0,e=setTimeout(()=>{h.value=!1,e=null,o(...L)},ut(n))}return p&&(h.value=!0,_t&&F()),Rt(_),{isPending:re(h),start:F,stop:_}}function ta(o){var n;const d=ut(o);return(n=d==null?void 0:d.$el)!=null?n:d}const ea=_t?window:void 0,Mt=_t?window.navigator:void 0;function Bt(...o){let n,d,p,h;if(typeof o[0]=="string"||Array.isArray(o[0])?([d,p,h]=o,n=ea):[n,d,p,h]=o,!n)return Ke;Array.isArray(d)||(d=[d]),Array.isArray(p)||(p=[p]);const e=[],b=()=>{e.forEach(v=>v()),e.length=0},_=(v,I,W,y)=>(v.addEventListener(I,W,y),()=>v.removeEventListener(I,W,y)),F=yt(()=>[ta(n),ut(h)],([v,I])=>{if(b(),!v)return;const W=Xe(I)?{...I}:I;e.push(...d.flatMap(y=>p.map(D=>_(v,y,D,W))))},{immediate:!0,flush:"post"}),L=()=>{F(),b()};return Rt(L),L}function aa(){const o=B(!1),n=ue();return n&&zt(()=>{o.value=!0},n),o}function jt(o){const n=aa();return K(()=>(n.value,!!o()))}function It(o,n={}){const{controls:d=!1,navigator:p=Mt}=n,h=jt(()=>p&&"permissions"in p);let e;const b=typeof o=="string"?{name:o}:o,_=B(),F=()=>{e&&(_.value=e.state)},L=Qe(async()=>{if(h.value){if(!e)try{e=await p.permissions.query(b),Bt(e,"change",F),F()}catch{_.value="prompt"}return e}});return L(),d?{state:_,isSupported:h,query:L}:_}function Sn(o={}){const{navigator:n=Mt,read:d=!1,source:p,copiedDuring:h=1500,legacy:e=!1}=o,b=jt(()=>n&&"clipboard"in n),_=It("clipboard-read"),F=It("clipboard-write"),L=K(()=>b.value||e),v=B(""),I=B(!1),W=Ye(()=>I.value=!1,h);function y(){b.value&&w(_.value)?n.clipboard.readText().then(x=>{v.value=x}):v.value=S()}L.value&&d&&Bt(["copy","cut"],y);async function D(x=ut(p)){L.value&&x!=null&&(b.value&&w(F.value)?await n.clipboard.writeText(x):N(x),v.value=x,I.value=!0,W.start())}function N(x){const $=document.createElement("textarea");$.value=x??"",$.style.position="absolute",$.style.opacity="0",document.body.appendChild($),$.select(),document.execCommand("copy"),$.remove()}function S(){var x,$,j;return(j=($=(x=document==null?void 0:document.getSelection)==null?void 0:x.call(document))==null?void 0:$.toString())!=null?j:""}function w(x){return x==="granted"||x==="prompt"}return{isSupported:L,text:v,copied:I,copy:D}}const sa=at({__name:"file-upload",props:{disabled:{type:Boolean,default:!1},name:{type:String,default:"点击上传"}},emits:["onSuccess"],setup(o,{emit:n}){const d=B(),p=pe(!1),h=n,e=L=>L.type==="application/pdf"?L.size/1024/1024<50?!0:(nt.error("文件大小不能超过50MB!"),!1):(nt.error("只能上传PDF格式的文件!"),!1),b=L=>{d.value.clearFiles();const v=L[0];v.uid=We(),d.value.handleStart(v),console.log(v)},_=L=>{p.value=!0,fe({file:L.file,onUploadProgress:v=>{v.percent=v.progress*100,L.onProgress(v)}}).then(v=>{h("onSuccess",v),L.onSuccess(v)}).catch(v=>{L.onError(v)}).finally(()=>{var v;p.value=!1,(v=d.value)==null||v.clearFiles()})},F=L=>{console.log(L)};return(L,v)=>{const I=E("el-text"),W=E("el-upload");return i(),O(W,{ref_key:"uploadRef",ref:d,class:"upload-file",limit:1,"show-file-list":!1,"http-request":_,"on-exceed":b,"on-success":F,"before-upload":e,accept:".pdf",disabled:o.disabled},{trigger:r(()=>[f(I,{type:"primary",class:"upload-text"},{default:r(()=>[C(c(o.name),1)]),_:1})]),_:1},8,["disabled"])}}}),ct=ot(sa,[["__scopeId","data-v-1da22c50"]]),na={},oa={width:"46px",height:"41px",viewBox:"0 0 46 41",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function ia(o,n){return i(),m("svg",oa,n[0]||(n[0]=[me('<title>用印标识</title><g id="合同系统" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="详情" transform="translate(-862, -1164)"><g id="编组-23" transform="translate(236, 1114)"><g id="编组-24" transform="translate(401, 4)"><g id="用印标识" transform="translate(225.5, 46.875)"><path d="M38.1958027,2.29891335 C37.5761716,1.35366314 36.3373399,1.10781547 35.3889469,1.68169248 L0.953398739,23.2881242 C0.372629112,23.6594438 0.043490441,24.2332671 0,24.8507562 L0,25.178571 C0.043490441,25.5066003 0.125680915,25.8394039 0.290384813,26.0855198 L7.1862033,36.8693436 C7.80551148,37.8145938 9.04439698,38.1038926 9.99284383,37.4866181 L44.4286073,15.8801327 C45.377108,15.2626973 45.667439,14.0282555 45.0479155,13.0827908 L38.1958027,2.2988597 L38.1958027,2.29891335 Z M43.7317376,14.7274435 L9.291399,36.37738 C9.00090654,36.584819 8.58952356,36.4592935 8.38138305,36.1698874 L1.49051645,25.3474404 C1.40827215,25.222183 1.36456641,25.0193574 1.40827215,24.8555305 C1.45176259,24.6915426 1.53389924,24.5277157 1.69844166,24.4454267 L36.1341513,2.83894137 C36.2986399,2.75708156 36.46329,2.71341583 36.6277247,2.75708156 C36.7922672,2.80047906 36.9568634,2.88228523 37.0392692,3.04648765 L43.93498,13.8303114 C44.0994148,14.1535665 44.0172243,14.5248861 43.7317376,14.7274435 Z M9.37353565,13.5747543 L10.5299615,14.4815422 L10.5299615,13.0008237 L11.7687932,12.1761102 L10.3654191,11.7228235 L9.95408997,10.2808355 L9.08783359,11.471987 L7.60232285,11.4285358 L8.46852541,12.619741 L7.97495196,14.0185461 L9.37353565,13.5747543 L9.37353565,13.5747543 Z M36.1729051,25.5499978 L35.0163178,24.6434245 L35.0163178,26.1238748 L33.7774861,26.9535235 L35.1810217,27.4069175 L35.5921893,28.805508 L36.4584996,27.6142492 L37.9442256,27.6577003 L37.0779154,26.4662806 L37.5714888,25.0676901 L36.172959,25.5499442 L36.1729051,25.5499978 Z M14.0433756,7.89815694 L14.6191933,9.25839243 L15.3645054,7.98039226 L16.8500699,7.85486672 L15.8580788,6.74568231 L16.1872713,5.30353337 L14.8224358,5.92096881 L13.5401137,5.1396528 L13.7045484,6.62015677 L12.591613,7.56540698 L14.0433217,7.89815694 L14.0433756,7.89815694 Z M22.5457568,35.3885714 L23.2474707,36.705463 L23.8668327,35.3453348 L25.3138588,35.0994335 L24.2006542,34.1106785 L24.4089023,32.6301209 L23.1265264,33.3729209 L21.8053966,32.7121416 L22.0958352,34.1542906 L21.0648211,35.2247981 L22.5457568,35.3885714 Z M22.7972801,3.82297575 L22.0957814,2.50640599 L21.4762579,3.86631961 L20.0293396,4.15572571 L21.1424365,5.14437342 L20.9341345,6.62514561 L22.2166719,5.88239921 L23.5812383,6.49962007 L23.2520997,5.0576857 L24.2830061,3.98685631 L22.7972801,3.82297575 L22.7972801,3.82297575 Z M31.3822285,31.4386475 L30.8064108,30.0787339 L30.0610987,31.3566804 L28.5754265,31.4822059 L29.5674715,32.5915513 L29.2383866,34.0336466 L30.6031145,33.4594477 L31.8854366,34.2407637 L31.7207327,32.760367 L32.8339373,31.8151168 L31.3822824,31.4386475 L31.3822285,31.4386475 Z" id="形状" fill="#A6C1FF" fill-rule="nonzero"></path><path d="M32.3968705,2.48619813 C30.6983372,1.58581096 28.9172712,0.891476183 27.0538344,0.484272331 C21.8758097,-0.66041584 16.4936393,0.239971328 12.024133,3.01794968 C9.78695082,4.40683231 7.8021709,6.24590853 6.30735148,8.41073717 C4.81765999,10.4941677 3.77901068,12.8266403 3.24516587,15.2786531 C2.83261018,17.1179424 2.6675987,18.9953738 2.78894178,20.8777061 L4.15745212,20.0203086 C3.99249462,13.8513621 7.05478818,7.72103698 12.7714617,4.20573412 C18.4834392,0.64717518 25.3989155,0.522734024 31.0285221,3.30524041 L32.3968705,2.48619813 L32.3968705,2.48619813 Z M12.9316152,36.6922806 C14.586588,37.6309697 16.4111605,38.2869493 18.2748133,38.6942064 C20.8031541,39.2640468 23.3704672,39.3502926 25.9374024,38.9001523 C28.5873562,38.4929484 31.0719206,37.5112696 33.3479132,36.1221206 C35.5853112,34.733238 37.5700912,32.8942683 39.0649106,30.7293331 C41.6321697,27.094277 42.8746408,22.6784272 42.5833203,18.2243287 L41.2148639,19.0767187 C41.3798214,25.4945476 38.108848,31.500325 32.6008003,34.9343895 C26.8888229,38.4882606 19.9295162,38.5696054 14.3000176,35.7917336 L12.9316152,36.6922806 L12.9316152,36.6922806 Z" id="形状" fill="#A6C1FF" fill-rule="nonzero"></path><path d="M28.5396955,28.6003714 C26.9965226,29.5386657 25.204491,30.1132511 23.3735176,30.2330141 L21.2493125,31.5400762 C24.0425898,31.8656036 26.8745373,31.2527835 29.2917025,29.7446431 C31.6648204,28.2748972 33.5008992,26.0295408 34.375,23.4105707 L32.2508492,24.7176861 C31.3766941,26.3119344 30.0827599,27.6236293 28.5396955,28.6003181 L28.5396955,28.6003714 Z M16.8350872,10.5843218 C18.3780972,9.64597426 20.1701831,9.07133556 22.0012652,8.95162582 L24.1254159,7.64456374 C21.293414,7.31919608 18.4610863,7.97019767 16.083026,9.43999683 C13.7099623,10.9099025 11.9179851,13.1553654 11,15.7740692 L13.1241508,14.4670604 C14.0029767,12.8729718 15.2921315,11.5276218 16.8350872,10.5843218 L16.8350872,10.5843218 Z" id="形状" fill="#A6C1FF" fill-rule="nonzero"></path><text id="已用印" transform="translate(22.9019, 19.2949) rotate(-33) translate(-22.9019, -19.2949)" font-family="PingFangSC-Regular, PingFang SC" font-size="11" font-weight="normal" fill="#A6C1FF"><tspan x="6.40192379" y="23.294873">已用印</tspan></text></g></g></g></g></g>',2)]))}const la=ot(na,[["render",ia]]),ra={key:0},ca={key:1,class:"table-wrap"},da={class:"table-cell-content"},ua={key:0},pa={key:1,class:"empty-cell"},fa=at({__name:"renderField",props:{rowData:{type:Object,required:!0}},setup(o){const n=o,d=()=>{try{return(JSON.parse(n.rowData.fieldDefineInfo||"{}").options||[]).map(D=>({label:D.label,value:D.value}))}catch(y){return console.error("获取选项失败:",y),[]}},p=(y,D)=>{if(!y)return"";const N=n.rowData.fieldDefineType;if(N==="radio"||N==="select"){const S=D.find(w=>w.value==y);return S?S.label:y}else if(N==="checkbox")return Array.isArray(y)?y.map(S=>{const w=D.find(x=>x.value==S);return w?w.label:S}).join(","):y.toString().split(",").map(w=>{const x=D.find($=>$.value==w.trim());return x?x.label:w.trim()}).join(",");return y};function h(){const y=JSON.parse(n.rowData.fieldInstanceData||"{}");if(!y)return"";let D=y[n.rowData.fieldInstanceCode];if(!D)return"";const N=n.rowData.fieldDefineType;if(N==="radio"||N==="select"||N==="checkbox"){const S=d();return p(D,S)}return Array.isArray(D)?D.join(","):D}const e=K(()=>{if(n.rowData.fieldDefineType!=="table"&&n.rowData.fieldDefineType!=="target")return[];const D=JSON.parse(n.rowData.fieldInstanceData||"{}")[n.rowData.fieldInstanceCode]||[];return _.value?D.map((N,S)=>({...N,sort:S+1})):D}),b=K(()=>n.rowData.fieldDefineType!=="table"&&n.rowData.fieldDefineType!=="target"?{columns:[]}:JSON.parse(n.rowData.fieldDefineInfo||'{"columns":[]}')),_=K(()=>{var y;return((y=b.value.columns)==null?void 0:y.some(D=>D.sum==="1"))||!1}),F=K(()=>{let y=b.value.columns||[];return _.value&&(y=[{label:"序号",code:"sort",width:60},...y]),y}),L=y=>{const D=[];return y.columns.forEach((N,S)=>{if(S===0&&_.value)D[S]="合计";else{const w=F.value.find(x=>x.code===N.property);if(w&&w.sum==="1"){const x=y.data.reduce(($,j)=>he($,Number(j[N.property])||0),0);D[S]=x}else D[S]=""}}),D},v=({row:y,rowIndex:D})=>{const N=F.value.some(S=>{const w=y[S.code];return w!=null&&w!==""});return{minHeight:"40px",height:"40px"}},I=K(()=>{const S=_.value?40:0;return 40+5*40+S}),W=K(()=>{if(!(e.value.length<=5))return I.value});return(y,D)=>{const N=E("el-table-column"),S=E("el-table");return o.rowData.fieldDefineType!=="table"&&o.rowData.fieldDefineType!=="target"?(i(),m("div",ra,c(h()),1)):(i(),m("div",ca,[f(S,{data:e.value,border:"",size:"small","show-summary":_.value,"summary-method":L,"row-style":v,"max-height":I.value,height:W.value,style:{width:"100%"}},{default:r(()=>[(i(!0),m(z,null,X(F.value,w=>(i(),O(N,{key:w.code,label:w.label,prop:w.code,width:w.width},{default:r(({row:x,$index:$})=>[t("div",da,[w.code==="sort"?(i(),m(z,{key:0},[C(" 第"+c($+1)+"行 ",1)],64)):(i(),m(z,{key:1},[x[w.code]!==null&&x[w.code]!==void 0&&x[w.code]!==""?(i(),m("span",ua,c(x[w.code]),1)):(i(),m("span",pa," "))],64))])]),_:2},1032,["label","prop","width"]))),128))]),_:1},8,["data","show-summary","max-height","height"])]))}}}),$t=ot(fa,[["__scopeId","data-v-f649dadc"]]),ma={class:"contract-details-basic"},ha={class:"basic-info"},ya={class:"basic-info-item"},_a={class:"flex-center"},va={class:"info-text"},ga={class:"flex-center"},ba={class:"info-text"},Ca={class:"flex-center"},xa={class:"info-text"},La={class:"basic-info-item"},Da={class:"flex-center"},ka={class:"info-text"},wa={class:"flex-center"},Aa={class:"info-text"},Oa={class:"flex-center"},Fa={key:0,class:"info-text"},Sa={class:"basic-info-item"},Na={class:"flex-center"},Ta={class:"info-text"},Pa={class:"flex-center"},Ia={key:0,class:"info-text"},$a={class:"flex-center"},Ea={key:0,class:"info-text"},za={class:"basic-info-item"},Va={class:"flex-center"},Ra={class:"info-text"},Ma={class:"flex-center"},Ba={class:"info-text"},ja={class:"basic-info-item"},Ha={class:"flex-center"},Ua={class:"info-text"},Wa={key:0,type:"primary",underline:"never",style:{"font-size":"13px"}},qa={class:"basic-info"},Ga={class:"basic-info-item"},Za={class:"flex-center"},Ja={class:"info-text alone"},Xa={class:"other-info"},Ka={class:"title-name"},Qa={class:"title-name"},Ya={class:"contract-company-out"},ts={class:"contract-company-left"},es={class:"left-title"},as={class:"left-seal"},ss={class:"contract-company-canter"},ns={class:"contract-company-title"},os={class:"flex-center"},is={class:"info-text"},ls={class:"flex-center"},rs={class:"info-text"},cs={class:"flex-center"},ds={class:"info-text"},us={class:"flex-center"},ps={class:"info-text"},fs={style:{display:"flex"}},ms={style:{display:"flex"}},hs={class:"htzwCont"},ys={class:"contract-list-out"},_s={class:"contract-list-show"},vs={class:"contract-center"},gs={class:"contract-list-title"},bs={class:"contract-list-operator"},Cs={class:"htzwCont"},xs={key:0,style:{display:"flex","align-items":"center",width:"100%"}},Ls={class:"contract-list-out"},Ds={class:"contract-list-show"},ks={style:{display:"flex",width:"100%"}},ws={class:"contract-center"},As={class:"contract-list-title"},Os={class:"contract-list-operator",style:{"margin-left":"4px"}},Fs={key:0,class:"contract-top"},Ss={key:1,class:"contract-bottom"},Ns={style:{"font-size":"13px",color:"#1d2129","font-weight":"400"}},Ts={style:{"font-size":"13px",color:"#1d2129","font-weight":"400"}},Ps={style:{"font-size":"13px",color:"#1d2129","font-weight":"400"}},Is={key:1},$s={class:"contract-list-out"},Es={key:0,class:"contract-top"},zs={key:0,class:"contract-list-out"},Vs={style:{"line-height":"22px","min-height":"22px",color:"#4e5969","font-size":"13px","word-break":"break-all"}},Rs={style:{"line-height":"22px",height:"22px","margin-left":"4px"}},Ms={key:1,class:"contract-list-out"},Bs={class:"compliance-program-out"},js={class:"table-column-list"},Hs={style:{"font-size":"13px"}},Us={style:{"min-width":"140px"}},Ws={key:1,style:{"font-size":"13px",color:"#86909c"}},qs={style:{"min-width":"240px"},class:"contract-list-out"},Gs={style:{"line-height":"22px","min-height":"22px",color:"#4e5969","font-size":"13px","word-break":"break-all",width:"100%"}},Zs={style:{"line-height":"22px",height:"22px","margin-left":"4px"}},Js={style:{"line-height":"22px","min-height":"22px",color:"#4e5969","font-size":"13px","word-break":"break-all"}},Xs={style:{"line-height":"22px",height:"22px","margin-left":"4px"}},Ks={style:{"min-width":"180px"},class:"process-list"},Qs={key:0,class:"process-array-list"},Ys={style:{"font-size":"13px",color:"#1d2129"}},tn={class:"contract-list-out"},en={style:{"line-height":"22px","min-height":"22px",color:"#4e5969","font-size":"13px","word-break":"normal"}},an={style:{"line-height":"22px",height:"22px","margin-left":"4px"}},sn={class:"contract-filing"},nn={class:"compliance-program-out"},on={class:"compliance-program-out"},ln={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},rn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},cn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},dn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},un={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},pn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},fn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},mn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},hn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},yn={style:{color:"#1d2129","font-size":"12px","margin-bottom":"5px"}},R="ContractOrder",_n=at({name:"ContractDetails1",__name:"basic",props:{detailData:{type:Object,required:!0},isPreview:{type:Boolean,default:!1}},emits:["onFileSuccess"],setup(o,{emit:n}){const d=ye(),p=B({add:`${R}:add`,importOrder:`${R}:importOrder`,edit:`${R}:edit`,del:`${R}:del`,end:`${R}:end`,void:`${R}:void`,submit:`${R}:submit`,submitChange:`${R}:submitChange`,cancel:`${R}:cancel`,cancelChange:`${R}:cancelChange`,cancelEnd:`${R}:cancelEnd`,withdraw:`${R}:withdraw`,withdrawChange:`${R}:withdrawChange`,withdrawEnd:`${R}:withdrawEnd`,change:`${R}:change`}),h=n,e=o;_e();const b=ve(Ve,{direction:"horizontal"});B([]);const _=B(""),F=B({code:"changeRecordTable",showIndex:!1,data:[],columns:[{label:"版本",prop:"cversion",slot:"cversion"},{label:"变更人",prop:"updateUserName"},{label:"变更时间",prop:"updateTime",formatter:ge,minWidth:120},{label:"审批流程单号",prop:"processInstanceNo",slot:"processInstanceNo",minWidth:160},{label:"关联流程",prop:"processInstanceName",slot:"processInstanceName",minWidth:200},{label:"变更说明",prop:"remark",minWidth:150},{label:"合同金额调整",prop:"changeAmount",minWidth:150,formatter:be},{label:"补充协议",prop:"changeProtocol",slot:"changeProtocol",minWidth:300},{label:"其他附件",prop:"otherAttachment",slot:"otherAttachment",width:300}]}),L=B(0),v=[{label:"合同名称",prop:"name"},{label:"合同编号",prop:"code"},{label:"合同状态",prop:"status",formatter:Ce,type:"contract_status"},{label:"合同创建人",prop:"createUserName"},{label:"合同创建时间",prop:"createTime"}],I={label:"操作",prop:"operate",slot:"operate",width:"160"},W=B({code:"orderContractTable",autoTable:!0,data:e.detailData.contractDetailOrderVo,columns:e.isPreview?v:[...v,I]}),y=[{label:"订单编号/状态",prop:"orderCodeAndStatus",slot:"orderCodeAndStatus"},{label:"订单名称",prop:"orderName",width:160},{label:"总金额",prop:"contractAmount",slot:"contractAmount",minWidth:120},{label:"收入计划",slot:"contractAmountReq",minWidth:260},{label:"支出计划",slot:"contractAmountRes",minWidth:260},{label:"经办人",prop:"createUserName"},{label:"经办人部门",prop:"createUserDept"},{label:"采购公司",prop:"orderCompanyName"}],D=B({code:"frameworkOrderTable",autoTable:!0,data:e.detailData.contractDetailFrameworkOrderVoList,columns:e.isPreview?y:[...y,I]}),N=l=>{const a=[];return l.attachmentList.map(A=>{A.bizType==="CONTRACT_CHANGED_AGREEMENT_FILE"&&(a.push(A),A!=null&&A.contractChangeSealAttachment&&a.push(A.contractChangeSealAttachment))}),a},S=l=>{Ft({body:()=>De(()=>import("./form-dialogly-BZG8p86M.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),bodyData:{initData:l||{}},isReject:!0}).then(()=>{}).catch(()=>{})},w=l=>{ke.push({name:"ContractDetails",params:{code:l.code}})};function x(l,a,A=1){we({attachmentType:A===1?"CONTRACT_CHANGE_SEAL_FILE":"CONTRACT_DRAFT_SEAL_FILE",bizId:a,sealFile:{fileName:l.fileName,fileType:l.fileType,fileUrl:l.fileUrl}}).then(T=>{nt.success("上传成功"),T&&T.contractDetailModifyInfoFileVo&&(F.value.data=Array.isArray(T.contractDetailModifyInfoFileVo)?[...T.contractDetailModifyInfoFileVo]:[],L.value++),A===2&&T&&T.contractOriginalVO&&Object.assign(e.detailData.contractOriginalVO,T.contractOriginalVO),h("onFileSuccess")}).catch(T=>{nt.error("上传失败")}).finally(()=>{console.log("finally")})}const $=()=>{var A,T;if(!e.detailData.contractDetailOtherList)return{columns:[],alone:[]};let l=[],a=[];for(let q=0;q<e.detailData.contractDetailOtherList.length;q++){let H=e.detailData.contractDetailOtherList[q].fieldDefineType;H==="table"||H==="target"||H==="textarea"||H==="image"?a.push((A=e.detailData)==null?void 0:A.contractDetailOtherList[q]):l.push((T=e.detailData)==null?void 0:T.contractDetailOtherList[q])}return{columns:l,alone:a}},j=(l,a,A={})=>{Ft({body:l,bodyData:{initData:{...a,...A}},isReject:!0}).then(T=>{T.success&&h("onFileSuccess")}).catch(()=>{})},vt=async(l,a="create")=>{if(a==="submit"){const A=await Nt(l.id);if(A)try{A&&Tt({submitId:A}),nt.success("提交成功"),h("onFileSuccess")}catch(T){console.log(T)}else nt.error("数据异常，无订单不能提交")}else j(rt,l,{plainType:a})},Ht=l=>{j(rt,{...l},{plainType:"edit"})},Ut=l=>j(lt,l,{type:"terminate"}),Wt=async(l,a)=>{Se(l.id).then(A=>{j(rt,l,{plainType:"change"})}).catch(()=>{}).finally(()=>{a.done()})},qt=l=>{Ne(l.id).then(a=>{a&&j(rt,l,{plainType:"end"})})},Gt=l=>j(lt,l,{type:"cancelChange"}),gt=(l,a)=>{Nt(l.id).then(A=>{Tt({submitId:A}),h("onFileSuccess")}).finally(()=>{a.done()})},Zt=l=>j(lt,l,{type:"withdraw"}),Jt=l=>j(lt,l,{type:"modify"}),Xt=l=>{j(lt,l,{type:"stopWithdraw"})},pt=l=>{if(!l)return"";if(l.toLowerCase().endsWith(".pdf"))return l;const a=l.lastIndexOf(".");return a>0?l.substring(0,a)+".pdf":l+".pdf"},Kt=()=>{var A;const a=[{filePath:(A=e.detailData.contractOriginalVO)==null?void 0:A.contractBodyFilePath,fileName:pt(e.detailData.contractOriginalVO.contractName)}].filter(T=>{let q=T.filePath;return wt(q)||At(q)==Ot.IMAGE});a.length>0&&Ae({list:a,current:0})};return yt(()=>e.detailData,l=>{_.value=l.id||"";const a=l==null?void 0:l.contractDetailModifyInfoFileVo;F.value.data=Array.isArray(a)?[...a]:[],L.value++;const A=l==null?void 0:l.contractDetailOrderVo;W.value.data=Array.isArray(A)?[...A]:[];const T=l==null?void 0:l.contractDetailFrameworkOrderVoList;D.value.data=Array.isArray(T)?[...T]:[]},{deep:!0,immediate:!0}),zt(()=>{$()}),(l,a)=>{var bt,Ct;const A=E("el-tooltip"),T=E("el-icon"),q=E("el-link"),H=E("el-space"),U=E("FsButton"),ft=E("complex-table"),it=E("el-descriptions-item"),Qt=E("el-descriptions"),Yt=E("el-tag"),G=xe("per");return i(),m("div",ma,[t("div",ha,[t("div",ya,[t("div",_a,[a[2]||(a[2]=t("div",{class:"title-name"},"业务类型",-1)),t("div",va,[e.detailData.businessTypeFirstName&&e.detailData.businessTypeSecondName?(i(),m(z,{key:0},[C(c(e.detailData.businessTypeFirstName+"-"+e.detailData.businessTypeSecondName),1)],64)):k("",!0)])]),t("div",ga,[a[3]||(a[3]=t("div",{class:"title-name"},"合同类型",-1)),t("div",ba,c(g(d).valueToLabelSync(e.detailData.type,"contract_type")),1)]),t("div",Ca,[a[4]||(a[4]=t("div",{class:"title-name"},"合同份数",-1)),t("div",xa,c(e.detailData.numberOfCopys||""),1)])]),t("div",La,[t("div",Da,[a[5]||(a[5]=t("div",{class:"title-name"},"经办人",-1)),t("div",ka,c(e.detailData.createUserName||""),1)]),t("div",wa,[a[6]||(a[6]=t("div",{class:"title-name"},"经办人部门",-1)),t("div",Aa,c(e.detailData.createUserDept||""),1)]),t("div",Oa,[a[7]||(a[7]=t("div",{class:"title-name"},"创建时间",-1)),e.detailData.createTime?(i(),m("div",Fa,c(e.detailData.createTime.split(" ")[0]),1)):k("",!0)])]),t("div",Sa,[t("div",Na,[a[8]||(a[8]=t("div",{class:"title-name"},"生效时间",-1)),t("div",Ta,c(e.detailData.approveTime),1)]),t("div",Pa,[a[9]||(a[9]=t("div",{class:"title-name"},"要求签订时间",-1)),e.detailData.signDate?(i(),m("div",Ia,c(e.detailData.signDate.split(" ")[0]),1)):k("",!0)]),t("div",$a,[a[10]||(a[10]=t("div",{class:"title-name"},"有效期",-1)),e.detailData.startDate&&e.detailData.endDate?(i(),m("div",Ea,c(e.detailData.startDate.split(" ")[0])+" 至 "+c(e.detailData.endDate.split(" ")[0]),1)):k("",!0)])]),t("div",za,[t("div",Va,[a[11]||(a[11]=t("div",{class:"title-name"},"事前申请",-1)),t("div",Ra,c(e.detailData.relatedAdvanceApply),1)]),t("div",Ma,[a[12]||(a[12]=t("div",{class:"title-name"},"关联合同",-1)),t("div",Ba,c(e.detailData.relatedContractCode),1)]),t("div",ja,[t("div",Ha,[a[13]||(a[13]=t("div",{class:"title-name"},"关联流程",-1)),t("div",Ua,[(bt=e.detailData)!=null&&bt.contractRelateProcessList&&((Ct=e.detailData)==null?void 0:Ct.contractRelateProcessList.length)>0?(i(),m("span",Wa,[e.detailData.contractRelateProcessList.length===1?(i(),m(z,{key:0},[C(c(e.detailData.contractRelateProcessList[0].processCode),1)],64)):e.detailData.contractRelateProcessList.length>1?(i(),O(A,{key:1,content:e.detailData.draftProcessName,placement:"top"},{content:r(()=>[(i(!0),m(z,null,X(e.detailData.contractRelateProcessList,s=>(i(),m("div",{key:s.processCode,style:{display:"flex",gap:"4px","font-size":"13px"}},[t("div",null,c(s.processCode),1),t("div",null,c(s.processName),1)]))),128))]),default:r(()=>[C(c(e.detailData.contractRelateProcessList[0].processCode)+"... ",1)]),_:1},8,["content"])):k("",!0)])):k("",!0)])])])])]),t("div",qa,[t("div",Ga,[t("div",Za,[a[14]||(a[14]=t("div",{class:"title-name"},"合同描述",-1)),t("div",Ja,c(e.detailData.remark),1)])])]),f(et,{title:"其他信息"},{default:r(()=>[t("div",Xa,[(i(!0),m(z,null,X($().columns,(s,u)=>(i(),m("div",{class:"other-info-item",key:u},[t("div",Ka,c(s.fieldDefineName),1),f($t,{class:"info-text","row-data":s},null,8,["row-data"])]))),128)),(i(!0),m(z,null,X($().alone,(s,u)=>(i(),m("div",{class:"other-info-item alone",key:u},[t("div",Qa,c(s.fieldDefineName),1),f($t,{class:"info-text","row-data":s},null,8,["row-data"])]))),128))])]),_:1}),e.detailData.contractDetailBaseInfoPartyVoList&&e.detailData.contractDetailBaseInfoPartyVoList.length>0?(i(),O(et,{key:0,title:"签约方信息"},{default:r(()=>[t("div",Ya,[(i(!0),m(z,null,X(e.detailData.contractDetailBaseInfoPartyVoList,(s,u)=>(i(),m("div",{class:"contract-company",key:u},[t("div",ts,[t("div",es,c(s.partyTypeName),1),t("div",as,c(s.our=="1"?"我方主体":"他方主体"),1)]),t("div",ss,[t("div",ns,c(s.partyName),1),t("div",os,[a[15]||(a[15]=t("div",{class:"title-name"},"联系人:",-1)),t("div",is,c((s.contacts?s.contacts:"")+(s.contactsPhone?" | ":"")+(s.contactsPhone?s.contactsPhone:"")),1)]),t("div",ls,[a[16]||(a[16]=t("div",{class:"title-name"},"开户银行:",-1)),t("div",rs,c((s.bankName?s.bankName:"")+(s.bankAccountNumber?" | ":"")+(s.bankAccountNumber?s.bankAccountNumber:"")),1)]),t("div",cs,[a[17]||(a[17]=t("div",{class:"title-name"},"统一信用编码:",-1)),t("div",ds,c(s.taxId),1)]),t("div",us,[a[18]||(a[18]=t("div",{class:"title-name"},"地址:",-1)),t("div",ps,c(s.partyAddress),1)])])]))),128))])]),_:1})):k("",!0),t("div",fs,[f(et,{style:{width:"auto"},title:"原始合同"},{default:r(()=>{var s,u,P,Q;return[t("div",ms,[t("div",hs,[t("div",ys,[t("div",_s,[f(kt,{class:"svg-icon",name:"business-contract-item"}),t("div",vs,[t("div",gs,c((u=(s=e.detailData)==null?void 0:s.contractOriginalVO)==null?void 0:u.contractName),1)]),t("div",bs,[f(Ze,{contract:e.detailData},null,8,["contract"]),f(q,{class:"svg-icon",underline:!1},{default:r(()=>{var V,Y;return[g(wt)((V=e.detailData.contractOriginalVO)==null?void 0:V.contractBodyFilePath)||g(At)((Y=e.detailData.contractOriginalVO)==null?void 0:Y.contractBodyFilePath)==g(Ot).IMAGE?(i(),O(T,{key:0,size:"16px",onClick:Kt,style:{"margin-left":"4px"}},{default:r(()=>[f(g(Le))]),_:1})):k("",!0)]}),_:1})])])])]),t("div",Cs,[(Q=(P=e.detailData.contractOriginalVO)==null?void 0:P.contractSealFileVoList)!=null&&Q[0]?(i(),m("div",xs,[a[21]||(a[21]=t("div",null,null,-1)),t("div",Ls,[t("div",Ds,[f(la,{style:{position:"absolute",top:"10px",left:"60%","z-index":"1",opacity:"0.5"}}),t("div",ks,[f(kt,{class:"svg-icon",name:"business-contract-item"}),t("div",ws,[t("div",As,c(e.detailData.contractOriginalVO.contractSealFileVoList[0].fileName),1)]),t("div",Os,[f(g(st),{"file-url":e.detailData.contractOriginalVO.contractSealFileVoList[0].filePath,"file-name":pt(e.detailData.contractOriginalVO.contractSealFileVoList[0].fileName),"file-list":e.detailData.contractOriginalVO.contractSealFileVoList.map(V=>({...V,fileName:pt(V.fileName)}))},null,8,["file-url","file-name","file-list"])])])]),e.detailData.contractOriginalVO.contractSealFileVoList[0].fileName&&e.detailData.status=="IN_APPROVAL"&&!o.isPreview&&e.detailData.cversion===1?(i(),m("div",Fs,[f(ct,{name:"重传",onOnSuccess:a[0]||(a[0]=V=>x(V,e.detailData.id,2)),style:{"font-size":"13px"}})])):k("",!0),e.detailData.contractOriginalVO.contractSealFileVoList[0].fileName?(i(),m("div",Ss,[t("div",null,[a[19]||(a[19]=t("span",{style:{"margin-right":"5px",color:"#86909c","font-weight":"400","font-size":"13px"}},"用印方式",-1)),t("span",Ns,c(e.detailData.contractOriginalVO.contractSealFileVoList[0].signType||"线下用印"),1),t("span",Ts,c(g(Oe).get(e.detailData.contractOriginalVO.contractSealFileVoList[0].signType)),1)]),t("div",null,[a[20]||(a[20]=t("span",{style:{"margin-right":"5px",color:"#86909c","font-weight":"400","font-size":"13px"}},"用印时间",-1)),t("span",Ps,c(e.detailData.contractOriginalVO.contractSealFileVoList[0].createTime),1)])])):k("",!0)])])):(i(),m("div",Is,[t("div",$s,[e.detailData.status=="IN_APPROVAL"&&!o.isPreview&&e.detailData.cversion===1?(i(),m("div",Es,[f(ct,{name:"上传用印结果",onOnSuccess:a[1]||(a[1]=V=>x(V,e.detailData.id,2)),style:{"font-size":"13px"}})])):k("",!0),a[22]||(a[22]=t("div",{class:"contract-list-show"},[t("div",{class:"contract-center zwyywj"},[t("div",{class:"contract-list-title"},"暂无用印文件")])],-1))])]))])])]}),_:1}),f(et,{title:"其他附件"},{default:r(()=>[e.detailData.contractDetailContractFileVoList&&e.detailData.contractDetailContractFileVoList.length>0?(i(),m("div",zs,[f(H,{direction:"vertical",size:5,alignment:"flex-start",class:"other-attachlist-out"},{default:r(()=>[(i(!0),m(z,null,X(e.detailData.contractDetailContractFileVoList,s=>(i(),m("div",{style:{display:"flex",cursor:"pointer"},key:s.id},[a[23]||(a[23]=t("img",{style:{width:"16px",height:"22px","line-height":"22px"},src:Vt,alt:""},null,-1)),t("div",Vs,c(s.fileName),1),t("div",Rs,[f(g(st),{"file-url":s.filePath,"file-name":s.fileName,"file-list":e.detailData.contractDetailContractFileVoList},null,8,["file-url","file-name","file-list"])])]))),128))]),_:1})])):(i(),m("div",Ms,a[24]||(a[24]=[t("div",{class:"contract-list-show"},[t("div",{class:"contract-center zwyywj"},[t("div",{class:"contract-list-title"},"暂无其他附件")])],-1)])))]),_:1})]),f(et,{title:"变更记录"},{default:r(()=>[t("div",Bs,[(i(),O(ft,dt({key:L.value,ref:"complianceContractRef"},F.value),{cversion:r(({row:s})=>[t("div",js,[t("span",Hs,"v"+c(s.cversion),1)])]),processInstanceNo:r(({row:s})=>[t("div",Us,[s.processInstanceNo?(i(),O(q,{key:0,type:"primary",onClick:u=>g(Te)({flowId:s.processInstanceNo||""}),style:{"font-size":"13px"}},{default:r(()=>[C(c(s.processInstanceNo||""),1)]),_:2},1032,["onClick"])):(i(),m("span",Ws,c(s.processInstanceNo||""),1))])]),changeProtocol:r(({row:s})=>[t("div",qs,[s.attachmentList?(i(),O(H,{key:0,direction:"vertical",alignment:"flex-start",spacer:g(b),style:{"min-height":"62px",height:"auto",width:"100%"}},{default:r(()=>[(i(!0),m(z,null,X(s.attachmentList.filter(u=>u.bizType==="CONTRACT_CHANGED_AGREEMENT_FILE"),u=>(i(),O(H,{key:u.cversion,direction:"vertical",alignment:"flex-start"},{default:r(()=>[f(H,{size:12},{default:r(()=>[f(H,{size:"small"},{default:r(()=>[t("div",Gs,c(u.fileName),1),t("div",Zs,[f(g(st),{"file-url":u.filePath,"file-name":u.fileName,"file-list":N(s)},null,8,["file-url","file-name","file-list"])])]),_:2},1024),!(u!=null&&u.contractChangeSealAttachment)&&!o.isPreview&&e.detailData.status==="CHANGE_IN_APPROVAL"&&s.cversion===e.detailData.cversion?(i(),O(ct,{key:0,name:"上传用印结果",onOnSuccess:P=>x(P,u.id,1),style:{"font-size":"13px"}},null,8,["onOnSuccess"])):k("",!0)]),_:2},1024),u!=null&&u.contractChangeSealAttachment?(i(),O(H,{key:0,size:12},{default:r(()=>[f(H,{size:"small"},{default:r(()=>[t("div",Js,c(u.contractChangeSealAttachment.fileName),1),a[25]||(a[25]=t("div",{style:{"background-color":"#4e5969",padding:"1px 4px","border-radius":"2px",color:"#fff","font-size":"13px","white-space":"nowrap"}},"用印结果",-1))]),_:2,__:[25]},1024),t("div",Xs,[f(g(st),{"file-url":u.filePath,"file-name":u.fileName,"file-list":N(s)},null,8,["file-url","file-name","file-list"])]),!o.isPreview&&e.detailData.status==="CHANGE_IN_APPROVAL"&&s.cversion===e.detailData.cversion?(i(),O(ct,{key:0,name:"重传",onOnSuccess:P=>x(P,u.id,1),style:{"font-size":"13px"}},null,8,["onOnSuccess"])):k("",!0)]),_:2},1024)):k("",!0)]),_:2},1024))),128))]),_:2},1032,["spacer"])):k("",!0)])]),processInstanceName:r(({row:s})=>[t("div",Ks,[s.relateProcessList&&s.relateProcessList.length>0?(i(),m("div",Qs,[(i(!0),m(z,null,X(s.relateProcessList,(u,P)=>(i(),m("div",{key:P},[t("span",Ys,c(u.processCode),1)]))),128))])):k("",!0)])]),otherAttachment:r(({row:s})=>[t("div",tn,[f(H,{direction:"vertical",alignment:"flex-start",style:{"min-height":"62px",height:"auto"}},{default:r(()=>[(i(!0),m(z,null,X(s.attachmentList,u=>(i(),m(z,{key:u.cversion},[u.bizType!=="CONTRACT_CHANGED_AGREEMENT_FILE"?(i(),O(H,{key:0,size:12},{default:r(()=>[t("div",en,c(u.fileName),1),t("div",an,[f(g(st),{"file-url":u.filePath,"file-name":u.fileName,"file-list":s.attachmentList.filter(P=>P.bizType!=="CONTRACT_CHANGED_AGREEMENT_FILE")},null,8,["file-url","file-name","file-list"])])]),_:2},1024)):k("",!0)],64))),128))]),_:2},1024)])]),operate:r(({row:s})=>[f(U,{"show-loading":!1,link:"",type:"primary",onClick:u=>S(s),style:{"font-size":"13px"}},{default:r(()=>a[26]||(a[26]=[C("详情")])),_:2,__:[26]},1032,["onClick"])]),_:1},16))])]),_:1}),f(et,{title:"合同归档"},{default:r(()=>[t("div",sn,[f(Qt,{class:"margin-top","label-width":"200px",column:3,border:""},{default:r(()=>[f(it,{label:"档案编号"},{default:r(()=>[C(c(e.detailData.archiveNo),1)]),_:1}),f(it,{label:"档案室"},{default:r(()=>[C(c(e.detailData.archiveHouse),1)]),_:1}),f(it,{label:"档案室位置"},{default:r(()=>[C(c(e.detailData.archiveLocation),1)]),_:1}),f(it,{label:"归档人"},{default:r(()=>[C(c(e.detailData.archive0peratorName),1)]),_:1}),f(it,{label:"归档时间"},{default:r(()=>[C(c(e.detailData.archiveTime?e.detailData.archiveTime.split(" ")[0]:""),1)]),_:1})]),_:1})])]),_:1}),e.detailData.contractDetailOrderVo&&e.detailData.contractDetailOrderVo.length>0?(i(),O(et,{key:1,title:"订单合同"},{default:r(()=>[t("div",nn,[f(ft,dt({ref:"organizingContractRef"},W.value,{style:{"font-size":"13px"},"max-height":420}),{operate:r(({row:s})=>[f(U,{"show-loading":!1,link:"",type:"primary",onClick:u=>w(s),style:{"font-size":"13px"}},{default:r(()=>a[27]||(a[27]=[C("查看详情")])),_:2,__:[27]},1032,["onClick"])]),_:1},16)])]),_:1})):k("",!0),e.detailData.contractDetailFrameworkOrderVoList&&e.detailData.contractDetailFrameworkOrderVoList.length>0?(i(),O(et,{key:2,title:"框架订单"},{default:r(()=>[t("div",on,[f(ft,dt({ref:"complianceContractRef"},D.value,{"max-height":420}),{orderCodeAndStatus:r(({row:s})=>{var u;return[t("div",null,[f(U,{"show-loading":!1,link:"",type:"primary",onClick:P=>vt({...s,contractId:_.value},"info"),style:{"font-size":"13px"}},{default:r(()=>[C(c(s.orderCode),1)]),_:2},1032,["onClick"]),t("div",null,[f(Yt,{plain:"",type:(u=g(St).get(s.status))==null?void 0:u.type,style:{"font-size":"13px"}},{default:r(()=>{var P;return[C(c((P=g(St).get(s.status))==null?void 0:P.name),1)]}),_:2},1032,["type"])])])]}),contractAmount:r(({row:s,$index:u})=>[t("div",ln,[t("span",null,c(l.$format.thousandsFormatCurrency(s.amount)),1)])]),contractAmountReq:r(({row:s,$index:u})=>{var P,Q,V,Y;return[t("div",rn,[a[28]||(a[28]=C(" 计划总金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((P=s.inAmountList)==null?void 0:P.amount)),1)]),t("div",cn,[a[29]||(a[29]=C(" 已履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((Q=s.inAmountList)==null?void 0:Q.fulfillmentAmount)),1)]),t("div",dn,[a[30]||(a[30]=C(" 在途履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((V=s.inAmountList)==null?void 0:V.inFulfillmentAmount)),1)]),t("div",un,[a[31]||(a[31]=C(" 待履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((Y=s.inAmountList)==null?void 0:Y.waitFulfillmentAmount)),1)])]}),contractAmountRes:r(({row:s,$index:u})=>{var P,Q,V,Y,xt;return[t("div",pn,[a[32]||(a[32]=C(" 计划总金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((P=s.outAmountList)==null?void 0:P.amount)),1)]),t("div",fn,[a[33]||(a[33]=C(" 已履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((Q=s.outAmountList)==null?void 0:Q.fulfillmentAmount)),1)]),t("div",mn,[a[34]||(a[34]=C(" 在途履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((V=s.outAmountList)==null?void 0:V.inFulfillmentAmount)),1)]),t("div",hn,[a[35]||(a[35]=C(" 预留保证金： ")),t("span",null,c(l.$format.thousandsFormatCurrency((Y=s.outAmountList)==null?void 0:Y.preWarrantyAmount)),1)]),t("div",yn,[a[36]||(a[36]=C(" 待履约金额： ")),t("span",null,c(l.$format.thousandsFormatCurrency((xt=s.outAmountList)==null?void 0:xt.waitFulfillmentAmount)),1)])]}),operate:r(({row:s})=>[f(U,{link:"","show-loading":!1,onClick:u=>vt({...s,contractId:_.value},"info")},{default:r(()=>a[37]||(a[37]=[C("详情")])),_:2,__:[37]},1032,["onClick"]),g(J)(10,s.status)?Z((i(),O(U,{key:0,link:"",type:"danger","show-loading":!1,onClick:u=>Gt({...s,contractId:_.value})},{default:r(()=>a[38]||(a[38]=[C("取消变更")])),_:2,__:[38]},1032,["onClick"])),[[G,p.value.cancelChange]]):k("",!0),g(J)(3,s.status)?Z((i(),O(U,{key:1,link:"",type:"primary","show-loading":!1,onClick:u=>Ht({...s,contractId:_.value})},{default:r(()=>a[39]||(a[39]=[C("编辑")])),_:2,__:[39]},1032,["onClick"])),[[G,p.value.edit]]):k("",!0),g(J)(6,s.status)?Z((i(),O(U,{key:2,link:"",type:"danger","show-loading":!1,onClick:u=>Ut({...s,contractId:_.value})},{default:r(()=>a[40]||(a[40]=[C("作废")])),_:2,__:[40]},1032,["onClick"])),[[G,p.value.void]]):k("",!0),g(J)(15,s.status)?Z((i(),O(U,{key:3,link:"",type:"primary",onClick:u=>Wt({...s,contractId:_.value},u)},{default:r(()=>a[41]||(a[41]=[C("变更")])),_:2,__:[41]},1032,["onClick"])),[[G,p.value.change]]):k("",!0),g(J)(7,s.status)?Z((i(),O(U,{key:4,link:"",type:"primary",onClick:u=>gt({...s,contractId:_.value},u)},{default:r(()=>a[42]||(a[42]=[C("提交审批")])),_:2,__:[42]},1032,["onClick"])),[[G,p.value.submit]]):k("",!0),g(J)(8,s.status)?Z((i(),O(U,{key:5,link:"",type:"primary",onClick:u=>gt({...s,contractId:_.value},u)},{default:r(()=>a[43]||(a[43]=[C("提交审批")])),_:2,__:[43]},1032,["onClick"])),[[G,p.value.submitChange]]):k("",!0),g(J)(5,s.status)?Z((i(),O(U,{key:6,link:"",type:"danger","show-loading":!1,onClick:u=>qt({...s,contractId:_.value})},{default:r(()=>a[44]||(a[44]=[C("终止")])),_:2,__:[44]},1032,["onClick"])),[[G,p.value.end]]):k("",!0),g(J)(12,s.status)?Z((i(),O(U,{key:7,link:"",type:"danger","show-loading":!1,onClick:u=>Zt({...s,contractId:_.value})},{default:r(()=>a[45]||(a[45]=[C("撤回")])),_:2,__:[45]},1032,["onClick"])),[[G,p.value.withdraw]]):k("",!0),g(J)(13,s.status)?Z((i(),O(U,{key:8,link:"",type:"danger","show-loading":!1,onClick:u=>Jt({...s,contractId:_.value})},{default:r(()=>a[46]||(a[46]=[C("撤回")])),_:2,__:[46]},1032,["onClick"])),[[G,p.value.withdrawChange]]):k("",!0),g(J)(14,s.status)?Z((i(),O(U,{key:9,link:"","show-loading":!1,onClick:u=>Xt({...s,contractId:_.value})},{default:r(()=>a[47]||(a[47]=[C("撤回")])),_:2,__:[47]},1032,["onClick"])),[[G,p.value.withdrawEnd]]):k("",!0)]),_:1},16)])]),_:1})):k("",!0),f(Fe,{detailData:e.detailData},null,8,["detailData"])])}}}),Nn=ot(_n,[["__scopeId","data-v-4d5b3b99"]]),vn={class:"detail-log"},gn={style:{"line-height":"22px","min-height":"22px",color:"#4e5969","font-size":"13px","word-break":"break-all"}},bn={style:{"line-height":"22px",height:"22px","margin-left":"4px"}},Cn="ContractLog",xn=at({__name:"detail-log",props:{detailData:{type:Object,required:!0}},setup(o){const n=o,d=B({code:`${Cn}FrameTable`,autoTable:!0,data:n.detailData.operateRecordList,columns:[{label:"操作时间",prop:"operateTime"},{label:"操作",prop:"operateTypeName"},{label:"操作人",prop:"operator"},{label:"详情",prop:"operateDetail"},{label:"附件",prop:"attachmentList",slot:"attachmentList"},{label:"审批流",prop:"processCode"}]});return yt(()=>n.detailData,p=>{d.value.data=p.operateRecordList},{immediate:!0}),(p,h)=>{const e=E("el-space"),b=E("complex-table");return i(),m("div",vn,[f(b,dt({ref:"logContractRef"},d.value),{attachmentList:r(({row:_})=>[f(e,{direction:"vertical",alignment:"flex-start",style:{"min-height":"62px",height:"auto"}},{default:r(()=>[(i(!0),m(z,null,X(_.attachmentList,(F,L)=>(i(),m("div",{key:L,style:{display:"flex",cursor:"pointer"}},[h[0]||(h[0]=t("img",{style:{width:"16px",height:"22px","line-height":"22px"},src:Vt,alt:""},null,-1)),t("div",gn,c(F.fileName),1),t("div",bn,[f(g(st),{"file-url":F.filePath,"file-name":F.fileName,"file-list":_.attachmentList},null,8,["file-url","file-name","file-list"])])]))),128))]),_:2},1024)]),_:1},16)])}}}),Tn=ot(xn,[["__scopeId","data-v-d350c76e"]]);export{Nn as C,Ve as E,Fn as _,Tn as d,Sn as u};
