const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialog-XuV9j0Kx.js","assets/index-Cyvvb__l.js","assets/index-CCn4OCkM.css","assets/second-dialog-DnvDwVhA.js","assets/index-DS-7AsAv.js","assets/index-BdKTu7rQ.js","assets/error-Cq9Fpw4b.js","assets/second-dialog-CzuXV1Tl.css","assets/form-dialog-BR872AEb.js","assets/form-dialog-gaKzj4s4.css"])))=>i.map(i=>d[i]);
import{d as z,r as v,au as K,e as G,a as Q,c4 as le,a4 as re,T as ne,o as de,h as O,i as te,y as F,k as i,A as k,E as oe,w as l,m as D,B as q,j as h,p as E,q as e,v as J,c5 as ce,F as ie,z as pe,aa as ue,t as c,c6 as ve,c7 as W,c8 as me,c9 as _e,H as M,I as U,ca as X,L as Z,Q as be,bj as ee,s as V,cb as fe,cc as he,cd as se}from"./index-Cyvvb__l.js";import{a as ye,E as ae}from"./index-DS-7AsAv.js";import"./index-BdKTu7rQ.js";import"./error-Cq9Fpw4b.js";const Ne={class:"business-type h-full"},Pe={class:"container"},ge={class:"container-top"},Ce=["onClick"],C="BusinessType",ke=z({name:C,__name:"index",setup(H){const r=v({add1:`${C}:add1`,add2:`${C}:add2`,edit1:`${C}:edit1`,enabled:`${C}:enabled`,disable:`${C}:disable`}),S=v(),p=v({}),m=v(-1),T=v({code:C,requestFunction:le,pageSize:20,searchProps:{code:`${C}Search`,resetHandle:()=>{p.value.pcode=null,m.value=-1},options:[G({label:"业务类型",prop:"name"}),G({label:"类型编码",prop:"code"}),Q({label:"状态",prop:"status",code:"enum_Y_N"}),Q({label:"是否配置流程",prop:"configured",code:"num_1_0"})]},tableProps:{code:`${C}Table`,showIndex:!0,center:!0,showSelect:!1,className:"business-type-table",autoTable:!0,columns:[{label:"业务类型",prop:"name",width:300,showOverflowTooltip:!0},{label:"类型编码",prop:"code",width:200,showOverflowTooltip:!0},{label:"状态",prop:"status",width:100,type:"enum_Y_N",formatter:K},{label:"类型描述",prop:"remark",width:300,showOverflowTooltip:!0},{label:"可用部门",prop:"orgName",width:200,showOverflowTooltip:!0},{label:"是否配置流程",prop:"configured",width:120,type:"num_1_0",formatter:K},{label:"操作",prop:"operate",fixed:"right",width:100,slot:"operate"}]}}),d=re({firstData:[],firstSearch:"",allData:[]}),P=async()=>{try{const t=await _e({name:d.firstSearch});d.firstData=t,d.firstSearch||(d.allData=t)}catch{}},I=()=>{d.firstSearch="",d.firstData=d.allData},B=v([]);ne(()=>({test:B.value.length==0})),de(()=>{P()});const R=()=>{console.log(2222222,"ssss"),p.value.pcode=null,m.value=-1,S.value.refresh()},$=()=>{S.value.search()},x=t=>{t&&t.pcode!=0?L(t,"edit"):M({body:()=>U(()=>import("./form-dialog-XuV9j0Kx.js"),__vite__mapDeps([0,1,2])),bodyData:{initData:t||{}},isReject:!0}).then(()=>{p.value.pcode=null,m.value=-1,t?(R(),P()):($(),P())})},o=t=>{ae.confirm("确定启用该条记录吗？","提示",{type:"warning"}).then(()=>{X("Y",[t.id]).then(()=>{Z.success("启用成功"),$()})})},s=t=>{ae.confirm("确定禁用该条记录吗？","提示",{type:"warning"}).then(()=>{X("N",[t.id]).then(()=>{Z.success("禁用成功"),$()})})},u=(t,a)=>{p.value.pcode===t.code?(p.value.pcode=null,m.value=-1):(m.value=a,p.value.pcode=t.code),S.value.search()},L=(t,a)=>{console.log(t,"addSecound");let n={};a=="add"?n={pcode:t.code,pname:t.name}:n={...t},M({body:()=>U(()=>import("./second-dialog-DnvDwVhA.js"),__vite__mapDeps([3,1,2,4,5,6,7])),bodyData:{initData:n},isReject:!0}).then(()=>{$(),P()})};return(t,a)=>{const n=O("FsButton"),_=O("el-button"),y=O("el-tooltip"),b=O("el-icon"),N=O("complex-page"),j=te("per");return i(),F("div",Ne,[k(N,oe({ref_key:"pageRef",ref:S,searchData:p.value,"onUpdate:searchData":a[2]||(a[2]=f=>p.value=f),"select-list":B.value,"onUpdate:selectList":a[3]||(a[3]=f=>B.value=f)},T.value,{onResetHandle:R}),{action:l(({queryData:f})=>[D((i(),h(n,{"show-loading":!1,type:"primary",onClick:a[0]||(a[0]=g=>x())},{default:l(()=>a[4]||(a[4]=[E("新增一级类型")])),_:1,__:[4]})),[[j,r.value.add1]])]),tableColumnBefore:l(({queryData:f})=>[e("div",Pe,[e("div",ge,[k(J(ye),{placeholder:"请输入内容",modelValue:d.firstSearch,"onUpdate:modelValue":a[1]||(a[1]=g=>d.firstSearch=g),clearable:"",onKeyup:ce(P,["enter"]),onClear:I},null,8,["modelValue"]),k(_,{icon:"el-icon-search",onClick:P})]),(i(!0),F(ie,null,pe(d.firstData,(g,w)=>(i(),F("div",{class:"container-item",key:w,onClick:Y=>u(g,w)},[k(y,{content:g.name,effect:"dark",placement:"top-end"},{default:l(()=>[e("span",{class:ue(["container-name",m.value==w?"isActive":""])},c(g.name),3)]),_:2},1032,["content"]),D((i(),h(b,{class:"icon-plus",onClick:W(Y=>L(g,"add"),["stop"])},{default:l(()=>[k(J(ve),{style:{"font-size":"16px"}})]),_:2},1032,["onClick"])),[[j,r.value.add2]]),D((i(),h(b,{class:"icon-plus",onClick:W(Y=>x(g),["stop"])},{default:l(()=>[k(J(me),{style:{"font-size":"16px"}})]),_:2},1032,["onClick"])),[[j,r.value.edit1]])],8,Ce))),128))])]),operate:l(({row:f,$index:g})=>[D((i(),h(n,{"show-loading":!1,link:"",type:"primary",onClick:w=>x(f)},{default:l(()=>a[5]||(a[5]=[E("编辑")])),_:2,__:[5]},1032,["onClick"])),[[j,r.value.edit1]]),f.status=="N"?D((i(),h(n,{key:0,"show-loading":!1,link:"",type:"primary",onClick:w=>o(f)},{default:l(()=>a[6]||(a[6]=[E("启用")])),_:2,__:[6]},1032,["onClick"])),[[j,r.value.enabled]]):q("",!0),f.status=="Y"?D((i(),h(n,{key:1,"show-loading":!1,link:"",type:"primary",onClick:w=>s(f)},{default:l(()=>a[7]||(a[7]=[E("禁用")])),_:2,__:[7]},1032,["onClick"])),[[j,r.value.disable]]):q("",!0)]),_:1},16,["searchData","select-list"])])}}}),Oe=be(ke,[["__scopeId","data-v-fb9cb615"]]),Te={class:"desc-list width-c6"},De={class:"desc-item"},Se={class:"desc-value"},$e={class:"desc-item"},xe={class:"desc-value"},je={class:"desc-item"},we={class:"desc-value"},Ee={class:"desc-item"},Be={class:"desc-value"},Re={class:"desc-item"},Ie={class:"desc-value"},Le={class:"desc-list width-c6"},Ve={class:"desc-item"},Ae={class:"desc-value"},Fe={class:"desc-item"},qe={class:"desc-value"},Je={class:"desc-item"},Me={class:"desc-value"},Ue={class:"desc-item"},ze={class:"desc-value"},He={class:"desc-item"},Ye={class:"desc-value"},Ke={class:"desc-list width-c6"},Ge={class:"desc-item"},Qe={class:"desc-value"},We={class:"desc-item"},Xe={class:"desc-value"},Ze={class:"desc-item"},es={class:"desc-value"},ss={class:"desc-item"},as={class:"desc-value"},ts={class:"desc-item"},os={class:"desc-value"},A="BusinessWorkflows",ls=z({name:A,__name:"index",setup(H){const r=v({add3:"BusinessType:add3",edit2:"BusinessType:edit2"}),S=o=>he({name:o,filter:"N"}).then(s=>s.map(u=>({label:u.name,value:u.code}))),p=o=>se({configProcessesType:"APPROVAL_CHANGE",processName:o}),m=o=>se({configProcessesType:"CONTRACT_END",processName:o});r.value.action=ee([r.value.add3]),r.value.operate=ee([r.value.edit2]);const T=v(),d=v({}),P=v({code:A,requestFunction:fe,afterRequest(o,s){o.forEach(u=>{u.startProcessNameObj=JSON.parse(u.startProcessName||"{}"),u.availableProcessNameObj=JSON.parse(u.availableProcessName||"{}"),u.endProcessNameObj=JSON.parse(u.endProcessName||"{}")})},pageSize:20,searchProps:{code:`${A}Search`,options:[V({label:"业务类型",prop:"businessTypeCode",multiple:!0,filterable:!0,remote:!0,searchMethod:S}),V({label:"合同起草审批流程",prop:"startProcessId",multiple:!0,filterable:!0,remote:!0,searchMethod:p}),V({label:"审批变更流程",prop:"availableProcessId",multiple:!0,filterable:!0,remote:!0,searchMethod:p}),V({label:"终止流程",prop:"endProcessId",multiple:!0,filterable:!0,remote:!0,searchMethod:m})]},tableProps:{code:`${A}Table`,showIndex:!0,showSelect:!0,autoTable:!0,columns:[{label:"业务类型",prop:"businessTypeName"},{label:"合同起草审批流程",prop:"startProcessName",type:"startProcessName",slot:"startProcessName"},{label:"审批变更流程",prop:"availableProcessName",type:"availableProcessName",slot:"availableProcessName"},{label:"终止流程",prop:"endProcessName",type:"endProcessName",slot:"endProcessName"},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime",width:160},{label:"更新人",prop:"updateUserName"},{label:"更新时间",prop:"updateTime",width:160}]}});r.value.operate&&P.value.tableProps.columns.push({label:"操作",prop:"operate",fixed:"right",width:60,slot:"operate"});const I=v([]),B=()=>{T.value.refresh()},R=()=>{console.log(T.value,"cccccccpageRef.value"),T.value.search()},$=o=>{d.value=o,R()},x=o=>{let s={};o&&(console.log(),s={...o,processesformData:{draft:JSON.parse(o.startProcessId),draftName:JSON.parse(o.startProcessName),modify:JSON.parse(o.availableProcessId),modifyName:JSON.parse(o.availableProcessName),terminate:JSON.parse(o.endProcessId),terminateName:JSON.parse(o.endProcessName)}}),console.log(s,"rowData"),M({body:()=>U(()=>import("./form-dialog-BR872AEb.js"),__vite__mapDeps([8,1,2,9])),bodyData:{initData:s||{}},isReject:!0}).then(()=>{o?B():R()})};return(o,s)=>{const u=O("FsButton"),L=O("complex-page"),t=te("per");return i(),h(L,oe({ref_key:"pageRef",ref:T,searchData:d.value,"onUpdate:searchData":s[1]||(s[1]=a=>d.value=a),"select-list":I.value,"onUpdate:selectList":s[2]||(s[2]=a=>I.value=a)},P.value,{onSearch:$}),{action:l(({queryData:a})=>[D((i(),h(u,{"show-loading":!1,type:"primary",onClick:s[0]||(s[0]=n=>x())},{default:l(()=>s[3]||(s[3]=[E("新增流程配置")])),_:1,__:[3]})),[[t,r.value.add3]])]),operate:l(({row:a,$index:n})=>[D((i(),h(u,{"show-loading":!1,link:"",type:"primary",onClick:_=>x(a)},{default:l(()=>s[4]||(s[4]=[E("编辑")])),_:2,__:[4]},1032,["onClick"])),[[t,r.value.edit2]])]),startProcessName:l(({row:a})=>{var n,_,y,b,N;return[e("div",Te,[e("div",De,[s[5]||(s[5]=e("div",{class:"desc-label"},"一次性合同：",-1)),e("div",Se,c(((n=a.startProcessNameObj)==null?void 0:n.oneTimeContract)||"-"),1)]),e("div",$e,[s[6]||(s[6]=e("div",{class:"desc-label"},"框架合同：",-1)),e("div",xe,c((_=a.startProcessNameObj)==null?void 0:_.frameworkContract),1)]),e("div",je,[s[7]||(s[7]=e("div",{class:"desc-label"},"协议：",-1)),e("div",we,c((y=a.startProcessNameObj)==null?void 0:y.pact),1)]),e("div",Ee,[s[8]||(s[8]=e("div",{class:"desc-label"},"订单合同：",-1)),e("div",Be,c((b=a.startProcessNameObj)==null?void 0:b.orderContract),1)]),e("div",Re,[s[9]||(s[9]=e("div",{class:"desc-label"},"框架订单审批：",-1)),e("div",Ie,c((N=a.startProcessNameObj)==null?void 0:N.frameworkOrder),1)])])]}),availableProcessName:l(({row:a})=>{var n,_,y,b,N;return[e("div",Le,[e("div",Ve,[s[10]||(s[10]=e("div",{class:"desc-label"},"一次性合同：",-1)),e("div",Ae,c((n=a.availableProcessNameObj)==null?void 0:n.oneTimeContract),1)]),e("div",Fe,[s[11]||(s[11]=e("div",{class:"desc-label"},"框架合同：",-1)),e("div",qe,c((_=a.availableProcessNameObj)==null?void 0:_.frameworkContract),1)]),e("div",Je,[s[12]||(s[12]=e("div",{class:"desc-label"},"协议：",-1)),e("div",Me,c((y=a.availableProcessNameObj)==null?void 0:y.pact),1)]),e("div",Ue,[s[13]||(s[13]=e("div",{class:"desc-label"},"订单合同：",-1)),e("div",ze,c((b=a.availableProcessNameObj)==null?void 0:b.orderContract),1)]),e("div",He,[s[14]||(s[14]=e("div",{class:"desc-label"},"框架订单审批：",-1)),e("div",Ye,c((N=a.availableProcessNameObj)==null?void 0:N.frameworkOrder),1)])])]}),endProcessName:l(({row:a})=>{var n,_,y,b,N;return[e("div",Ke,[e("div",Ge,[s[15]||(s[15]=e("div",{class:"desc-label"},"一次性合同：",-1)),e("div",Qe,c((n=a.endProcessNameObj)==null?void 0:n.oneTimeContract),1)]),e("div",We,[s[16]||(s[16]=e("div",{class:"desc-label"},"框架合同：",-1)),e("div",Xe,c((_=a.endProcessNameObj)==null?void 0:_.frameworkContract),1)]),e("div",Ze,[s[17]||(s[17]=e("div",{class:"desc-label"},"协议：",-1)),e("div",es,c((y=a.endProcessNameObj)==null?void 0:y.pact),1)]),e("div",ss,[s[18]||(s[18]=e("div",{class:"desc-label"},"订单合同：",-1)),e("div",as,c((b=a.endProcessNameObj)==null?void 0:b.orderContract),1)]),e("div",ts,[s[19]||(s[19]=e("div",{class:"desc-label"},"框架订单审批：",-1)),e("div",os,c((N=a.endProcessNameObj)==null?void 0:N.frameworkOrder),1)])])]}),_:1},16,["searchData","select-list"])}}}),rs={class:"main-page"},ns={class:"h-full"},us=z({__name:"tab",setup(H){const r=v("businessType");return(S,p)=>{const m=O("el-tab-pane"),T=O("el-tabs");return i(),F("div",rs,[k(T,{class:"fixed-height el-tabs_modify-skew bg-white",modelValue:r.value,"onUpdate:modelValue":p[0]||(p[0]=d=>r.value=d)},{default:l(()=>[k(m,{label:"业务类型",name:"businessType"},{default:l(()=>[e("div",ns,[r.value=="businessType"?(i(),h(Oe,{key:0})):q("",!0)])]),_:1}),k(m,{label:"业务类型配置流程",name:"businessTypeCategory"},{default:l(()=>[r.value=="businessTypeCategory"?(i(),h(ls,{key:0})):q("",!0)]),_:1})]),_:1},8,["modelValue"])])}}});export{us as default};
