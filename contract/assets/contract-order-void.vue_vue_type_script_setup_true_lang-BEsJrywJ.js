import{d as I,ap as x,T as g,r as M,aq as N,ar as S,h as s,j as W,k as q,w as e,A as a,v as d,p as m,t as u,ax as F,L}from"./index-D9FXDxt4.js";import{l as O,m as U,n as j,r as z,t as A}from"./add-order-DgQW8wJl.js";const G=I({__name:"contract-order-void",props:x({initData:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:x(["success"],["update:modelValue"]),setup(l,{emit:D}){const o=l,i={terminate:{name:"订单作废",api:A,label:"作废原因：",placeholder:"请输入作废原因",confirmButtonText:"作废"},withdraw:{name:"订单审批撤回",api:z,label:"撤回原因：",placeholder:"请输入撤回原因"},modify:{name:"变更审批撤回",api:j,label:"撤回原因：",placeholder:"请输入撤回原因"},cancelChange:{name:"变更取消",api:U,label:"取消原因：",placeholder:"请输入取消原因",confirmButtonText:"取消变更"},stopWithdraw:{name:"订单终止审批撤回",api:O,label:"撤回原因：",placeholder:"请输入撤回原因",confirmButtonText:"撤回"}};let c=o.initData.type;const _=g(()=>i[c].name);g(()=>!o.initData.id);const y=M(),V=D,p=N(l,"modelValue"),{formData:f,requestSave:C}=S(o,{typeLabel:_.value,convert(n){return{id:o.initData.id,reason:n.reason,...n}}}),B={reason:[{required:!0,message:"请输入原因",trigger:"blur"}]},v=async n=>{try{await y.value.validate();const r=i[c].api;C(r,t=>c=="cancelChange"?{orderId:o.initData.id,cancelChangeOrderReason:t.reason}:c=="terminate"?{orderId:o.initData.id,invalidReason:t.reason}:{orderId:o.initData.id,retractReason:t.reason}).then(t=>{L.success("操作成功"),V("success",t),p.value=!1,n.value=!1}).catch(()=>{n.value=!1})}catch{n.value=!1}};return(n,r)=>{const t=s("el-form-item"),h=s("el-col"),w=s("el-row"),R=s("el-input"),T=s("el-form"),k=s("FsButton");return q(),W(d(F),{title:_.value,modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=b=>p.value=b),width:"700px",onSubmit:v},{confirm:e(()=>[a(k,{type:"danger",size:"small","show-loading":!1,onClick:v},{default:e(()=>[m(u(i[l.initData.type].confirmButtonText||"撤回"),1)]),_:1})]),default:e(()=>[a(T,{model:d(f),ref_key:"contractVoidRef",ref:y,style:{padding:"15px"},class:"radius-box","label-width":"auto","label-position":"right",rules:B},{default:e(()=>[a(w,null,{default:e(()=>[a(h,{span:24},{default:e(()=>[a(t,{label:"订单名称：",style:{"margin-bottom":"6px"}},{default:e(()=>[m(u(l.initData.orderName),1)]),_:1})]),_:1}),a(h,{span:24},{default:e(()=>[a(t,{label:"订单编号：",style:{"margin-bottom":"6px"}},{default:e(()=>[m(u(l.initData.orderCode),1)]),_:1})]),_:1})]),_:1}),a(w,null,{default:e(()=>[a(h,{span:24},{default:e(()=>[a(t,{label:"起草人：",style:{"margin-bottom":"6px"}},{default:e(()=>[m(u(l.initData.createUserName),1)]),_:1})]),_:1})]),_:1}),a(t,{label:i[l.initData.type].label,"label-position":"top",prop:"reason"},{default:e(()=>[a(R,{modelValue:d(f).reason,"onUpdate:modelValue":r[0]||(r[0]=b=>d(f).reason=b),type:"textarea",autosize:{minRows:4,maxRows:6},maxlength:500,"show-word-limit":"",placeholder:i[l.initData.type].placeholder},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});export{G as _};
