const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialoglyxg-CuPSOf3v.js","assets/index-BbO6UiJA.js","assets/index-CCn4OCkM.css","assets/add-order-lO-lz0Nk.js","assets/index-D7d65BZj.js","assets/add-order-KCj7Ukoi.css","assets/format-DzVZ7DVm.js","assets/form-dialoglyxg-DglUbiDr.css","assets/form-dialogly-CrSp0jnV.js","assets/form-dialogly-CM0uqCT5.css","assets/form-dialog-CAzazHRv.js","assets/form-dialoglyqx-BqPMb3C_.js","assets/form-dialoglyqx-Bracel3L.css"])))=>i.map(i=>d[i]);
import{d as Y,u as w,r as f,e as P,b as ee,s as M,a as E,T as te,h as R,i as ae,j as b,k as v,w as n,q as a,y as k,B as S,D as I,t as l,m as $,p as o,A as r,E as se,P as le,H as m,I as h,bZ as ne,C as z,O,Q as oe}from"./index-BbO6UiJA.js";import{u as ie,v as ce,w as re,x as V,y as de,A as ue}from"./add-order-lO-lz0Nk.js";import"./index-D7d65BZj.js";const pe={class:"class-tablename"},_e={class:"gs-name"},fe={class:"gs-name2"},me={class:"bl-gsname",style:{"text-align":"center","margin-bottom":"5px"}},ye={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},Ee={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},ve={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},Ie={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},he={style:{color:"#ff1616","font-size":"13px","line-height":"20px",display:"inline-block","margin-right":"5px"}},Ce={key:0,class:"desc-list width-c5"},Pe={class:"desc-item",style:{"margin-bottom":"5px"}},Re={class:"desc-value"},Se={class:"desc-item",style:{"margin-bottom":"5px"}},Ae={class:"desc-value"},Ne={class:"desc-list width-c3"},be={class:"desc-item"},Oe={class:"desc-value"},Te={class:"desc-item"},xe={class:"desc-value"},ge={class:"czxx"},De={class:"statusDom"},d="performanceList",Fe=Y({name:d,__name:"index",setup(Le){const W=w(),T=(t,s)=>{const i=le[t];if(!i)return console.error(`未找到名为 ${t} 的字典`),"";const c=i.find(C=>C.value==s);return c?c.label:""},x=f({performance:`${d}:performance`,change:`${d}:change`,del:`${d}:del`,withdraw:`${d}:withdraw`}),A=f(),g=f({}),B={CREATED:"#FF802A",INVALID:"#4E5969",IN_APPROVAL:"#34C759",CHANGE_IN_APPROVAL:"#34C759",CANCELLED:"#4E5969",CHANGED_WAITE_APPROVAL:"#FF802A",IN_FULFILLMENT:"#34C759",IN_STOP:"#34C759",ENDED:"#4E5969",FINISHED:"#4E5969"},j={INVALID:"#4e5969",WAITE_APPROVAL:"#ff802a",IN_APPROVAL:"#34c759",IN_FULFILLMENT:"#34c759",CHANGED_WAITE_APPROVAL:"#ff802a",CHANGED_APPROVAL:"#34c759",STOPPING:"#34C759",STOPPED:"#4E5969",TASK_EFFECT:"#4E5969"},D=f({code:d,requestFunction:ie,pageSize:20,searchProps:{code:`${d}Search`,options:[P({label:"合同名称 ",prop:"contractName"}),P({label:"履约节点名称",prop:"name"}),ee({label:"要求履约时间",prop:"",sf:"beginFulfillDate",ef:"endFulfillDate"}),P({label:"履约单号 ",prop:"code"}),P({label:"合同编号",prop:"contractCode"}),M({label:"付款方",prop:"partyCodeList",multiple:!0,searchMethod:ce}),E({label:"履约状态",prop:"fulfillStatus",code:"fulfill_status_query",collapseTags:!0}),M({label:"收款方",prop:"ourPartyCodeList",multiple:!0,searchMethod:re}),E({label:"合同类型",prop:"type",code:"contract_type",multiple:!1,collapseTags:!0}),E({label:"收支类型",prop:"financeType",code:"fulfill_finance_type",multiple:!1,collapseTags:!0}),E({label:"合同状态",prop:"contractStatusList",code:"performance_contract_status",multiple:!0,collapseTags:!0}),E({label:"订单状态",prop:"orderStatusList",code:"performance_contract_order_status",multiple:!0,collapseTags:!0})]},tableProps:{code:`${d}Table`,showIndex:!1,showSelect:!0,autoTable:!1,columns:[{label:"节点名称｜时间｜节点进展",prop:"name",slot:"name",minWidth:260},{label:"履约金额",prop:"contractAmount",slot:"amount",minWidth:160},{label:"合同信息",prop:"wwww",slot:"htxx",minWidth:200},{label:"订单信息",minWidth:180,prop:"createUserDepartmentName",slot:"ddxx"},{label:"收付款公司",prop:"processName",slot:"qyfxx",minWidth:180}]}});D.value.tableProps.columns.push({label:"当前状态 | 操作",prop:"operate",fixed:"right",width:200,slot:"operate"});const N=f([]);te(()=>N.value.length==0);const u=()=>{A.value.refresh()},p=()=>{A.value.search()},H=async t=>{let s=await V({id:t.id});m({body:()=>h(()=>import("./form-dialoglyxg-CuPSOf3v.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),bodyData:{initData:s||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},U=async t=>{let s=await V({id:t.id});console.log(s),m({body:()=>h(()=>import("./form-dialogly-CrSp0jnV.js"),__vite__mapDeps([8,1,2,3,4,5,6,9])),bodyData:{initData:s||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},q=t=>{t.typex="PROMISE_FINISH",m({body:()=>h(()=>import("./form-dialog-CAzazHRv.js"),__vite__mapDeps([10,1,2,3,4,5])),bodyData:{initData:t||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},G=t=>{t.typex="IN_PROMISE",m({body:()=>h(()=>import("./form-dialog-CAzazHRv.js"),__vite__mapDeps([10,1,2,3,4,5])),bodyData:{initData:t||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},K=async t=>{m({body:()=>h(()=>import("./form-dialoglyqx-BqPMb3C_.js"),__vite__mapDeps([11,1,2,3,4,5,12])),bodyData:{initData:t},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},Q=t=>{W.push({name:"ContractDetails",params:{code:t.contractCode}})};f(!1);const X=(t,s,i={})=>{m({body:t,bodyData:{initData:{...s,...i}},isReject:!0}).then(c=>{c.success&&(s?u():p())}).catch(()=>{})},Z=t=>{de({id:t.contractOrderId}).then(s=>{X(ue,s,{plainType:"view"})})},F=(t,s)=>t.contractOrderCode?t.orderStatus!==ne.IN_FULFILLMENT?!1:s=="date"?["WAIT_PROMISE","IN_PROMISE","PART_PROMISE"].includes(t.fulfillStatus):["WAIT_PROMISE"].includes(t.fulfillStatus):s!=="date"?!1:t.type=="ONE_OFF_CONTRACT"?t.contractStatus===z.IN_FULFILLMENT?["WAIT_PROMISE","IN_PROMISE","PART_PROMISE"].includes(t.fulfillStatus):t.contractStatus===z.IN_FULFILLMENT:[O.FRAMEWORK_CONTRACT,O.AGREEMENT,O.ORDER_CONTRACT].includes(t.type)?["WAIT_PROMISE","IN_PROMISE","PART_PROMISE"].includes(t.fulfillStatus):!1;return(t,s)=>{const i=R("el-link"),c=R("el-tag"),C=R("FsButton"),J=R("complex-page"),L=ae("per");return v(),b(J,se({ref_key:"pageRef",ref:A,searchData:g.value,"onUpdate:searchData":s[0]||(s[0]=e=>g.value=e),"select-list":N.value,"onUpdate:selectList":s[1]||(s[1]=e=>N.value=e)},D.value),{name:n(({row:e,$index:y})=>[a("div",pe,[a("div",_e,[r(i,{underline:"never",style:{"font-size":"13px","margin-bottom":"5px"},type:"primary",onClick:_=>U(e)},{default:n(()=>[o(l(e.name),1)]),_:2},1032,["onClick"]),s[2]||(s[2]=a("br",null,null,-1)),a("div",null,"履约单号："+l(e.code),1),a("div",null,"要求履约时间："+l(e.fulfillDate?e.fulfillDate.split(" ")[0]:""),1)]),a("div",fe,[a("div",null,[a("div",me,[a("span",null,l(e.currentNode),1),a("span",null,"/"+l(e.total),1)]),a("div",null,[r(c,{effect:"light",type:e.financeType=="INCOME"?"danger":e.financeType=="EXPENDITURE"?"warning":"success",size:"small",style:{"margin-right":"5px"}},{default:n(()=>[o(l(e.financeTypeName),1)]),_:2},1032,["type"])])])])])]),amount:n(({row:e,$index:y})=>[a("div",ye,[s[3]||(s[3]=o(" 总金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amount)),1)]),a("div",Ee,[r(i,{underline:"never",type:"primary",onClick:_=>q(e)},{default:n(()=>[s[4]||(s[4]=o(" 已付金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amountFinish)),1)]),_:2,__:[4]},1032,["onClick"])]),a("div",ve,[r(i,{underline:"never",type:"primary",onClick:_=>G(e)},{default:n(()=>[s[5]||(s[5]=o(" 在途金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amountApply)),1)]),_:2,__:[5]},1032,["onClick"])])]),htxx:n(({row:e,$index:y})=>[a("div",null,[r(i,{underline:"never",style:{"font-size":"13px","margin-bottom":"5px"},type:"primary",onClick:_=>Q(e)},{default:n(()=>[o(l(e.contractName),1)]),_:2},1032,["onClick"])]),a("div",Ie,l(e.contractCode),1),a("div",null,[a("span",he,"¥"+l(e.contractAmount),1),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:{"font-size":"13px"}},{default:n(()=>[o(l(e.typeName),1)]),_:2},1024),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:I({"font-size":"13px","margin-left":"5px",color:B[e.contractStatus]})},{default:n(()=>[o(l(T("contract_status",e.contractStatus)),1)]),_:2},1032,["style"])])]),ddxx:n(({row:e,$index:y})=>[e.type=="FRAMEWORK_CONTRACT"&&e.contractOrderCode&&e.contractOrderAmount?(v(),k("div",Ce,[a("div",Pe,[a("div",Re,[r(i,{underline:"never",type:"primary",onClick:_=>Z(e)},{default:n(()=>[o(l(`${e.contractOrderName}  [${e.contractOrderCode}]`),1)]),_:2},1032,["onClick"])])]),a("div",Se,[s[6]||(s[6]=a("div",{class:"desc-label"},"订单总金额：",-1)),a("div",Ae,l(t.$format.thousandsFormatCurrency(e.contractOrderAmount)),1)]),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:I({"font-size":"13px",color:j[e.orderStatus]})},{default:n(()=>[o(l(T("order_status",e.orderStatus)),1)]),_:2},1032,["style"])])):S("",!0)]),qyfxx:n(({row:e,$index:y})=>[a("div",Ne,[a("div",be,[s[7]||(s[7]=a("div",{class:"desc-label"},"收款方：",-1)),a("div",Oe,l(e.receivePartyName),1)]),a("div",Te,[s[8]||(s[8]=a("div",{class:"desc-label"},"付款方：",-1)),a("div",xe,l(e.payPartyName),1)])])]),operate:n(({row:e,$index:y})=>[a("div",ge,[a("div",De,[a("i",{class:"dian",style:I({backgroundColor:e.fulfillStatus=="IN_PROMISE"||e.fulfillStatus=="PROMISE_FINISH"?"#34c759":e.fulfillStatus=="PART_PROMISE"?"#FF802A":e.fulfillStatus=="PROMISE_TERMINATE"?"#FF1616":""})},null,4),a("span",{class:"mc",style:I({color:e.fulfillStatus=="IN_PROMISE"||e.fulfillStatus=="PROMISE_FINISH"?"#34c759":e.fulfillStatus=="PART_PROMISE"?"#FF802A":e.fulfillStatus=="PROMISE_TERMINATE"?"#FF1616":""})},l(e.fulfillStatusName),5),e.days||e.days!=0?(v(),k("span",{key:0,class:"cq",style:I({color:e.days>0?"#1D2129 ":"#FF1616"})},l(e.days>0?`剩余${Math.abs(e.days)}天`:`超期：${Math.abs(e.days)}天`),5)):S("",!0)]),a("div",null,[F(e,"date")?$((v(),b(C,{key:0,"show-loading":!1,link:"",type:"primary",onClick:_=>H(e)},{default:n(()=>s[9]||(s[9]=[o("时间变更")])),_:2,__:[9]},1032,["onClick"])),[[L,x.value.change]]):S("",!0),F(e,"cancel")?$((v(),b(C,{key:1,"show-loading":!1,link:"",type:"primary",onClick:_=>K(e)},{default:n(()=>s[10]||(s[10]=[o("取消")])),_:2,__:[10]},1032,["onClick"])),[[L,x.value.del]]):S("",!0)])])]),_:1},16,["searchData","select-list"])}}}),ze=oe(Fe,[["__scopeId","data-v-26240c09"]]);export{ze as default};
