import{u as E,bM as P,bN as O,r as S,a4 as j,bO as z,d as D,a8 as M,bP as Q,R as p,w as Y,m as Z,A as q,bQ as F,bR as G,bS as A,bT as H,ag as T,Z as I,bU as C,bV as V,bW as B,bD as K,bX as U,Q as W,bY as X}from"./index-CeQ2E0rp.js";function oe(){const{replace:e,currentRoute:t,push:s,back:a}=E(),n=P(),l=O(),c=n.setSelectedTag,u=()=>{const r=t.value;r.name&&(c(r),n.addView(r))},x=()=>{const o=n.getVisitedViews.slice(-1)[0];if(o)s(o);else{if(t.value.path===l.getAddRouters[0].path||t.value.path===l.getAddRouters[0].redirect){u();return}s(l.getAddRouters[0].path)}},i=r=>r.path===t.value.path,b=r=>{var o;(o=r==null?void 0:r.meta)!=null&&o.affix||(n.delView(r||t.value),i(r)&&x())};return{closeCurrent:()=>{n.getVisitedViews.length==1?b(n.getSelectedTag):(a(),n.delView(t.value))}}}function J(e,t){let s;const a=S(!1),n=j({...e,originalPosition:"",originalOverflow:"",visible:!1});function l(o){n.text=o}function c(){const o=n.parent,v=r.ns;if(!o.vLoadingAddClassList){let d=o.getAttribute("loading-number");d=Number.parseInt(d)-1,d?o.setAttribute("loading-number",d.toString()):(A(o,v.bm("parent","relative")),o.removeAttribute("loading-number")),A(o,v.bm("parent","hidden"))}u(),g.unmount()}function u(){var o,v;(v=(o=r.$el)==null?void 0:o.parentNode)==null||v.removeChild(r.$el)}function x(){var o;e.beforeClose&&!e.beforeClose()||(a.value=!0,clearTimeout(s),s=setTimeout(i,400),n.visible=!1,(o=e.closed)==null||o.call(e))}function i(){if(!a.value)return;const o=n.parent;a.value=!1,o.vLoadingAddClassList=void 0,c()}const b=D({name:"ElLoading",setup(o,{expose:v}){const{ns:d,zIndex:R}=Q("loading");return v({ns:d,zIndex:R}),()=>{const w=n.spinner||n.svg,$=p("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...w?{innerHTML:w}:{}},[p("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),N=n.text?p("p",{class:d.b("text")},[n.text]):void 0;return p(G,{name:d.b("fade"),onAfterLeave:i},{default:Y(()=>[Z(q("div",{style:{backgroundColor:n.background||""},class:[d.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[p("div",{class:d.b("spinner")},[$,N])]),[[F,n.visible]])])})}}}),g=z(b);Object.assign(g._context,t??{});const r=g.mount(document.createElement("div"));return{...M(n),setText:l,removeElLoadingChild:u,close:x,handleAfterLeave:i,vm:r,get $el(){return r.$el}}}let h;const m=function(e={}){if(!H)return;const t=ee(e);if(t.fullscreen&&h)return h;const s=J({...t,closed:()=>{var n;(n=t.closed)==null||n.call(t),t.fullscreen&&(h=void 0)}},m._context);te(t,t.parent,s),L(t,t.parent,s),t.parent.vLoadingAddClassList=()=>L(t,t.parent,s);let a=t.parent.getAttribute("loading-number");return a?a=`${Number.parseInt(a)+1}`:a="1",t.parent.setAttribute("loading-number",a),t.parent.appendChild(s.$el),T(()=>s.visible.value=t.visible),t.fullscreen&&(h=s),s},ee=e=>{var t,s,a,n;let l;return I(e.target)?l=(t=document.querySelector(e.target))!=null?t:document.body:l=e.target||document.body,{parent:l===document.body||e.body?document.body:l,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:l===document.body&&((s=e.fullscreen)!=null?s:!0),lock:(a=e.lock)!=null?a:!1,customClass:e.customClass||"",visible:(n=e.visible)!=null?n:!0,beforeClose:e.beforeClose,closed:e.closed,target:l}},te=async(e,t,s)=>{const{nextZIndex:a}=s.vm.zIndex||s.vm._.exposed.zIndex,n={};if(e.fullscreen)s.originalPosition.value=C(document.body,"position"),s.originalOverflow.value=C(document.body,"overflow"),n.zIndex=a();else if(e.parent===document.body){s.originalPosition.value=C(document.body,"position"),await T();for(const l of["top","left"]){const c=l==="top"?"scrollTop":"scrollLeft";n[l]=`${e.target.getBoundingClientRect()[l]+document.body[c]+document.documentElement[c]-Number.parseInt(C(document.body,`margin-${l}`),10)}px`}for(const l of["height","width"])n[l]=`${e.target.getBoundingClientRect()[l]}px`}else s.originalPosition.value=C(t,"position");for(const[l,c]of Object.entries(n))s.$el.style[l]=c},L=(e,t,s)=>{const a=s.vm.ns||s.vm._.exposed.ns;["absolute","fixed","sticky"].includes(s.originalPosition.value)?A(t,a.bm("parent","relative")):V(t,a.bm("parent","relative")),e.fullscreen&&e.lock?V(t,a.bm("parent","hidden")):A(t,a.bm("parent","hidden"))};m._context=null;const _=Symbol("ElLoading"),f=e=>`element-loading-${U(e)}`,k=(e,t)=>{var s,a,n,l;const c=t.instance,u=o=>B(t.value)?t.value[o]:void 0,x=o=>{const v=I(o)&&(c==null?void 0:c[o])||o;return S(v)},i=o=>x(u(o)||e.getAttribute(f(o))),b=(s=u("fullscreen"))!=null?s:t.modifiers.fullscreen,g={text:i("text"),svg:i("svg"),svgViewBox:i("svgViewBox"),spinner:i("spinner"),background:i("background"),customClass:i("customClass"),fullscreen:b,target:(a=u("target"))!=null?a:b?void 0:e,body:(n=u("body"))!=null?n:t.modifiers.body,lock:(l=u("lock"))!=null?l:t.modifiers.lock},r=m(g);r._context=y._context,e[_]={options:g,instance:r}},se=(e,t)=>{for(const s of Object.keys(e))K(e[s])&&(e[s].value=t[s])},y={mounted(e,t){t.value&&k(e,t)},updated(e,t){const s=e[_];if(!t.value){s==null||s.instance.close(),e[_]=null;return}s?se(s.options,B(t.value)?t.value:{text:e.getAttribute(f("text")),svg:e.getAttribute(f("svg")),svgViewBox:e.getAttribute(f("svgViewBox")),spinner:e.getAttribute(f("spinner")),background:e.getAttribute(f("background")),customClass:e.getAttribute(f("customClass"))}):k(e,t)},unmounted(e){var t;(t=e[_])==null||t.instance.close(),e[_]=null}};y._context=null;const le={install(e){m._context=e._context,y._context=e._context,e.directive("loading",y),e.config.globalProperties.$loading=m},directive:y,service:m},ae=W(X,[["__scopeId","data-v-db8e47f1"]]);export{ae as C,le as E,oe as u};
