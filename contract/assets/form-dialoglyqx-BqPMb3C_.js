import{d as V,T as k,h as n,j as v,k as f,w as r,y as B,z as L,E as R,F as E,ap as D,aq as I,r as p,o as O,ag as T,i as U,m as A,A as e,q as $,v as z,as as G,L as H,Q as J}from"./index-BbO6UiJA.js";import{G as P,H as Q}from"./add-order-lO-lz0Nk.js";import"./index-D7d65BZj.js";const K=V({__name:"target-order",props:{detail:{type:String,default:""}},setup(i){const _=i,c=k(()=>{let d=[],u=[];if(_.detail){const t=JSON.parse(_.detail);d=t.columns,u=t.data}return{columns:d,data:u}});return(d,u)=>{const t=n("el-table-column"),g=n("el-table");return f(),v(g,{data:c.value.data,border:"","max-height":"400px"},{default:r(()=>[(f(!0),B(E,null,L(c.value.columns,(m,s)=>(f(),v(t,R({key:m.prop},{ref_for:!0},m,{"min-width":140}),null,16))),128))]),_:1},8,["data"])}}}),W={class:"w-full",style:{"line-height":"24px"}},X="htlysjxg",Y=V({name:X,__name:"form-dialoglyqx",props:D({initData:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:D(["success"],["update:modelValue"]),setup(i,{emit:_}){const c=i,d=k(()=>"订单履约取消"),u=_,t=I(i,"modelValue"),g={ids:[{required:!0,message:"请选择履约单号"}],reason:[{required:!0,message:"请输入取消原因"}]},m=p(),s=p({ids:[],reason:""}),b=p({performanceList:[]}),x=p(),C=a=>{s.value.ids=a.map(l=>l.id)},S=a=>{m.value.validate(l=>{l?Q(s.value).then(o=>{H.success("修改成功"),u("success",o),a.value=!1,t.value=!1}).catch(()=>{a.value=!1}):a.value=!1})},y=p(!0);return O(()=>{P({code:c.initData.code,contractId:c.initData.contractId}).then(a=>{b.value=a,T(()=>{x.value.toggleAllSelection()})}).finally(()=>{y.value=!1})}),(a,l)=>{const o=n("el-table-column"),q=n("el-table"),w=n("el-form-item"),M=n("el-input"),F=n("el-form"),N=n("complex-dialog"),j=U("loading");return f(),v(N,{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=h=>t.value=h),width:"1000px",title:d.value,onSubmit:S},{default:r(()=>[A((f(),v(F,{ref_key:"formRef",ref:m,class:"radius-box",model:s.value,"label-position":"top",rules:g,style:{padding:"12px"}},{default:r(()=>[e(w,{label:`框架订单[${i.initData.contractOrderCode}]`,prop:"ids"},{default:r(()=>[$("div",W,[e(K,{detail:b.value.orderDetail},null,8,["detail"]),e(q,{ref_key:"tableRef",ref:x,onSelectionChange:C,border:"",data:b.value.performanceList,style:{"margin-top":"12px",width:"100%"}},{default:r(()=>[e(o,{type:"selection",width:"55",align:"center"}),e(o,{prop:"name",label:"履约节点名称","min-width":"180"}),e(o,{prop:"amount",label:"履约金额","min-width":"110",formatter:z(G)},null,8,["formatter"]),e(o,{prop:"fulfillStatusName",width:"100",label:"履约状态"}),e(o,{prop:"createTime",label:"发起时间",width:"180"}),e(o,{prop:"createUserName",label:"发起人","min-width":"80"})]),_:1},8,["data"])])]),_:1},8,["label"]),e(w,{label:"取消原因",prop:"reason"},{default:r(()=>[e(M,{modelValue:s.value.reason,"onUpdate:modelValue":l[0]||(l[0]=h=>s.value.reason=h),rows:4,maxlength:500,type:"textarea",placeholder:"请输入取消原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[j,y.value]])]),_:1},8,["modelValue","title"])}}}),ae=J(Y,[["__scopeId","data-v-7af32f13"]]);export{ae as default};
