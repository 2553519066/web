import{d as D,ar as S,r as i,h as t,j as x,k as A,w as a,A as r,v as o,E as F,W as L,L as U}from"./index-D-MzvSrp.js";import{g as B,a as j}from"./index-rhfranM8.js";import"./index-CGFKNQp1.js";import"./index-BEPrue_N.js";import"./error-Cq9Fpw4b.js";const O=D({__name:"FormDialog",props:{modelValue:{type:Boolean,default:()=>!1},initData:{type:Object,default:()=>({})},groupList:{type:Array,default:()=>[]}},emits:["update:modelValue","success"],setup(n,{emit:d}){const c=n,p=d,f=e=>{p("update:modelValue",e)},{isAdd:g,title:_,loading:V,formData:l,formRef:v,requestSave:h}=S(c,{typeLabel:"权限",convert(e){return e.id&&(e.groupName=e.name),console.log(e),e}}),y=i({groupName:[{required:!0,message:"请输入名称"}]}),w=i({checkStrictly:!0,label:"name",value:"id"}),I=()=>{h(g.value?B:j,e=>(L(e.parentId)&&(e.parentId=e.parentId[e.parentId.length-1],e.groupSort=1),e.groupSort=e.weight?e.weight:1,delete e.weight,delete e.name,e)).then(e=>{U.success("保存成功"),p("success",e)})};return(e,s)=>{const b=t("el-cascader"),m=t("el-form-item"),N=t("el-input"),k=t("el-form"),C=t("FsCommonDialog");return A(),x(C,F({"model-value":n.modelValue,title:o(_),loading:o(V),width:"500px"},e.$attrs,{"onUpdate:modelValue":f,onSubmit:I}),{default:a(()=>[r(k,{ref_key:"formRef",ref:v,model:o(l),rules:y.value,"label-width":"110px"},{default:a(()=>[r(m,{label:"上级",prop:"parentId"},{default:a(()=>[r(b,{modelValue:o(l).parentId,"onUpdate:modelValue":s[0]||(s[0]=u=>o(l).parentId=u),options:n.groupList,props:w.value,style:{width:"100%"}},null,8,["modelValue","options","props"])]),_:1}),r(m,{label:"名称",prop:"groupName"},{default:a(()=>[r(N,{modelValue:o(l).groupName,"onUpdate:modelValue":s[1]||(s[1]=u=>o(l).groupName=u),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},16,["model-value","title","loading"])}}});export{O as default};
