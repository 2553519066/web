import{bh as g,bi as c,d as P,r as f,o as U,h as n,y as q,k as _,p as u,A as t,q as B,w as o,j as M,B as $,L,Q as R}from"./index-B0EZE7ii.js";function A(m){return g.post(`${c.contract}/contractCodeConfig/saveOrUpdate`,m)}function O(){return g.get(`${c.contract}/contractCodeConfig/detail`)}const j={class:"contract-number-page"},z={class:"btn"},D="contractNumber",E=P({name:D,__name:"index",setup(m){const i=f(),l=f({prefixType:1,fixedPrefix:"",dateType:2,num:"",prefixText:"随机流水号",serialNum:5}),y={fixedPrefix:[{required:!0,message:"请输入前缀",trigger:"change"},{pattern:/^[a-zA-Z]+$/u,message:"只能输入英文字母",trigger:"change"}],dateType:[{required:!0,message:"请选择前缀",trigger:"change"}],serialNum:[{required:!0,message:"请输入",trigger:"blur"}]},b=[{value:0,label:"年"},{value:1,label:"年-月"},{value:2,label:"年-月-日"}],V=[{value:1,label:"1位"},{value:2,label:"2位"},{value:5,label:"5位"}],s=f(!1),T=r=>{r&&r.validate(async e=>{e?(s.value=!0,await A(l.value).then(d=>{L.success("保存成功！")}).finally(()=>{s.value=!1})):(s.value=!1,console.log("error submit!"))})},C=r=>{r==1&&(l.value.fixedPrefix=null),i.value&&i.value.clearValidate()};return U(async()=>{await O().then(r=>{r&&(l.value=r)}).finally(()=>{})}),(r,e)=>{const d=n("el-radio"),w=n("el-radio-group"),v=n("el-input"),p=n("el-form-item"),x=n("fs-select"),N=n("el-form"),k=n("el-button");return _(),q("div",j,[e[10]||(e[10]=u(" 合同编号配置 ")),t(N,{ref_key:"formRef",ref:i,class:"radius-box",model:l.value,"label-width":"90px",rules:y,style:{padding:"12px",width:"550px"}},{default:o(()=>[t(p,{label:"前缀：",prop:l.value.prefixType==0?"fixedPrefix":"prefixType"},{default:o(()=>[t(w,{modelValue:l.value.prefixType,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.prefixType=a),onChange:C},{default:o(()=>[t(d,{value:0},{default:o(()=>e[6]||(e[6]=[u("固定字符")])),_:1,__:[6]}),t(d,{value:1},{default:o(()=>e[7]||(e[7]=[u("取合同类型编号")])),_:1,__:[7]}),t(d,{value:2},{default:o(()=>e[8]||(e[8]=[u("机构编码+合同类型编号")])),_:1,__:[8]})]),_:1},8,["modelValue"]),l.value.prefixType==0?(_(),M(v,{key:0,placeholder:"请输入前缀",maxlength:10,"show-word-limit":"",modelValue:l.value.fixedPrefix,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.fixedPrefix=a),modelModifiers:{trim:!0}},null,8,["modelValue"])):$("",!0)]),_:1},8,["prop"]),t(p,{label:"日期：",prop:"dateType"},{default:o(()=>[t(x,{modelValue:l.value.dateType,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.dateType=a),options:b},null,8,["modelValue"])]),_:1}),t(p,{label:"尾号：",prop:"serialNum"},{default:o(()=>[t(v,{placeholder:"随机流水号",disabled:"",modelValue:l.value.prefixText,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.prefixText=a),modelModifiers:{trim:!0},style:{width:"57%","margin-right":"3%"}},null,8,["modelValue"]),t(x,{modelValue:l.value.serialNum,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.serialNum=a),disabled:"",options:V,style:{width:"40%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),B("div",z,[t(k,{loading:s.value,type:"primary",style:{"margin-left":"12px"},onClick:e[5]||(e[5]=a=>T(i.value))},{default:o(()=>e[9]||(e[9]=[u("保存")])),_:1,__:[9]},8,["loading"])])])}}}),Q=R(E,[["__scopeId","data-v-27782303"]]);export{Q as default};
