import{d as I,ap as v,aq as O,T as g,ar as S,r as E,h as n,j as h,k as D,w as u,A as o,v as t,L as M}from"./index-BbO6UiJA.js";import{q as k,i as w,u as L}from"./index-DjLbNzml.js";import"./index-CC7IV6J8.js";import"./index-G1vWk1G8.js";import"./error-Cq9Fpw4b.js";const z=I({__name:"form-dialog",props:v({initData:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:v(["success"],["update:modelValue"]),setup(i,{emit:b}){const f=i,P=b,p=O(i,"modelValue"),c=g(()=>!f.initData.id),V=g(()=>c.value?"流程新增":"流程编辑"),C=()=>new Promise((l,e)=>{k({pageNum:1,pageSize:1e4,enabled:[!0]}).then(d=>{console.log(d);const m=d.list.map(a=>({label:a.formName,value:a.formCode}));l(m)})}),N=l=>{console.log(l.selected.label),s.value.processName=l.selected.label},{formData:s,formRef:T,requestSave:A}=S(f,{typeLabel:"流程配置",convert(l){return c.value&&(l.configProcessesType="CONTRACT_END",l.configProcessesStatus="Y"),l}}),R={processId:[{required:!0,message:"请选择流程名称"}],configProcessesType:[{required:!0,message:"请选择流程类型"}],configProcessesStatus:[{required:!0,message:"请选择状态"}]};E([{value:s.value.parentId,label:s.value.parentBankName}]);const y=l=>{A(c.value?w:L,e=>c.value?e:{id:e.id,...e}).then(e=>{M.success("保存成功"),P("success",e),l.value=!1,p.value=!1}).catch(()=>{l.value=!1})};return(l,e)=>{const d=n("form-select-v2"),m=n("el-form-item"),a=n("el-radio"),_=n("el-radio-group"),q=n("el-form"),x=n("complex-dialog");return D(),h(x,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=r=>p.value=r),width:"600px",title:V.value,onSubmit:y},{default:u(()=>[o(q,{ref_key:"formRef",ref:T,class:"radius-box",model:t(s),"label-width":"130px",rules:R,style:{padding:"12px"}},{default:u(()=>[o(m,{label:"流程名称",prop:"processId"},{default:u(()=>[o(d,{modelValue:t(s).processId,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).processId=r),"request-method":C,"echo-options":[{value:t(s).processId,label:t(s).processName}],placeholder:"请选择流程名称",onChange:N},null,8,["modelValue","echo-options"])]),_:1}),o(m,{label:"流程类型",prop:"configProcessesType"},{default:u(()=>[o(_,{modelValue:t(s).configProcessesType,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).configProcessesType=r)},{default:u(()=>[o(a,{value:"APPROVAL_CHANGE",label:"合同审批/变更"}),o(a,{value:"CONTRACT_PERFORMANCE",label:"合同履约"}),o(a,{value:"CONTRACT_END",label:"合同终止"}),o(a,{value:"PRE_APPLICATION",label:"事前申请"}),o(a,{value:"CONTRACT_ORDER",label:"框架订单"})]),_:1},8,["modelValue"])]),_:1}),o(m,{label:"状态",prop:"configProcessesStatus"},{default:u(()=>[o(_,{modelValue:t(s).configProcessesStatus,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).configProcessesStatus=r)},{default:u(()=>[o(a,{value:"Y",label:"启用"}),o(a,{value:"N",label:"禁用"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}});export{z as default};
