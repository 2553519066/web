const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialog-BbSPTS43.js","assets/index-B0EZE7ii.js","assets/index-CCn4OCkM.css","assets/customControl-ZR1bIbQi.js","assets/form-dialog-CL_-O8ev.css"])))=>i.map(i=>d[i]);
import{d as Y,r as b,au as F,e as $,a as B,R as o,T as L,h as E,i as w,j as d,k as u,w as n,m as v,p as l,t as O,q as P,E as V,H as j,I as A,L as y}from"./index-B0EZE7ii.js";import{q as M,b as S,a as T}from"./customControl-ZR1bIbQi.js";import{E as g}from"./index-D3qEiLu-.js";import"./index-CKmZDc37.js";import"./error-Cq9Fpw4b.js";const r="customControlIndex",W=Y({name:r,__name:"index",setup(z){const p=b({add:`${r}:add`,enabled:`${r}:enabled`,disable:`${r}:disable`,edit:`${r}:edit`}),_=b(),h=b({}),D=b({code:r,requestFunction:M,pageSize:20,searchProps:{code:`${r}Search`,options:[$({label:"控件名称",prop:"name"}),$({label:"创建人",prop:"createUserName"}),B({label:"状态",prop:"status",code:"status_en_lc"}),B({label:"控件类型",prop:"fieldDefineType",code:"custom_control_type"})]},tableProps:{code:`${r}Table`,showIndex:!0,showSelect:!0,autoTable:!0,columns:[{label:"控件名称",prop:"name"},{label:"控件类型",prop:"fieldDefineType",type:"custom_control_type",formatter:F},{label:"是否必填",prop:"must",type:"must",formatter:(t,e,a,i)=>a?"是":"否"},{label:"状态",prop:"status",type:"status",formatter:(t,e,a,i)=>a=="Y"?"启用":"禁用"},{label:"创建人创建时间",hSlot:"create",prop:"createUserName",align:"center",formatter:t=>o("div",[o("span",t.createUserName),o("br"),o("span",t.createTime)])},{label:"更新人更新时间",hSlot:"update",prop:"parentBankName",align:"center",formatter:t=>o("div",[o("span",t.updateUserName),o("br"),o("span",t.updateTime)])}]}});D.value.tableProps.columns.push({label:"操作",prop:"operate",fixed:"right",width:100,slot:"operate"});const c=b([]),x=L(()=>({test:c.value.length==0})),m=()=>{_.value.refresh()},N=()=>{_.value.search()},k=t=>{let e={};t&&(e={id:t.id,...JSON.parse(t.fieldDefineInfo),status:t.status}),j({body:()=>A(()=>import("./form-dialog-BbSPTS43.js"),__vite__mapDeps([0,1,2,3,4])),bodyData:{initData:e||{}},isReject:!0}).then(()=>{t?m():N()})},I=(t,e)=>{const a=t.status!=="Y"?"启用":"禁用";g.confirm(`确定${a}吗？`,"提示",{type:"warning"}).then(()=>{t.status=="Y"?S([t.id]).then(()=>{y.success(`${a}成功`),m()}):T([t.id]).then(()=>{y.success(`${a}成功`),m()})})},R=({event:t,done:e})=>{g.confirm("确定启用吗？","提示",{type:"warning"}).then(()=>{const a=c.value.map(i=>i.id);T(a).then(()=>{e(),y.success("启用成功"),m()})}).catch(()=>{e()})},U=({event:t,done:e})=>{g.confirm("确定禁用吗？","提示",{type:"warning"}).then(()=>{const a=c.value.map(i=>i.id);S(a).then(()=>{e(),y.success("禁用成功"),m()})}).catch(()=>{e()})};return(t,e)=>{const a=E("FsButton"),i=E("complex-page"),f=w("per");return u(),d(i,V({ref_key:"pageRef",ref:_,searchData:h.value,"onUpdate:searchData":e[1]||(e[1]=s=>h.value=s),"select-list":c.value,"onUpdate:selectList":e[2]||(e[2]=s=>c.value=s)},D.value),{create:n(()=>e[3]||(e[3]=[l(" 创建人 "),P("br",null,null,-1),l(" 创建时间 ")])),update:n(()=>e[4]||(e[4]=[l(" 更新人 "),P("br",null,null,-1),l(" 更新时间 ")])),action:n(({queryData:s})=>[v((u(),d(a,{"show-loading":!1,type:"primary",onClick:e[0]||(e[0]=C=>k())},{default:n(()=>e[5]||(e[5]=[l(" 新增 ")])),_:1,__:[5]})),[[f,p.value.add]]),v((u(),d(a,{type:"primary",onClick:R,disabled:x.value.test},{default:n(()=>e[6]||(e[6]=[l(" 启用 ")])),_:1,__:[6]},8,["disabled"])),[[f,p.value.enabled]]),v((u(),d(a,{type:"primary",onClick:U,disabled:x.value.test},{default:n(()=>e[7]||(e[7]=[l(" 禁用 ")])),_:1,__:[7]},8,["disabled"])),[[f,p.value.disable]])]),operate:n(({row:s,$index:C})=>[v((u(),d(a,{"show-loading":!1,link:"",type:"primary",onClick:q=>k(s)},{default:n(()=>e[8]||(e[8]=[l(" 编辑 ")])),_:2,__:[8]},1032,["onClick"])),[[f,p.value.edit]]),v((u(),d(a,{"show-loading":!1,link:"",type:"primary",onClick:q=>I(s,C)},{default:n(()=>[l(O(s.status!=="Y"?"启用":"禁用"),1)]),_:2},1032,["onClick"])),[[f,s.status!=="Y"?p.value.enabled:p.value.disable]])]),_:1},16,["searchData","select-list"])}}});export{W as default};
