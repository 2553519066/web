const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialog-C3sSx30X.js","assets/index-D-MzvSrp.js","assets/index-CCn4OCkM.css","assets/form-dialog-DPSGoTKz.css"])))=>i.map(i=>d[i]);
import{bh as h,bi as _,d as q,r as n,ce as I,bj as S,s as m,a4 as M,T as E,o as U,h as g,i as z,j as f,k as v,l as A,w as r,m as T,p as C,A as O,q as D,t as P,E as H,cf as Q,be as G,cd as J,H as K,I as W,Q as X}from"./index-D-MzvSrp.js";const se=l=>h.post(`${_.contract}/configContractFulfillment/insert`,l),$=l=>h.post(`${_.contract}/configContractFulfillment/page`,l),re=l=>h.post(`${_.contract}/configContractFulfillment/update`,l),Y={style:{padding:"12px"}},Z={style:{padding:"12px"}},p="BusinessCost",ee=q({name:p,__name:"index",setup(l){const o=n({add:`${p}:add`,edit:`${p}:edit`});I([...Object.values(o.value)]),o.value.action=S([o.value.add]),o.value.operate=S([o.value.edit]);const i=n(),u=n({}),k=e=>Q({codeOrName:e}).then(t=>t.map(s=>({label:s.label,value:s.value}))),V=e=>G({codeOrName:e}).then(t=>t.map(s=>({label:s.typeName,value:s.feeCode}))),j=e=>J({processName:e});n(0);const b=n({code:p,requestFunction:$,pageSize:20,searchProps:{code:`${p}Search`,options:[m({label:"我方机构",prop:"orgCodes",multiple:!0,filterable:!0,remote:!0,searchMethod:k}),m({label:"费用类型",prop:"costTypeCodes",multiple:!0,filterable:!0,remote:!0,searchMethod:V}),m({label:"履约流程",prop:"processesId",multiple:!1,filterable:!0,remote:!0,searchMethod:j,onChange:e=>{u.value.processesName=e.selected&&e.selected.label}})]},tableProps:{code:`${p}Table`,showIndex:!0,center:!0,showSelect:!0,autoTable:!0,columns:[{label:"我方机构",width:300,prop:"orgName",slot:"orgName"},{label:"费用类型",width:300,prop:"costTypeName",slot:"costTypeName"},{label:"履约流程",prop:"processName"},{label:"创建人",prop:"createUserName"},{label:"创建时间",prop:"createTime"},{label:"更新人",prop:"updateUserName"},{label:"更新时间",prop:"updateTime"}]}});o.value.operate&&b.value.tableProps.columns.push({label:"操作",prop:"operate",fixed:"right",width:100,slot:"operate"});const F=M({firstData:[]}),w=async()=>{try{const e=await $({pcode:0,pageNum:1,pageSize:999});F.firstData=e.list}catch{}},d=n([]);E(()=>({test:d.value.length==0})),U(()=>{w()});const B=()=>{i.value.refresh()},L=()=>{i.value.search()},y=e=>{K({body:()=>W(()=>import("./form-dialog-C3sSx30X.js"),__vite__mapDeps([0,1,2,3])),bodyData:{initData:e||{}},isReject:!0}).then(()=>{e?B():L()})};return(e,t)=>{const s=g("FsButton"),x=g("el-scrollbar"),R=g("complex-page"),N=z("per");return v(),f(R,H({ref_key:"pageRef",ref:i,searchData:u.value,"onUpdate:searchData":t[1]||(t[1]=a=>u.value=a),"select-list":d.value,"onUpdate:selectList":t[2]||(t[2]=a=>d.value=a)},b.value),A({orgName:r(({row:a})=>[O(x,{"max-height":"60px"},{default:r(()=>[D("div",Y,P(a.orgVOS&&a.orgVOS.length>0&&a.orgVOS.map(c=>c.orgName).join(", ")),1)]),_:2},1024)]),costTypeName:r(({row:a})=>[O(x,{"max-height":"60px"},{default:r(()=>[D("div",Z,P(a.costTypeVOS&&a.costTypeVOS.length>0&&a.costTypeVOS.map(c=>c.costTypeName).join(", ")),1)]),_:2},1024)]),_:2},[o.value.action?{name:"action",fn:r(({queryData:a})=>[T((v(),f(s,{"show-loading":!1,type:"primary",onClick:t[0]||(t[0]=c=>y())},{default:r(()=>t[3]||(t[3]=[C("新增履约流程")])),_:1,__:[3]})),[[N,o.value.add]])]),key:"0"}:void 0,o.value.operate?{name:"operate",fn:r(({row:a,$index:c})=>[T((v(),f(s,{"show-loading":!1,link:"",type:"primary",onClick:ae=>y(a)},{default:r(()=>t[4]||(t[4]=[C("编辑")])),_:2,__:[4]},1032,["onClick"])),[[N,o.value.edit]])]),key:"1"}:void 0]),1040,["searchData","select-list"])}}}),te=X(ee,[["__scopeId","data-v-46ba1f6c"]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:te},Symbol.toStringTag,{value:"Module"}));export{se as a,le as i,re as u};
