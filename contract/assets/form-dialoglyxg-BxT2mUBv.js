import{d as F,ap as D,T as h,aq as O,r as R,ar as S,ce as U,bj as V,h as r,j as E,k as H,w as e,q as u,A as a,p as s,t as i,v as m,x as I,L,Q as A}from"./index-B-DYpXrm.js";import{D as Q}from"./add-order-hE-kb25m.js";import{v as z}from"./format-YdPDtuZt.js";import"./index-DTCKMPKS.js";const G={class:"dia-header"},J={style:{"background-color":"#fff",padding:"10px"}},f="htlysjxg",K=F({name:f,__name:"form-dialoglyxg",props:D({initData:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{}}),emits:D(["success"],["update:modelValue"]),setup(y,{emit:k}){const l=y,v=h(()=>"合同履约时间修改"),w=k,_=O(y,"modelValue"),c=R({add:`${f}:add`,edit:`${f}:edit`,del:`${f}:del`}),N={newTime:[{required:!0,message:"请选择新履约时间"}],remark:[{required:!0,message:"请输入修改原因"}]},{formData:d,formRef:b}=S(l,{typeLabel:"修改履约合同履约时间",convert(n){return n}});U([...Object.values(c.value)]),c.value.action=V([c.value.add]),c.value.operate=V([c.value.edit,c.value.del]);const T=n=>{b.value.validate(t=>{if(t){let g={id:l.initData.id,fulfillmentCode:l.initData.code,newTime:d.value.newTime,oldTime:l.initData.fulfillDate,remark:d.value.remark};Q(g).then(o=>{L.success("修改成功"),w("success",o),n.value=!1,_.value=!1}).catch(()=>{n.value=!1})}else n.value=!1})},C=h(()=>{const n=l.initData,t={companyPrefix:"付款公司",partyCode:n.payPartyCode,partyName:n.payPartyName};return n.financeType!="INCOME"&&(t.companyPrefix="收款公司",t.partyCode=n.receivePartyCode,t.partyName=n.receivePartyName),t});return(n,t)=>{const g=r("el-link"),o=r("el-descriptions-item"),P=r("el-descriptions"),M=r("el-date-picker"),x=r("el-form-item"),j=r("el-col"),q=r("el-row"),Y=r("el-input"),$=r("el-form"),B=r("complex-dialog");return H(),E(B,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=p=>_.value=p),width:"1000px",title:v.value,onSubmit:T},{header:e(()=>[u("div",G,[u("div",null,i(v.value),1),t[3]||(t[3]=u("div",{class:"btxms"},[u("span",{style:{color:"red"}},"*"),s("为必填项")],-1))])]),default:e(()=>[u("div",J,[a(P,{column:3,border:""},{extra:e(()=>[a(g,{underline:!1,type:"primary"},{default:e(()=>[s(i(l.initData.contractName),1)]),_:1})]),default:e(()=>[a(o,{label:"履约节点","label-align":"right",align:"center","label-class-name":"my-label","class-name":"my-content"},{default:e(()=>[s(i(l.initData.name),1)]),_:1}),a(o,{label:"要求履约时间","label-align":"right",align:"center"},{default:e(()=>[s(i(m(I)(l.initData.fulfillDate)),1)]),_:1}),a(o,{label:"成本中心","label-align":"right",align:"center"},{default:e(()=>[s(i(l.initData.costCenterName),1)]),_:1}),a(o,{label:"收支类型","label-align":"right",align:"center"},{default:e(()=>[s(i(l.initData.financeTypeName),1)]),_:1}),a(o,{label:"收款含税金额","label-align":"right",align:"center"},{default:e(()=>[u("span",null,i(n.$format.thousandsFormatCurrency(l.initData.amount)),1)]),_:1}),a(o,{label:"发票类型","label-align":"right",align:"center"},{default:e(()=>[s(i(l.initData.invoiceTypeName),1)]),_:1}),a(o,{label:"税率","label-align":"right",align:"center"},{default:e(()=>[s(i(m(z)(l.initData.taxRate)),1)]),_:1}),a(o,{label:C.value.companyPrefix,"label-align":"right",align:"center"},{default:e(()=>[s(i(l.initData.payPartyName),1)]),_:1},8,["label"]),a(o,{label:"费用类型","label-align":"right",align:"center"},{default:e(()=>[s(i(l.initData.costTypeName),1)]),_:1})]),_:1})]),a($,{ref_key:"formRef",ref:b,class:"radius-box",model:m(d),"label-width":"130px",rules:N,style:{padding:"12px"}},{default:e(()=>[a(q,null,{default:e(()=>[a(j,{span:12},{default:e(()=>[a(x,{label:"新履约时间",prop:"newTime"},{default:e(()=>[a(M,{style:{width:"100%"},modelValue:m(d).newTime,"onUpdate:modelValue":t[0]||(t[0]=p=>m(d).newTime=p),type:"date","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择新履约时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(x,{label:"修改原因",prop:"remark"},{default:e(()=>[a(Y,{modelValue:m(d).remark,"onUpdate:modelValue":t[1]||(t[1]=p=>m(d).remark=p),rows:4,type:"textarea",maxlength:500,placeholder:"请输入修改原因"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),ae=A(K,[["__scopeId","data-v-8474e1c9"]]);export{ae as default};
