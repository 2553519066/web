import{d as D,ap as i,aq as S,r as o,e as l,b as _,a as h,h as f,j as T,k as q,w as y,A as N,E as P,q as U,t as R,L as K}from"./index-Cyvvb__l.js";import{q as k}from"./priorApplicationForContract-Dl40Yo1d.js";const A={style:{"font-size":"12px"}},r="processConfiguration",$=D({name:r,__name:"related-apply-dialog",props:i({processInstanceId:{type:String,default:""},preApplyKeyword:{type:String,default:""},rowKey:{type:String,default:"processInstanceId"}},{modelValue:{},modelModifiers:{}}),emits:i(["success"],["update:modelValue"]),setup(c,{emit:b}){const u=c,g=b,p=S(c,"modelValue");o(!1);const s=o(),I=o(),d=o({}),v=o(0),m=o([]),x=o({code:r,requestFunction:k,beforeRequest:a=>({...a,processInstanceStatus:["完成"]}),afterRequest:(a,e)=>{m.value=a,v.value=e},pageSize:20,searchProps:{code:`${r}Search`,options:[l({label:"供应商",prop:"contractPartyName"}),l({label:"单据编号",prop:"processInstanceId"}),_({label:"申请日期",prop:"",sf:"startTime",ef:"endTime"}),l({label:"申请人",prop:"createUserApplyName"}),l({label:"申请人部门",prop:"createUserDepartmentName"}),h({label:"合同类型",prop:"contractType",code:"contract_type",multiple:!0,collapseTags:!0})]},tableProps:{rowKey:u.rowKey,code:`${r}Table`,showIndex:!1,showRadio:!0,autoTable:!0,height:400,columns:[{label:"流程单据编号",prop:"processInstanceId",slot:"processInstanceIdDom"},{label:"流程标题",prop:"processInstanceTitle"},{label:"申请人",prop:"createUserApplyName"},{label:"申请人部门",prop:"createUserDepartmentName"},{label:"申请日期",prop:"applyTime"},{label:"合同类型",prop:"contractType"},{label:"流程单据状态",prop:"processInstanceStatus"}]}}),V=async a=>{if(!s.value){K.error("请选择关联事前申请"),a.value=!1;return}const e=m.value.find(n=>n[u.rowKey]===s.value);g("success",{...e}),a.value=!1,p.value=!1};return(a,e)=>{const n=f("complex-page"),w=f("complex-dialog");return q(),T(w,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),width:"1200px",title:"选择事前申请",onSubmit:V},{default:y(()=>[N(n,P({ref_key:"pageRef",ref:I,searchData:d.value,"onUpdate:searchData":e[0]||(e[0]=t=>d.value=t),"radio-value":s.value,"onUpdate:radioValue":e[1]||(e[1]=t=>s.value=t)},x.value),{processInstanceIdDom:y(({row:t,$index:C})=>[U("span",A,R(t.processInstanceId),1)]),_:1},16,["searchData","radio-value"])]),_:1},8,["modelValue"])}}});export{$ as default};
