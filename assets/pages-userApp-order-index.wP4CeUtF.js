import{d as e,r as a,v as l,x as t,c as u,w as s,a as o,b as n,_ as i,e as r,y as c,z as d,o as v,f as m,i as f,l as b,g as _,n as p,p as g,m as P,t as h,h as x,F as w,j as y,A as C,s as S,u as k}from"./index-GbXCx2Zj.js";import{g as F}from"./phones.CXKAVbyd.js";const N=k(e({__name:"index",setup(e){const k=a(!1),N=a("new"),$=a({brand:"",model:"",storage:"",color:"",salePrice:0,guidePrice:0,installment:0});a(1);const M=a(null),G=a(!1),X=a(!1),z=a(!1),A=a(!1),B=a(!1),D=a([["Apple","Samsung","Huawei","Xiaomi"]]),j={Apple:{"iPhone 15":{salePrice:5999,guidePrice:6999},"iPhone 15 Pro":{salePrice:7999,guidePrice:8999},"iPhone 15 Pro Max":{salePrice:9999,guidePrice:10999}},Samsung:{"Galaxy S24":{salePrice:5499,guidePrice:6499},"Galaxy S24 Ultra":{salePrice:8999,guidePrice:9999}},Huawei:{"Mate 60":{salePrice:6999,guidePrice:7999},P60:{salePrice:4999,guidePrice:5999}},Xiaomi:{"Xiaomi 14":{salePrice:3999,guidePrice:4999},"Xiaomi 14 Pro":{salePrice:4999,guidePrice:5999}}},H={Apple:["iPhone 15","iPhone 15 Pro","iPhone 15 Pro Max"],Samsung:["Galaxy S24","Galaxy S24 Ultra"],Huawei:["Mate 60","P60"],Xiaomi:["Xiaomi 14","Xiaomi 14 Pro"]},I=l(()=>{if(!$.value.brand)return[[]];return[H[$.value.brand]||[]]}),U=["128GB","256GB","512GB","1TB"],Y=a([U]),q=["黑色","白色","蓝色","紫色","金色"],J=a([q]),O=a([[3,6,12,24].map(e=>`${e}期`)]),R=l(()=>$.value.installment?`${$.value.installment}期`:""),T=l(()=>!!($.value.brand&&$.value.model&&$.value.storage&&$.value.color)),E=l(()=>{const e=Number($.value.installment||0);return e?e<=6?.2:.3:0}),K=l(()=>{const e=Number($.value.salePrice||0);return Number((e*E.value).toFixed(2))}),L=l(()=>{if(!T.value||!$.value.installment)return"--";const e=Number($.value.salePrice||0),a=K.value,l=Math.max(e-a,0),t=Number($.value.installment||0);if(!t)return"0.00";const u=t-(a>0?1:0);return u<=0?"0.00":(l/u).toFixed(2)}),Q=l(()=>{if(!T.value||!$.value.installment)return[];const e=Number($.value.salePrice||0),a=K.value,l=Math.max(e-a,0),t=Number($.value.installment||0);if(!t||e<=0)return[];const u=t-(a>0?1:0),s=u>0?Number((l/u).toFixed(2)):0,o=[];let n=0;const i=e=>{const a=["零","一","二","三","四","五","六","七","八","九"];return 10===e?"十":e<10?a[e]:e<20?"十"+a[e-10]:e%10==0?a[Math.floor(e/10)]+"十":a[Math.floor(e/10)]+"十"+a[e%10]},r=new Date,c=r.getFullYear(),d=String(r.getMonth()+1).padStart(2,"0"),v=String(r.getDate()).padStart(2,"0");a>0&&o.push({key:"first",label:"首付",date:`${c}-${d}-${v}`,amount:a.toFixed(2)});for(let m=1;m<=u;m++){const e=m===u?Number((l-n).toFixed(2)):s;n+=e;const t=new Date;t.setMonth(t.getMonth()+m);const r=t.getFullYear(),c=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0"),v=a>0?m+1:m;o.push({key:`p-${m}`,label:`第${i(v)}期`,date:`${r}-${c}-${d}`,amount:e.toFixed(2)})}return o}),V=()=>{$.value.brand?X.value=!0:C({title:"请先选择品牌",icon:"none"})},W=()=>{$.value.brand?$.value.model?z.value=!0:C({title:"请先选择型号",icon:"none"}):C({title:"请先选择品牌",icon:"none"})},Z=()=>{$.value.brand?$.value.model?A.value=!0:C({title:"请先选择型号",icon:"none"}):C({title:"请先选择品牌",icon:"none"})},ee=()=>{$.value.brand?$.value.model?$.value.storage?$.value.color?B.value=!0:C({title:"请先选择颜色",icon:"none"}):C({title:"请先选择内存",icon:"none"}):C({title:"请先选择型号",icon:"none"}):C({title:"请先选择品牌",icon:"none"})},ae=e=>{$.value.brand=e.value[0],$.value.model="",$.value.storage="",$.value.color="",$.value.salePrice=0,$.value.guidePrice=0,$.value.installment=0,G.value=!1},le=e=>{var a;const l=e.value[0];if($.value.model=l,$.value.storage="",$.value.color="",$.value.installment=0,$.value.brand&&l){const e=null==(a=j[$.value.brand])?void 0:a[l];e&&($.value.salePrice=e.salePrice,$.value.guidePrice=e.guidePrice)}X.value=!1},te=e=>{$.value.storage=e.value[0],$.value.installment=0,z.value=!1},ue=e=>{$.value.color=e.value[0],$.value.installment=0,A.value=!1},se=e=>{const a=e.value[0];$.value.installment=parseInt(a),B.value=!1},oe=()=>{if(!$.value.brand||!$.value.model||!$.value.storage)return void C({title:"请完善商品信息",icon:"none"});if(!$.value.salePrice)return void C({title:"请填写售价",icon:"none"});const e=encodeURIComponent(JSON.stringify($.value)),a=null!=M.value?`&id=${M.value}`:"";S({url:`/subPage/mallSys/product/buy/index?form=${e}${a}`})};return t(e=>{if(e.id){M.value=Number(e.id);const a=F(e.id);a&&($.value.brand=a.brand,$.value.model=a.name,$.value.salePrice=a.price,$.value.guidePrice=a.price+1e3,$.value.storage=e.storage||e.memory||U[0],$.value.color=e.color||q[0],$.value.installment=12)}}),(e,a)=>{const l=o("b-navbar"),t=_,C=f,S=P,F=n(r("up-icon"),i),M=n(r("up-button"),c),j=n(r("up-picker"),d),H=o("head-top");return v(),u(H,{loading:k.value,is_footer_mar:!1},{default:s(()=>[m(C,{class:"order-container"},{default:s(()=>[m(l,{title:"确认订单"}),m(C,{class:"order-banner"},{default:s(()=>[m(t,{src:"https://images.unsplash.com/photo-1696446701796-da61225697cc?auto=format&fit=crop&w=800&q=80",mode:"aspectFill"}),m(C,{class:"banner-text"},{default:s(()=>[p("信用免押 × 随心享用")]),_:1})]),_:1}),m(C,{class:"type-tabs"},{default:s(()=>[m(C,{class:g(["tab","new"===N.value?"active":""]),onClick:a[0]||(a[0]=e=>N.value="new")},{default:s(()=>[p("新机")]),_:1},8,["class"]),m(C,{class:g(["tab","old"===N.value?"active":""]),onClick:a[1]||(a[1]=e=>N.value="old")},{default:s(()=>[p("旧机")]),_:1},8,["class"])]),_:1}),m(C,{class:"card"},{default:s(()=>[m(C,{class:"card-title"},{default:s(()=>[p("商品信息")]),_:1}),m(C,{class:"product-form"},{default:s(()=>[m(C,{class:"form-item",onClick:a[2]||(a[2]=e=>G.value=!0)},{default:s(()=>[m(C,{class:"form-label"},{default:s(()=>[p("品牌")]),_:1}),m(C,{class:"input-box"},{default:s(()=>[m(S,{class:g(["input-text",{placeholder:!$.value.brand}])},{default:s(()=>[p(h($.value.brand||"请选择品牌"),1)]),_:1},8,["class"]),m(F,{name:"arrow-down",size:"16",color:"#909399"})]),_:1})]),_:1}),m(C,{class:"form-item",onClick:V},{default:s(()=>[m(C,{class:"form-label"},{default:s(()=>[p("型号")]),_:1}),m(C,{class:g(["input-box",{disabled:!$.value.brand}])},{default:s(()=>[m(S,{class:g(["input-text",{placeholder:!$.value.model}])},{default:s(()=>[p(h($.value.model||"请选择型号"),1)]),_:1},8,["class"]),m(F,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),m(C,{class:"form-inline"},{default:s(()=>[m(C,{class:"form-item",onClick:W},{default:s(()=>[m(C,{class:"form-label"},{default:s(()=>[p("内存")]),_:1}),m(C,{class:g(["input-box",{disabled:!$.value.model}])},{default:s(()=>[m(S,{class:g(["input-text",{placeholder:!$.value.storage}])},{default:s(()=>[p(h($.value.storage||"请选择内存"),1)]),_:1},8,["class"]),m(F,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),m(C,{class:"form-item",onClick:Z},{default:s(()=>[m(C,{class:"form-label"},{default:s(()=>[p("颜色")]),_:1}),m(C,{class:g(["input-box",{disabled:!$.value.model}])},{default:s(()=>[m(S,{class:g(["input-text",{placeholder:!$.value.color}])},{default:s(()=>[p(h($.value.color||"请选择颜色"),1)]),_:1},8,["class"]),m(F,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})]),_:1}),m(C,{class:"card"},{default:s(()=>[m(C,{class:"card-title"},{default:s(()=>[p("期数金额")]),_:1}),m(C,{class:"discount-grid"},{default:s(()=>[m(C,{class:"discount-item"},{default:s(()=>[m(C,{class:"label"},{default:s(()=>[p("售价：")]),_:1}),m(C,{class:"sale-display"},{default:s(()=>[p(h(T.value&&$.value.salePrice?"¥"+Number($.value.salePrice).toFixed(2):"--"),1)]),_:1})]),_:1}),m(C,{class:"discount-item"},{default:s(()=>[m(C,{class:"label"},{default:s(()=>[p("市场价：")]),_:1}),m(C,{class:"guide-display"},{default:s(()=>[p(h(T.value&&$.value.guidePrice?"¥"+Number($.value.guidePrice).toFixed(2):"--"),1)]),_:1})]),_:1}),m(C,{class:"discount-item",onClick:ee},{default:s(()=>[m(C,{class:"label"},{default:s(()=>[p("期数：")]),_:1}),m(C,{class:g(["input-box",{disabled:!T.value}])},{default:s(()=>[m(S,{class:g(["input-text",{placeholder:!R.value}])},{default:s(()=>[p(h(R.value||"选择期数"),1)]),_:1},8,["class"]),m(F,{name:"arrow-down",size:"16",color:"#909399"})]),_:1},8,["class"])]),_:1}),m(C,{class:"discount-item"},{default:s(()=>[m(C,{class:"label"},{default:s(()=>[p("首付金额：")]),_:1}),m(C,{class:"downpay-display"},{default:s(()=>[p(h(T.value&&$.value.installment?"¥"+K.value.toFixed(2):"--"),1)]),_:1})]),_:1})]),_:1}),T.value&&$.value.installment?(v(),u(C,{key:0,class:"period-summary"},{default:s(()=>[m(S,null,{default:s(()=>[p("每月应付")]),_:1}),m(S,{class:"amount"},{default:s(()=>[p(h("--"!==L.value?"¥"+L.value:"--"),1)]),_:1})]),_:1})):b("",!0)]),_:1}),Q.value.length?(v(),u(C,{key:0,class:"card"},{default:s(()=>[m(C,{class:"card-title"},{default:s(()=>[p("账单明细")]),_:1}),m(C,{class:"bill-list"},{default:s(()=>[(v(!0),x(w,null,y(Q.value,e=>(v(),u(C,{class:"bill-item",key:e.key},{default:s(()=>[m(C,{class:"bill-left"},{default:s(()=>[m(C,{class:"bill-title"},{default:s(()=>[p(h(e.label),1)]),_:2},1024),m(C,{class:"bill-date"},{default:s(()=>[p(h(e.date),1)]),_:2},1024)]),_:2},1024),m(C,{class:"bill-amount"},{default:s(()=>[p("¥"+h(e.amount),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):b("",!0),m(C,{class:"bottom-bar"},{default:s(()=>[m(M,{type:"primary",text:"下一步",onClick:oe,customStyle:{width:"100%",height:"44px"}})]),_:1}),m(j,{show:G.value,columns:D.value,onConfirm:ae,onCancel:a[3]||(a[3]=e=>G.value=!1)},null,8,["show","columns"]),m(j,{show:X.value,columns:I.value,onConfirm:le,onCancel:a[4]||(a[4]=e=>X.value=!1)},null,8,["show","columns"]),m(j,{show:z.value,columns:Y.value,onConfirm:te,onCancel:a[5]||(a[5]=e=>z.value=!1)},null,8,["show","columns"]),m(j,{show:A.value,columns:J.value,onConfirm:ue,onCancel:a[6]||(a[6]=e=>A.value=!1)},null,8,["show","columns"]),m(j,{show:B.value,columns:O.value,onConfirm:se,onCancel:a[7]||(a[7]=e=>B.value=!1)},null,8,["show","columns"])]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-c35e072c"]]);export{N as default};
