import{d as e,ad as t,b as a,a0 as o,e as n,c as l,o as r,ae as s,w as c,C as u,u as i,r as d,v as f,af as m,i as p,f as _,n as y,t as v,g,l as h,m as C,M as b,E as w,x as B,a as x,ag as k,h as T,F as S,j as R,s as P}from"./index-GbXCx2Zj.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_lang.DsAcmEGh.js";import{o as A}from"./orders.DJuNOKoI.js";const $=i(e({__name:"index",props:{show:{type:Boolean,default:!1},title:{type:String,default:""},content:{type:String,default:""},confirmText:{type:String,default:"确认"},cancelText:{type:String,default:"取消"},showConfirmButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!1},confirmColor:{type:String,default:"#3c9cff"},cancelColor:{type:String,default:"#606266"},buttonReverse:{type:Boolean,default:!1},zoom:{type:Boolean,default:!0},asyncClose:{type:Boolean,default:!1},closeOnClickOverlay:{type:Boolean,default:!1},negativeTop:{type:[String,Number],default:0},width:{type:[String,Number],default:"650rpx"},confirmButtonShape:{type:String,default:"square"},contentTextAlign:{type:String,default:"center"}},emits:["confirm","cancel","update:show"],setup(e,{emit:i}){const d=i;t();const f=()=>{d("confirm")},m=()=>{d("cancel"),d("update:show",!1)};return(t,i)=>{const d=a(n("up-modal"),o);return r(),l(d,{show:e.show,title:e.title,content:e.content,confirmText:e.confirmText,cancelText:e.cancelText,showConfirmButton:e.showConfirmButton,showCancelButton:e.showCancelButton,confirmColor:e.confirmColor,cancelColor:e.cancelColor,buttonReverse:e.buttonReverse,zoom:e.zoom,asyncClose:e.asyncClose,closeOnClickOverlay:e.closeOnClickOverlay,negativeTop:e.negativeTop,width:e.width,confirmButtonShape:e.confirmButtonShape,contentTextAlign:e.contentTextAlign,onConfirm:f,onCancel:m},s({default:c(()=>[u(t.$slots,"default",{},void 0,!0)]),_:2},[t.$slots.confirmButton?{name:"confirmButton",fn:c(()=>[u(t.$slots,"confirmButton",{},void 0,!0)]),key:"0"}:void 0]),1032,["show","title","content","confirmText","cancelText","showConfirmButton","showCancelButton","confirmColor","cancelColor","buttonReverse","zoom","asyncClose","closeOnClickOverlay","negativeTop","width","confirmButtonShape","contentTextAlign"])}}}),[["__scopeId","data-v-1f17fed5"]]),F=i(e({__name:"OrderItem",props:{order:{}},emits:["click","clickProduct"],setup(e,{emit:t}){const o=e,s=t,u=d(!1),i=()=>{u.value=!0},w=()=>{u.value=!1,F("cancel")},B=d(""),x=[{name:"查看账单",value:"showBill"},{name:"上传身份资料",value:"audit"},{name:"联系商家",value:"contact"}],k=f(()=>{const e=o.order||{};return e.needPay?"待付款":e.needUpload?"待审核":"repay"===e.action?"待还款":"earlyRepay"===e.action?"可提前结清":"defer"===e.action||"dailyRent"===e.action?"服务中":"进行中"});f(()=>{const e=o.order||{};return e.needPay?"待支付":"identity"===e.action?"上传身份资料":"contract"===e.action?"上传合同":"repay"===e.action?"还款":"earlyRepay"===e.action?"提前还款":"defer"===e.action?"申请延期":"dailyRent"===e.action?"日租续用":"风控材料"});const T=f(()=>{const e=o.order||{};if(e.title)return e.title;const t=[e.brand,e.model,e.storage].filter(Boolean);return t.length?t.join(" "):"租赁商品"}),S=f(()=>{const e=o.order||{};return e.spec?`已选：${e.spec}`:e.storage?`已选：${e.storage}`:""}),R=f(()=>{const e=o.order||{};return e.remainingPeriods?`租期：${e.remainingPeriods}期`:e.dailyFee?`日租金：¥${Number(e.dailyFee).toFixed(2)}`:""}),P=f(()=>{const e=o.order||{},t=e.totalRent??(e.perAmount&&e.remainingPeriods?e.perAmount*e.remainingPeriods:e.perAmount);return t?Number(t).toFixed(2):"0.00"}),O=f(()=>(o.order||{}).quantity||1),A=e=>{B.value=e.value,s("click",e.value)},F=e=>{s("click",e)};return(e,t)=>{const o=p,d=g,f=C,N=a(n("up-select"),m);return r(),l(o,{class:"order_item"},{default:c(()=>[_(o,{class:"order_header"},{default:c(()=>[_(o,{class:"order_store"},{default:c(()=>[_(o,{class:"store_icon"},{default:c(()=>[y("店")]),_:1}),_(o,{class:"store_name"},{default:c(()=>[y(v(e.order.storeName||"租无忧旗舰店"),1)]),_:1})]),_:1}),_(o,{class:"order_status"},{default:c(()=>[y(v(k.value),1)]),_:1})]),_:1}),_(o,{class:"order_body",onClick:t[0]||(t[0]=t=>{return a=e.order,void s("clickProduct",a);var a})},{default:c(()=>[_(o,{class:"product_thumb"},{default:c(()=>[_(d,{class:"product_img",src:e.order.img||"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?auto=format&fit=crop&w=400&h=400&q=80",mode:"aspectFill"},null,8,["src"])]),_:1}),_(o,{class:"product_info"},{default:c(()=>[_(o,{class:"product_title"},{default:c(()=>[y(v(T.value),1)]),_:1}),S.value?(r(),l(o,{key:0,class:"product_spec"},{default:c(()=>[y(v(S.value),1)]),_:1})):h("",!0),R.value?(r(),l(o,{key:1,class:"product_term"},{default:c(()=>[y(v(R.value),1)]),_:1})):h("",!0),_(o,{class:"product_bottom"},{default:c(()=>[_(o,{class:"total_rent"},{default:c(()=>[_(f,{class:"total_label"},{default:c(()=>[y("总租金")]),_:1}),_(f,{class:"total_amount"},{default:c(()=>[y("¥"+v(P.value),1)]),_:1})]),_:1}),_(o,{class:"quantity"},{default:c(()=>[y("x"+v(O.value),1)]),_:1})]),_:1})]),_:1})]),_:1}),_(o,{class:"order_footer"},{default:c(()=>[_(o,{class:"plan_tag"},{default:c(()=>[_(N,{current:B.value,"onUpdate:current":t[1]||(t[1]=e=>B.value=e),label:"更多",options:x,overlayOpacity:"0.3",onSelect:A},null,8,["current"])]),_:1}),_(o,{class:"order_buttons"},{default:c(()=>[_(o,{class:"order_btn",onClick:b(i,["stop"])},{default:c(()=>[y("取消订单")]),_:1}),_(o,{class:"order_btn order_btn_primary",onClick:t[2]||(t[2]=b(e=>F("audit"),["stop"]))},{default:c(()=>[y("上传身份资料")]),_:1}),_(o,{class:"order_btn order_btn_primary",onClick:t[3]||(t[3]=b(e=>F("contact"),["stop"]))},{default:c(()=>[y("联系商家")]),_:1})]),_:1})]),_:1}),_($,{show:u.value,"onUpdate:show":t[4]||(t[4]=e=>u.value=e),title:"取消订单",content:"订单生成后取消可能影响您的授信额度，确定继续取消吗？",showCancelButton:"",confirmText:"确认取消",cancelText:"暂不取消",confirmColor:"#3c9cff",onConfirm:w},null,8,["show"])]),_:1})}}}),[["__scopeId","data-v-d68c3f56"]]),N=i(e({__name:"index",setup(e){const t=d(!1),o=w([{name:"全部"},{name:"先审核后付"},{name:"待付款"},{name:"发货审核",badge:{value:5}},{name:"待发货"},{name:"待收货"},{name:"使用中"},{name:"已逾期"},{name:"归还中"},{name:"已完成"},{name:"已买断"},{name:"已关闭"}]),s=d(0),u=w([...A]);B(e=>{e&&e.type&&(s.value=Number(e.type))});const i=e=>{s.value=e},m=f(()=>0===s.value?u:1===s.value?u.filter(e=>e.needPay):2===s.value?u.filter(e=>e.needUpload):3===s.value?u.filter(e=>!e.needPay&&!e.needUpload&&"repay"!==e.action&&"earlyRepay"!==e.action):4===s.value?u.filter(e=>"repay"===e.action||"earlyRepay"===e.action):5===s.value?u.filter(e=>"defer"===e.action||"dailyRent"===e.action):u),y=e=>{console.log("订单点击:",e)},v=e=>{console.log("订单点击:",e),P({url:"./detail?id="+e.id})};return(e,u)=>{const d=x("b-navbar"),f=a(n("up-empty"),k),g=p,C=x("head-top");return r(),l(C,{loading:t.value,is_footer_mar:!1},{default:c(()=>[_(d,{title:"我的订单",is_back:!0,is_footer_mar:!1}),_(O,{list:o,current:s.value,"onUpdate:current":u[0]||(u[0]=e=>s.value=e),scrollable:"",onClick:i},null,8,["list","current"]),_(g,{class:"order_list"},{default:c(()=>[(r(!0),T(S,null,R(m.value,e=>(r(),l(F,{key:e.id,order:e,onClick:y,onClickProduct:v},null,8,["order"]))),128)),0===m.value.length?(r(),l(g,{key:0,class:"no-data"},{default:c(()=>[_(f,{mode:"order",text:"暂无相关订单"})]),_:1})):h("",!0)]),_:1})]),_:1},8,["loading"])}}}),[["__scopeId","data-v-25088160"]]);export{N as default};
