const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/form-dialoglyxg-5v5gz2Q_.js","assets/index-7XFzyDag.js","assets/index-CCf3sdPh.css","assets/add-order-DAdKgSzy.js","assets/index-Di87H6f7.js","assets/add-order-CiP4m1nW.css","assets/format-CF8vQ7ct.js","assets/form-dialoglyxg-DglUbiDr.css","assets/form-dialogly-DY5TfWrJ.js","assets/form-dialogly-CM0uqCT5.css","assets/form-dialog-D5zGb8SU.js","assets/form-dialoglyqx-BfoD7KdL.js","assets/form-dialoglyqx-Bracel3L.css"])))=>i.map(i=>d[i]);
import{d as J,u as Y,r as m,e as b,b as w,s as L,a as v,T as ee,h as x,i as te,j as S,k as h,w as n,q as a,y as k,B as g,D as E,t as l,m as $,p as o,A as r,E as ae,P as se,H as _,I,bZ as le,C as M,Q as ne}from"./index-7XFzyDag.js";import{u as oe,v as ie,w as ce,x as z,y as re,A as de}from"./add-order-DAdKgSzy.js";import"./index-Di87H6f7.js";const ue={class:"class-tablename"},pe={class:"gs-name"},fe={class:"gs-name2"},me={class:"bl-gsname",style:{"text-align":"center","margin-bottom":"5px"}},_e={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},ye={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},ve={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},he={style:{color:"#1d2129","font-size":"13px","margin-bottom":"5px"}},Ee={style:{color:"#ff1616","font-size":"13px","line-height":"20px",display:"inline-block","margin-right":"5px"}},Ie={key:0,class:"desc-list width-c5"},Ce={class:"desc-item",style:{"margin-bottom":"5px"}},be={class:"desc-value"},xe={class:"desc-item",style:{"margin-bottom":"5px"}},ge={class:"desc-value"},Ae={class:"desc-list width-c3"},Pe={class:"desc-item"},Se={class:"desc-value"},Ne={class:"desc-item"},De={class:"desc-value"},Re={class:"czxx"},Te={class:"statusDom"},d="performanceList",Fe=J({name:d,__name:"index",setup(Oe){const V=Y(),N=(t,s)=>{const i=se[t];if(!i)return console.error(`未找到名为 ${t} 的字典`),"";const c=i.find(C=>C.value==s);return c?c.label:""},D=m({performance:`${d}:performance`,change:`${d}:change`,del:`${d}:del`,withdraw:`${d}:withdraw`}),A=m(),R=m({}),W={CREATED:"#FF802A",INVALID:"#4E5969",IN_APPROVAL:"#34C759",CHANGE_IN_APPROVAL:"#34C759",CANCELLED:"#4E5969",CHANGED_WAITE_APPROVAL:"#FF802A",IN_FULFILLMENT:"#34C759",IN_STOP:"#34C759",ENDED:"#4E5969",FINISHED:"#4E5969"},B={INVALID:"#4e5969",WAITE_APPROVAL:"#ff802a",IN_APPROVAL:"#34c759",IN_FULFILLMENT:"#34c759",CHANGED_WAITE_APPROVAL:"#ff802a",CHANGED_APPROVAL:"#34c759",STOPPING:"#34C759",STOPPED:"#4E5969",TASK_EFFECT:"#4E5969"},T=m({code:d,requestFunction:oe,pageSize:20,searchProps:{code:`${d}Search`,options:[b({label:"合同名称 ",prop:"contractName"}),b({label:"履约节点名称",prop:"name"}),w({label:"要求履约时间",prop:"",sf:"beginFulfillDate",ef:"endFulfillDate"}),b({label:"履约单号 ",prop:"code"}),b({label:"合同编号",prop:"contractCode"}),L({label:"付款方",prop:"partyCodeList",multiple:!0,searchMethod:ie}),v({label:"履约状态",prop:"fulfillStatus",code:"fulfill_status_query",collapseTags:!0}),L({label:"收款方",prop:"ourPartyCodeList",multiple:!0,searchMethod:ce}),v({label:"合同类型",prop:"type",code:"contract_type",multiple:!1,collapseTags:!0}),v({label:"收支类型",prop:"financeType",code:"fulfill_finance_type",multiple:!1,collapseTags:!0}),v({label:"合同状态",prop:"contractStatusList",code:"performance_contract_status",multiple:!0,collapseTags:!0}),v({label:"订单状态",prop:"orderStatusList",code:"performance_contract_order_status",multiple:!0,collapseTags:!0})]},tableProps:{code:`${d}Table`,showIndex:!1,showSelect:!0,autoTable:!1,columns:[{label:"节点名称｜时间｜节点进展",prop:"name",slot:"name",minWidth:260},{label:"履约金额",prop:"contractAmount",slot:"amount",minWidth:160},{label:"合同信息",prop:"wwww",slot:"htxx",minWidth:200},{label:"订单信息",minWidth:180,prop:"createUserDepartmentName",slot:"ddxx"},{label:"收付款公司",prop:"processName",slot:"qyfxx",minWidth:180}]}});T.value.tableProps.columns.push({label:"当前状态 | 操作",prop:"operate",fixed:"right",width:200,slot:"operate"});const P=m([]);ee(()=>P.value.length==0);const u=()=>{A.value.refresh()},p=()=>{A.value.search()},H=async t=>{let s=await z({id:t.id});_({body:()=>I(()=>import("./form-dialoglyxg-5v5gz2Q_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),bodyData:{initData:s||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},j=async t=>{let s=await z({id:t.id});console.log(s),_({body:()=>I(()=>import("./form-dialogly-DY5TfWrJ.js"),__vite__mapDeps([8,1,2,3,4,5,6,9])),bodyData:{initData:s||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},U=t=>{t.typex="PROMISE_FINISH",_({body:()=>I(()=>import("./form-dialog-D5zGb8SU.js"),__vite__mapDeps([10,1,2,3,4,5])),bodyData:{initData:t||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},q=t=>{t.typex="IN_PROMISE",_({body:()=>I(()=>import("./form-dialog-D5zGb8SU.js"),__vite__mapDeps([10,1,2,3,4,5])),bodyData:{initData:t||{}},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},G=async t=>{_({body:()=>I(()=>import("./form-dialoglyqx-BfoD7KdL.js"),__vite__mapDeps([11,1,2,3,4,5,12])),bodyData:{initData:t},isReject:!0}).then(()=>{t?u():p()}).catch(()=>{})},K=t=>{V.push({name:"ContractDetails",params:{code:t.contractCode}})};m(!1);const Q=(t,s,i={})=>{_({body:t,bodyData:{initData:{...s,...i}},isReject:!0}).then(c=>{c.success&&(s?u():p())}).catch(()=>{})},X=t=>{re({id:t.contractOrderId}).then(s=>{Q(de,s,{plainType:"view"})})},F=(t,s)=>t.type=="FRAMEWORK_CONTRACT"&&t.contractOrderCode&&t.contractOrderAmount?t.orderStatus===le.IN_FULFILLMENT&&t.contractStatus===M.IN_FULFILLMENT?s=="date"?t.fulfillStatus!="PROMISE_FINISH"&&t.applicableAmount:t.fulfillStatus=="WAIT_PROMISE":!1:t.contractStatus===M.IN_FULFILLMENT?s=="date":!1;return(t,s)=>{const i=x("el-link"),c=x("el-tag"),C=x("FsButton"),Z=x("complex-page"),O=te("per");return h(),S(Z,ae({ref_key:"pageRef",ref:A,searchData:R.value,"onUpdate:searchData":s[0]||(s[0]=e=>R.value=e),"select-list":P.value,"onUpdate:selectList":s[1]||(s[1]=e=>P.value=e)},T.value),{name:n(({row:e,$index:y})=>[a("div",ue,[a("div",pe,[r(i,{underline:"never",style:{"font-size":"13px","margin-bottom":"5px"},type:"primary",onClick:f=>j(e)},{default:n(()=>[o(l(e.name),1)]),_:2},1032,["onClick"]),s[2]||(s[2]=a("br",null,null,-1)),a("div",null,"履约单号："+l(e.code),1),a("div",null,"要求履约时间："+l(e.fulfillDate?e.fulfillDate.split(" ")[0]:""),1)]),a("div",fe,[a("div",null,[a("div",me,[a("span",null,l(e.currentNode),1),a("span",null,"/"+l(e.total),1)]),a("div",null,[r(c,{effect:"light",type:e.financeType=="INCOME"?"danger":e.financeType=="EXPENDITURE"?"warning":"success",size:"small",style:{"margin-right":"5px"}},{default:n(()=>[o(l(e.financeTypeName),1)]),_:2},1032,["type"])])])])])]),amount:n(({row:e,$index:y})=>[a("div",_e,[s[3]||(s[3]=o(" 总金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amount)),1)]),a("div",ye,[r(i,{underline:"never",type:"primary",onClick:f=>U(e)},{default:n(()=>[s[4]||(s[4]=o(" 已付金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amountFinish)),1)]),_:2,__:[4]},1032,["onClick"])]),a("div",ve,[r(i,{underline:"never",type:"primary",onClick:f=>q(e)},{default:n(()=>[s[5]||(s[5]=o(" 在途金额： ")),a("span",null,l(t.$format.thousandsFormatCurrency(e.amountApply)),1)]),_:2,__:[5]},1032,["onClick"])])]),htxx:n(({row:e,$index:y})=>[a("div",null,[r(i,{underline:"never",style:{"font-size":"13px","margin-bottom":"5px"},type:"primary",onClick:f=>K(e)},{default:n(()=>[o(l(e.contractName),1)]),_:2},1032,["onClick"])]),a("div",he,l(e.contractCode),1),a("div",null,[a("span",Ee,"¥"+l(e.contractAmount),1),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:{"font-size":"13px"}},{default:n(()=>[o(l(e.typeName),1)]),_:2},1024),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:E({"font-size":"13px","margin-left":"5px",color:W[e.contractStatus]})},{default:n(()=>[o(l(N("contract_status",e.contractStatus)),1)]),_:2},1032,["style"])])]),ddxx:n(({row:e,$index:y})=>[e.type=="FRAMEWORK_CONTRACT"&&e.contractOrderCode&&e.contractOrderAmount?(h(),k("div",Ie,[a("div",Ce,[a("div",be,[r(i,{underline:"never",type:"primary",onClick:f=>X(e)},{default:n(()=>[o(l(`${e.contractOrderName}  [${e.contractOrderCode}]`),1)]),_:2},1032,["onClick"])])]),a("div",xe,[s[6]||(s[6]=a("div",{class:"desc-label"},"订单总金额：",-1)),a("div",ge,l(t.$format.thousandsFormatCurrency(e.contractOrderAmount)),1)]),r(c,{size:"small",color:"#fff",type:"info",underline:"never",style:E({"font-size":"13px",color:B[e.orderStatus]})},{default:n(()=>[o(l(N("order_status",e.orderStatus)),1)]),_:2},1032,["style"])])):g("",!0)]),qyfxx:n(({row:e,$index:y})=>[a("div",Ae,[a("div",Pe,[s[7]||(s[7]=a("div",{class:"desc-label"},"收款方：",-1)),a("div",Se,l(e.receivePartyName),1)]),a("div",Ne,[s[8]||(s[8]=a("div",{class:"desc-label"},"付款方：",-1)),a("div",De,l(e.payPartyName),1)])])]),operate:n(({row:e,$index:y})=>[a("div",Re,[a("div",Te,[a("i",{class:"dian",style:E({backgroundColor:e.fulfillStatus=="IN_PROMISE"||e.fulfillStatus=="PROMISE_FINISH"?"#34c759":e.fulfillStatus=="PART_PROMISE"?"#FF802A":e.fulfillStatus=="PROMISE_TERMINATE"?"#FF1616":""})},null,4),a("span",{class:"mc",style:E({color:e.fulfillStatus=="IN_PROMISE"||e.fulfillStatus=="PROMISE_FINISH"?"#34c759":e.fulfillStatus=="PART_PROMISE"?"#FF802A":e.fulfillStatus=="PROMISE_TERMINATE"?"#FF1616":""})},l(e.fulfillStatusName),5),e.days||e.days!=0?(h(),k("span",{key:0,class:"cq",style:E({color:e.days>0?"#1D2129 ":"#FF1616"})},l(e.days>0?`剩余${Math.abs(e.days)}天`:`超期：${Math.abs(e.days)}天`),5)):g("",!0)]),a("div",null,[F(e,"date")?$((h(),S(C,{key:0,"show-loading":!1,link:"",type:"primary",onClick:f=>H(e)},{default:n(()=>s[9]||(s[9]=[o("时间变更")])),_:2,__:[9]},1032,["onClick"])),[[O,D.value.change]]):g("",!0),F(e,"cancel")?$((h(),S(C,{key:1,"show-loading":!1,link:"",type:"primary",onClick:f=>G(e)},{default:n(()=>s[10]||(s[10]=[o("取消")])),_:2,__:[10]},1032,["onClick"])),[[O,D.value.del]]):g("",!0)])])]),_:1},16,["searchData","select-list"])}}}),Me=ne(Fe,[["__scopeId","data-v-e92ce834"]]);export{Me as default};
